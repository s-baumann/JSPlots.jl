<!DOCTYPE html>
<html>
<head>
    <title>PivotTable Examples</title>
    <meta charset="UTF-8">
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apache-arrow@14.0.1/Arrow.es2015.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        #controls {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 20px;
            padding: 10px;
            background-color: #f0f0f0;
            border-radius: 5px;
        }
        #$div_id {
            width: 100%;
            height: 600px;
        }
    </style>
        <style>
        .textblock-content {
            padding: 20px;
            margin: 10px 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: #333;
        }

        .textblock-content h1 {
            font-size: 2em;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
            font-weight: 600;
        }

        .textblock-content h2 {
            font-size: 1.5em;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
            font-weight: 600;
        }

        .textblock-content h3 {
            font-size: 1.25em;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
            font-weight: 600;
        }

        .textblock-content p {
            margin: 0.5em 0;
        }

        .textblock-content ul, .textblock-content ol {
            margin: 0.5em 0;
            padding-left: 2em;
        }

        .textblock-content code {
            background-color: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .textblock-content pre {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }

        .textblock-content pre code {
            background-color: transparent;
            padding: 0;
        }

        .textblock-content blockquote {
            border-left: 4px solid #ddd;
            padding-left: 1em;
            margin-left: 0;
            color: #666;
        }

        .textblock-content a {
            color: #0066cc;
            text-decoration: none;
        }

        .textblock-content a:hover {
            text-decoration: underline;
        }

        .textblock-content table {
            border-collapse: collapse;
            width: 100%;
            margin: 1em 0;
        }

        .textblock-content th, .textblock-content td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        .textblock-content th {
            background-color: #f5f5f5;
            font-weight: 600;
        }
    </style>


    <!-- external libs -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/0.71/jquery.csv-0.71.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.19.0/pivot.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.19.0/pivot.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.19.0/d3_renderers.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.19.0/c3_renderers.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.19.0/export_renderers.min.js"></script>
</head>

<body>

<script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>

<script type="module">
// Import parquet-wasm for Parquet file support
import * as parquet from 'https://unpkg.com/parquet-wasm@0.6.1/esm/parquet_wasm.js';

// Initialize parquet-wasm
await parquet.default();

// Make parquet available globally for loadDataset
window.parquetWasm = parquet;
window.parquetReady = true;
console.log('Parquet-wasm library loaded successfully');
</script>

<script>
// Helper function to wait for parquet-wasm to be loaded
function waitForParquet() {
    return new Promise(function(resolve) {
        if (window.parquetReady) {
            resolve();
            return;
        }
        var checkInterval = setInterval(function() {
            if (window.parquetReady) {
                clearInterval(checkInterval);
                resolve();
            }
        }, 50);
    });
}

// Centralized data loading function
// This function parses data from embedded or external sources and returns a Promise
// Supports CSV (embedded/external), JSON (embedded/external), and Parquet (external) formats
// Usage: loadDataset('dataLabel').then(function(data) { /* use data */ });
function loadDataset(dataLabel) {
    return new Promise(function(resolve, reject) {
        var dataElement = document.getElementById(dataLabel);
        if (!dataElement) {
            reject(new Error('Data element not found: ' + dataLabel));
            return;
        }

        var format = dataElement.getAttribute('data-format') || 'csv_embedded';
        var dataSrc = dataElement.getAttribute('data-src');

        // Handle external JSON files
        if (format === 'json_external' && dataSrc) {
            fetch(dataSrc)
                .then(function(response) {
                    if (!response.ok) {
                        throw new Error('Failed to load ' + dataSrc + ': ' + response.statusText);
                    }
                    return response.json();
                })
                .then(function(data) {
                    resolve(data);
                })
                .catch(function(error) {
                    console.error('Error loading external JSON:', error);
                    reject(error);
                });
            return;
        }

        // Handle external Parquet files
        if (format === 'parquet' && dataSrc) {
            // Wait for parquet-wasm to be loaded first
            waitForParquet()
                .then(function() {
                    return fetch(dataSrc);
                })
                .then(function(response) {
                    if (!response.ok) {
                        throw new Error('Failed to load ' + dataSrc + ': ' + response.statusText);
                    }
                    return response.arrayBuffer();
                })
                .then(function(arrayBuffer) {
                    // Use parquet-wasm to read the file
                    var uint8Array = new Uint8Array(arrayBuffer);

                    // readParquet returns an Arrow Table
                    var wasmTable = window.parquetWasm.readParquet(uint8Array);

                    // Convert to Arrow IPC stream
                    var ipcStream = wasmTable.intoIPCStream();

                    // Use Apache Arrow JS to read the IPC stream
                    var arrowTable = window.Arrow.tableFromIPC(ipcStream);

                    // Convert Arrow Table to array of JavaScript objects
                    var data = [];
                    for (var i = 0; i < arrowTable.numRows; i++) {
                        var row = {};
                        arrowTable.schema.fields.forEach(function(field) {
                            var column = arrowTable.getChild(field.name);
                            var value = column.get(i);

                            // Convert BigInt to Number (Arrow returns BigInt for Int64)
                            if (typeof value === 'bigint') {
                                value = Number(value);
                            }

                            row[field.name] = value;
                        });
                        data.push(row);
                    }

                    resolve(data);
                })
                .catch(function(error) {
                    console.error('Error loading external Parquet:', error);
                    reject(error);
                });
            return;
        }

        // Handle external CSV files
        if (format === 'csv_external' && dataSrc) {
            fetch(dataSrc)
                .then(function(response) {
                    if (!response.ok) {
                        throw new Error('Failed to load ' + dataSrc + ': ' + response.statusText);
                    }
                    return response.text();
                })
                .then(function(csvText) {
                    Papa.parse(csvText, {
                        header: true,
                        dynamicTyping: true,
                        skipEmptyLines: true,
                        complete: function(results) {
                            // Check for fatal errors only (not warnings)
                            var fatalErrors = results.errors.filter(function(err) {
                                return err.type !== 'Delimiter';
                            });

                            if (fatalErrors.length > 0) {
                                console.error('CSV parsing errors:', fatalErrors);
                                reject(fatalErrors);
                            } else if (results.data && results.data.length > 0) {
                                resolve(results.data);
                            } else {
                                reject(new Error('No data parsed from CSV'));
                            }
                        },
                        error: function(error) {
                            console.error('CSV parsing error:', error);
                            reject(error);
                        }
                    });
                })
                .catch(function(error) {
                    console.error('Error loading external CSV:', error);
                    reject(error);
                });
            return;
        }

        // Handle embedded data
        var dataText = dataElement.textContent.trim();

        if (format === 'json_embedded') {
            // Parse JSON data
            try {
                var data = JSON.parse(dataText);
                resolve(data);
            } catch (error) {
                console.error('JSON parsing error:', error);
                reject(error);
            }
        } else if (format === 'csv_embedded') {
            // Parse CSV data using PapaParse
            Papa.parse(dataText, {
                header: true,
                dynamicTyping: true,
                skipEmptyLines: true,
                complete: function(results) {
                    // Check for fatal errors only (not warnings)
                    // PapaParse includes non-fatal warnings in errors array
                    var fatalErrors = results.errors.filter(function(err) {
                        // Filter out delimiter detection warnings - these aren't fatal
                        // (common for single-column CSVs)
                        return err.type !== 'Delimiter';
                    });

                    if (fatalErrors.length > 0) {
                        console.error('CSV parsing errors:', fatalErrors);
                        reject(fatalErrors);
                    } else if (results.data && results.data.length > 0) {
                        resolve(results.data);
                    } else {
                        reject(new Error('No data parsed from CSV'));
                    }
                },
                error: function(error) {
                    console.error('CSV parsing error:', error);
                    reject(error);
                }
            });
        } else {
            reject(new Error('Unsupported data format: ' + format));
        }
    });
}

$(function(){

    loadDataset('sales_data').then(function(data) {
        console.log('Loaded data for pivot table sales_pivot:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table sales_pivot');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for sales_pivot:', arrayData.slice(0, 3));

        $("#sales_pivot").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Table","rows":["Region"],"aggregatorName":"Sum","vals":["Sales"],"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([-2.5, -1.0, 0.0, 1.0, 2.5]).range(["#FF9999", "#FFFF99", "#FFFFFF", "#99FF99", "#99CCFF"]).clamp(true)}}},"cols":["Month"]})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table sales_pivot:', error);
        $("#sales_pivot").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
    loadDataset('performance_data').then(function(data) {
        console.log('Loaded data for pivot table performance_heatmap:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table performance_heatmap');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for performance_heatmap:', arrayData.slice(0, 3));

        $("#performance_heatmap").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Heatmap","rows":["Employee"],"aggregatorName":"Average","vals":["Score"],"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([50.0, 65.0, 75.0, 85.0, 100.0]).range(["#d73027", "#fee08b", "#ffffbf", "#d9ef8b", "#1a9850"]).clamp(true)}}},"cols":["Quarter"]})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table performance_heatmap:', error);
        $("#performance_heatmap").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
    loadDataset('product_data').then(function(data) {
        console.log('Loaded data for pivot table revenue_by_category:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table revenue_by_category');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for revenue_by_category:', arrayData.slice(0, 3));

        $("#revenue_by_category").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Bar Chart","rows":["Category"],"aggregatorName":"Sum","vals":["Revenue"],"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([-2.5, -1.0, 0.0, 1.0, 2.5]).range(["#FF9999", "#FFFF99", "#FFFFFF", "#99FF99", "#99CCFF"]).clamp(true)}}},"cols":["Quarter"]})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table revenue_by_category:', error);
        $("#revenue_by_category").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
    loadDataset('customer_data').then(function(data) {
        console.log('Loaded data for pivot table customer_revenue:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table customer_revenue');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for customer_revenue:', arrayData.slice(0, 3));

        $("#customer_revenue").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Heatmap","rows":["Country"],"aggregatorName":"Sum","vals":["Revenue"],"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([-2.5, -1.0, 0.0, 1.0, 2.5]).range(["#FF9999", "#FFFF99", "#FFFFFF", "#99FF99", "#99CCFF"]).clamp(true)}}},"cols":["ProductType"],"exclusions":{"Country":["Test"]}})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table customer_revenue:', error);
        $("#customer_revenue").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
    loadDataset('survey_data').then(function(data) {
        console.log('Loaded data for pivot table survey_results:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table survey_results');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for survey_results:', arrayData.slice(0, 3));

        $("#survey_results").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Table Barchart","rows":["Age_Group","Gender"],"aggregatorName":"Average","vals":["Satisfaction"],"inclusions":{"Age_Group":["18-25","26-35","36-45"]},"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([-2.5, -1.0, 0.0, 1.0, 2.5]).range(["#FF9999", "#FFFF99", "#FFFFFF", "#99FF99", "#99CCFF"]).clamp(true)}}},"cols":["Product"]})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table survey_results:', error);
        $("#survey_results").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
    loadDataset('transaction_data').then(function(data) {
        console.log('Loaded data for pivot table transaction_analysis:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table transaction_analysis');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for transaction_analysis:', arrayData.slice(0, 3));

        $("#transaction_analysis").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Heatmap","rows":["Customer_Type"],"aggregatorName":"Count","vals":["Amount"],"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([0.0, 50.0, 100.0, 150.0]).range(["#f7fbff", "#9ecae1", "#4292c6", "#08519c"]).clamp(true)}}},"cols":["Transaction_Type"]})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table transaction_analysis:', error);
        $("#transaction_analysis").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
    loadDataset('stockReturns').then(function(data) {
        console.log('Loaded data for pivot table Returns_Over_Last_Few_Days:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table Returns_Over_Last_Few_Days');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for Returns_Over_Last_Few_Days:', arrayData.slice(0, 3));

        $("#Returns_Over_Last_Few_Days").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Heatmap","rows":["Symbol"],"aggregatorName":"Average","vals":["Return"],"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([-2.5, -1.0, 0.0, 1.0, 2.5]).range(["#FF9999", "#FFFF99", "#FFFFFF", "#99FF99", "#99CCFF"]).clamp(true)}}},"cols":["Date"],"exclusions":{"Symbol":["MSFT"]}})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table Returns_Over_Last_Few_Days:', error);
        $("#Returns_Over_Last_Few_Days").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
    loadDataset('correlations').then(function(data) {
        console.log('Loaded data for pivot table Correlation_Matrix:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table Correlation_Matrix');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for Correlation_Matrix:', arrayData.slice(0, 3));

        $("#Correlation_Matrix").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Heatmap","rows":["Symbol1"],"aggregatorName":"Average","vals":["Correlation"],"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([-1.0, 0.0, 1.0]).range(["#FF4545", "#ffffff", "#4F92FF"]).clamp(true)}}},"cols":["Symbol2"]})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table Correlation_Matrix:', error);
        $("#Correlation_Matrix").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
(function() {
    // Configuration
    const FILTER_COLS = ['categ22', 'categ'];
    const X_COLS = ['x'];
    const Y_COLS = ['y'];
    const COLOR_COLS = ['color'];
    const COLOR_MAPS = {'color': {'B': '#EF553B', 'A': '#636efa'}};
    const DEFAULT_X_COL = 'x';
    const DEFAULT_Y_COL = 'y';
    const DEFAULT_COLOR_COL = 'color';

    let allData = [];

    // Aggregation functions
    function aggregate(values, method) {
        if (values.length === 0) return null;
        if (method === 'none') return values;
        if (method === 'count') return [values.length];
        if (method === 'mean') {
            const sum = values.reduce((a, b) => a + b, 0);
            return [sum / values.length];
        }
        if (method === 'median') {
            const sorted = [...values].sort((a, b) => a - b);
            const mid = Math.floor(sorted.length / 2);
            return sorted.length % 2 === 0 ?
                [(sorted[mid - 1] + sorted[mid]) / 2] :
                [sorted[mid]];
        }
        if (method === 'min') return [Math.min(...values)];
        if (method === 'max') return [Math.max(...values)];
        return values;
    }

    // Make it global so inline onchange can see it
    window.updateChart_pchart = function() {
        // Get current X and Y columns
        const xColSelect = document.getElementById('x_col_select_pchart');
        const X_COL = xColSelect ? xColSelect.value : DEFAULT_X_COL;

        const yColSelect = document.getElementById('y_col_select_pchart');
        const Y_COL = yColSelect ? yColSelect.value : DEFAULT_Y_COL;

        // Get current filter values (multiple selections)
        const filters = {};
        FILTER_COLS.forEach(col => {
            const select = document.getElementById(col + '_select');
            if (select) {
                filters[col] = Array.from(select.selectedOptions).map(opt => opt.value);
            }
        });

        // Get current color column
        const colorColSelect = document.getElementById('color_col_select_pchart');
        const COLOR_COL = colorColSelect ? colorColSelect.value : DEFAULT_COLOR_COL;

        // Get current aggregator
        const aggregatorSelect = document.getElementById('aggregator_select_pchart');
        const AGGREGATOR = aggregatorSelect ? aggregatorSelect.value : 'none';

        // Get current facet selections
        const facet1Select = document.getElementById('facet1_select_pchart');
        const facet2Select = document.getElementById('facet2_select_pchart');
        const facet1 = facet1Select && facet1Select.value !== 'None' ? facet1Select.value : null;
        const facet2 = facet2Select && facet2Select.value !== 'None' ? facet2Select.value : null;

        // Build FACET_COLS array based on selections
        const FACET_COLS = [];
        if (facet1) FACET_COLS.push(facet1);
        if (facet2) FACET_COLS.push(facet2);

        // Get color map for current selection
        const COLOR_MAP = COLOR_MAPS[COLOR_COL] || {};

        // Filter data (support multiple selections per filter)
        const filteredData = allData.filter(row => {
            for (let col in filters) {
                const selectedValues = filters[col];
                if (selectedValues.length > 0 && !selectedValues.includes(String(row[col]))) {
                    return false;
                }
            }
            return true;
        });

        if (FACET_COLS.length === 0) {
            // No faceting - group by color
            const groupedData = {};
            filteredData.forEach(row => {
                const colorVal = (COLOR_COL === '__no_color__') ? 'all' : String(row[COLOR_COL]);
                if (!groupedData[colorVal]) {
                    groupedData[colorVal] = {
                        data: [],
                        color: colorVal
                    };
                }
                groupedData[colorVal].data.push(row);
            });

            const traces = [];
            for (let groupKey in groupedData) {
                const group = groupedData[groupKey];
                group.data.sort((a, b) => a[X_COL] - b[X_COL]);

                let xValues, yValues;
                if (AGGREGATOR === 'none') {
                    xValues = group.data.map(row => row[X_COL]);
                    yValues = group.data.map(row => row[Y_COL]);
                } else {
                    // Group by x value and aggregate
                    const xGroups = {};
                    group.data.forEach(row => {
                        const xVal = row[X_COL];
                        if (!xGroups[xVal]) xGroups[xVal] = [];
                        xGroups[xVal].push(row[Y_COL]);
                    });

                    xValues = [];
                    yValues = [];
                    // Sort keys - try numeric sort first, fall back to string sort
                    const sortedKeys = Object.keys(xGroups).sort((a, b) => {
                        const aNum = parseFloat(a);
                        const bNum = parseFloat(b);
                        if (!isNaN(aNum) && !isNaN(bNum)) {
                            return aNum - bNum;
                        }
                        return String(a).localeCompare(String(b));
                    });

                    sortedKeys.forEach(xVal => {
                        const aggregated = aggregate(xGroups[xVal], AGGREGATOR);
                        if (aggregated && aggregated.length > 0) {
                            // Keep original value type (don't force to float for strings)
                            const numVal = parseFloat(xVal);
                            xValues.push(isNaN(numVal) ? xVal : numVal);
                            yValues.push(aggregated[0]);
                        }
                    });
                }

                traces.push({
                    x: xValues,
                    y: yValues,
                    type: 'scatter',
                    mode: 'lines+markers',
                    name: group.color,
                    line: {
                        color: COLOR_MAP[group.color] || '#000000',
                        width: 1
                    },
                    marker: { size: 1 }
                });
            }

            const layout = {
                xaxis: { title: X_COL },
                yaxis: { title: Y_COL },
                hovermode: 'closest',
                showlegend: true
            };

            Plotly.newPlot('pchart', traces, layout, {responsive: true});

        } else if (FACET_COLS.length === 1) {
            // Facet wrap
            const facetCol = FACET_COLS[0];
            const facetValues = [...new Set(filteredData.map(row => row[facetCol]))].sort();
            const nFacets = facetValues.length;

            // Calculate grid dimensions (prefer wider grids)
            const nCols = Math.ceil(Math.sqrt(nFacets * 1.5));
            const nRows = Math.ceil(nFacets / nCols);

            const traces = [];
            const layout = {
                hovermode: 'closest',
                showlegend: true,
                grid: {rows: nRows, columns: nCols, pattern: 'independent'}
            };

            facetValues.forEach((facetVal, idx) => {
                const facetData = filteredData.filter(row => row[facetCol] === facetVal);

                // Group by color within this facet
                const groupedData = {};
                facetData.forEach(row => {
                    const colorVal = (COLOR_COL === '__no_color__') ? 'all' : String(row[COLOR_COL]);
                    if (!groupedData[colorVal]) {
                        groupedData[colorVal] = {
                            data: [],
                            color: colorVal
                        };
                    }
                    groupedData[colorVal].data.push(row);
                });

                const row = Math.floor(idx / nCols) + 1;
                const col = (idx % nCols) + 1;
                const xaxis = idx === 0 ? 'x' : 'x' + (idx + 1);
                const yaxis = idx === 0 ? 'y' : 'y' + (idx + 1);

                for (let groupKey in groupedData) {
                    const group = groupedData[groupKey];
                    group.data.sort((a, b) => a[X_COL] - b[X_COL]);

                    let xValues, yValues;
                    if (AGGREGATOR === 'none') {
                        xValues = group.data.map(row => row[X_COL]);
                        yValues = group.data.map(row => row[Y_COL]);
                    } else {
                        // Group by x value and aggregate
                        const xGroups = {};
                        group.data.forEach(row => {
                            const xVal = row[X_COL];
                            if (!xGroups[xVal]) xGroups[xVal] = [];
                            xGroups[xVal].push(row[Y_COL]);
                        });

                        xValues = [];
                        yValues = [];
                        // Sort keys - try numeric sort first, fall back to string sort
                        const sortedKeys = Object.keys(xGroups).sort((a, b) => {
                            const aNum = parseFloat(a);
                            const bNum = parseFloat(b);
                            if (!isNaN(aNum) && !isNaN(bNum)) {
                                return aNum - bNum;
                            }
                            return String(a).localeCompare(String(b));
                        });

                        sortedKeys.forEach(xVal => {
                            const aggregated = aggregate(xGroups[xVal], AGGREGATOR);
                            if (aggregated && aggregated.length > 0) {
                                // Keep original value type (don't force to float for strings)
                                const numVal = parseFloat(xVal);
                                xValues.push(isNaN(numVal) ? xVal : numVal);
                                yValues.push(aggregated[0]);
                            }
                        });
                    }

                    const legendGroup = group.color;

                    traces.push({
                        x: xValues,
                        y: yValues,
                        type: 'scatter',
                        mode: 'lines+markers',
                        name: group.color,
                        legendgroup: legendGroup,
                        showlegend: idx === 0,
                        xaxis: xaxis,
                        yaxis: yaxis,
                        line: {
                            color: COLOR_MAP[group.color] || '#000000',
                            width: 1
                        },
                        marker: { size: 1 }
                    });
                }

                // Add axis configuration
                layout[xaxis] = {
                    title: row === nRows ? X_COL : '',
                    anchor: yaxis
                };
                layout[yaxis] = {
                    title: col === 1 ? Y_COL : '',
                    anchor: xaxis
                };

                // Add annotation for facet label
                if (!layout.annotations) layout.annotations = [];
                layout.annotations.push({
                    text: facetCol + ': ' + facetVal,
                    showarrow: false,
                    xref: xaxis === 'x' ? 'x domain' : xaxis + ' domain',
                    yref: yaxis === 'y' ? 'y domain' : yaxis + ' domain',
                    x: 0.5,
                    y: 1.05,
                    xanchor: 'center',
                    yanchor: 'bottom',
                    font: {size: 10}
                });
            });

            Plotly.newPlot('pchart', traces, layout, {responsive: true});

        } else {
            // Facet grid (2 facet columns)
            const facetRow = FACET_COLS[0];
            const facetCol = FACET_COLS[1];
            const rowValues = [...new Set(filteredData.map(row => row[facetRow]))].sort();
            const colValues = [...new Set(filteredData.map(row => row[facetCol]))].sort();
            const nRows = rowValues.length;
            const nCols = colValues.length;

            const traces = [];
            const layout = {
                hovermode: 'closest',
                showlegend: true,
                grid: {rows: nRows, columns: nCols, pattern: 'independent'}
            };

            rowValues.forEach((rowVal, rowIdx) => {
                colValues.forEach((colVal, colIdx) => {
                    const facetData = filteredData.filter(row =>
                        row[facetRow] === rowVal && row[facetCol] === colVal
                    );

                    // Group by color within this facet
                    const groupedData = {};
                    facetData.forEach(row => {
                        const colorVal = (COLOR_COL === '__no_color__') ? 'all' : String(row[COLOR_COL]);
                        if (!groupedData[colorVal]) {
                            groupedData[colorVal] = {
                                data: [],
                                color: colorVal
                            };
                        }
                        groupedData[colorVal].data.push(row);
                    });

                    const idx = rowIdx * nCols + colIdx;
                    const xaxis = idx === 0 ? 'x' : 'x' + (idx + 1);
                    const yaxis = idx === 0 ? 'y' : 'y' + (idx + 1);

                    for (let groupKey in groupedData) {
                        const group = groupedData[groupKey];
                        group.data.sort((a, b) => a[X_COL] - b[X_COL]);

                        let xValues, yValues;
                        if (AGGREGATOR === 'none') {
                            xValues = group.data.map(row => row[X_COL]);
                            yValues = group.data.map(row => row[Y_COL]);
                        } else {
                            // Group by x value and aggregate
                            const xGroups = {};
                            group.data.forEach(row => {
                                const xVal = row[X_COL];
                                if (!xGroups[xVal]) xGroups[xVal] = [];
                                xGroups[xVal].push(row[Y_COL]);
                            });

                            xValues = [];
                            yValues = [];
                            const sortedKeys = Object.keys(xGroups).sort((a, b) => {
                                const aNum = parseFloat(a);
                                const bNum = parseFloat(b);
                                if (!isNaN(aNum) && !isNaN(bNum)) {
                                    return aNum - bNum;
                                }
                                return String(a).localeCompare(String(b));
                            });

                            sortedKeys.forEach(xVal => {
                                const aggregated = aggregate(xGroups[xVal], AGGREGATOR);
                                if (aggregated && aggregated.length > 0) {
                                    const numVal = parseFloat(xVal);
                                    xValues.push(isNaN(numVal) ? xVal : numVal);
                                    yValues.push(aggregated[0]);
                                }
                            });
                        }

                        const legendGroup = group.color;

                        traces.push({
                            x: xValues,
                            y: yValues,
                            type: 'scatter',
                            mode: 'lines+markers',
                            name: group.color,
                            legendgroup: legendGroup,
                            showlegend: idx === 0,
                            xaxis: xaxis,
                            yaxis: yaxis,
                            line: {
                                color: COLOR_MAP[group.color] || '#000000',
                                width: 1
                            },
                            marker: { size: 1 }
                        });
                    }

                    // Add axis configuration
                    layout[xaxis] = {
                        title: rowIdx === nRows - 1 ? X_COL : '',
                        anchor: yaxis
                    };
                    layout[yaxis] = {
                        title: colIdx === 0 ? Y_COL : '',
                        anchor: xaxis
                    };

                    // Add annotations for facet labels
                    if (!layout.annotations) layout.annotations = [];

                    // Column header
                    if (rowIdx === 0) {
                        layout.annotations.push({
                            text: facetCol + ': ' + colVal,
                            showarrow: false,
                            xref: xaxis === 'x' ? 'x domain' : xaxis + ' domain',
                            yref: yaxis === 'y' ? 'y domain' : yaxis + ' domain',
                            x: 0.5,
                            y: 1.1,
                            xanchor: 'center',
                            yanchor: 'bottom',
                            font: {size: 10}
                        });
                    }

                    // Row label
                    if (colIdx === nCols - 1) {
                        layout.annotations.push({
                            text: facetRow + ': ' + rowVal,
                            showarrow: false,
                            xref: xaxis === 'x' ? 'x domain' : xaxis + ' domain',
                            yref: yaxis === 'y' ? 'y domain' : yaxis + ' domain',
                            x: 1.05,
                            y: 0.5,
                            xanchor: 'left',
                            yanchor: 'middle',
                            textangle: -90,
                            font: {size: 10}
                        });
                    }
                });
            });

            Plotly.newPlot('pchart', traces, layout, {responsive: true});
        }
    };

    // Load and parse CSV data using centralized parser
    loadDataset('df_combined').then(function(data) {
        allData = data;
        window.updateChart_pchart();
    }).catch(function(error) {
        console.error('Error loading data for chart pchart:', error);
    });
})();
    // Load and parse CSV data using centralized parser
    loadDataset('subframe').then(function(data3d) {
        window.allData_threeD = data3d;

        $(function() {
            

            // Initial plot
            updatePlotWithFilters_threeD();
        });
    }).catch(function(error) {
        console.error('Error loading data for chart threeD:', error);
    });

    function updatePlot_threeD(data3d) {
        // ========== 3D SURFACE PLOT CONFIGURATION ==========
        // Define your column names here
        const x = 'x';
        const y = 'y';
        const z = 'z';
        const group = 'group';
        // ===================================================

        // Get unique groups
const uniqueGroups = [...new Set(data3d.map(row => row[group]))].sort();


        // Define a set of distinct color gradients
        const colorGradients = [
            // Blue gradient
            [[0, 'rgb(8,48,107)'], [0.25, 'rgb(33,102,172)'], [0.5, 'rgb(67,147,195)'], [0.75, 'rgb(146,197,222)'], [1, 'rgb(209,229,240)']],
            // Red-Orange gradient
            [[0, 'rgb(127,0,0)'], [0.25, 'rgb(189,0,38)'], [0.5, 'rgb(227,74,51)'], [0.75, 'rgb(252,141,89)'], [1, 'rgb(253,204,138)']],
            // Green gradient
            [[0, 'rgb(0,68,27)'], [0.25, 'rgb(0,109,44)'], [0.5, 'rgb(35,139,69)'], [0.75, 'rgb(116,196,118)'], [1, 'rgb(199,233,192)']],
            // Purple gradient
            [[0, 'rgb(63,0,125)'], [0.25, 'rgb(106,81,163)'], [0.5, 'rgb(158,154,200)'], [0.75, 'rgb(188,189,220)'], [1, 'rgb(218,218,235)']],
            // Yellow-Orange gradient
            [[0, 'rgb(102,37,6)'], [0.25, 'rgb(153,52,4)'], [0.5, 'rgb(217,95,14)'], [0.75, 'rgb(254,153,41)'], [1, 'rgb(254,217,142)']],
            // Teal gradient
            [[0, 'rgb(1,70,54)'], [0.25, 'rgb(1,102,94)'], [0.5, 'rgb(2,129,138)'], [0.75, 'rgb(54,175,172)'], [1, 'rgb(178,226,226)']],
            // Pink-Magenta gradient
            [[0, 'rgb(73,0,106)'], [0.25, 'rgb(123,50,148)'], [0.5, 'rgb(194,165,207)'], [0.75, 'rgb(231,212,232)'], [1, 'rgb(247,242,247)']],
            // Brown gradient
            [[0, 'rgb(84,48,5)'], [0.25, 'rgb(140,81,10)'], [0.5, 'rgb(191,129,45)'], [0.75, 'rgb(223,194,125)'], [1, 'rgb(246,232,195)']],
        ];

        // Function to create z matrix for a group
        function createSurface(groupData, colorscale, name) {
            const xVals = [...new Set(groupData.map(row => parseFloat(row[x])))].sort((a,b) => a-b);
            const yVals = [...new Set(groupData.map(row => parseFloat(row[y])))].sort((a,b) => a-b);

            const zMatrix = [];
            for (let i = 0; i < yVals.length; i++) {
                zMatrix[i] = [];
                for (let j = 0; j < xVals.length; j++) {
                    const point = groupData.find(row =>
                        parseFloat(row[x]) === xVals[j] &&
                        parseFloat(row[y]) === yVals[i]
                    );
                    zMatrix[i][j] = point ? parseFloat(point[z]) : null;
                }
            }

            return {
                z: zMatrix,
                x: xVals,
                y: yVals,
                type: 'surface',
                name: name,
                colorscale: colorscale,
                showscale: false
            };
        }

        // Create a surface for each group
const plotData = uniqueGroups.map((grp, index) => {
    const groupData = data3d.filter(row => row[group] === grp);
    const colorscale = colorGradients[index % colorGradients.length];
    return createSurface(groupData, colorscale, `Group ${grp}`);
});


        const layout = {
            title: '3D Surface Chart',
            autosize: true,
            height: 600,
            scene: {
                xaxis: { title: x },
                yaxis: { title: y },
                zaxis: { title: z }
            },
            showlegend: true,
        };

        Plotly.newPlot('threeD', plotData, layout);
    }

    function updatePlotWithFilters_threeD() {
    updatePlot_threeD(window.allData_threeD);
}



});
</script>

<!-- DATASETS -->

<script type="text/plain" id="performance_data" data-format="csv_embedded" data-src="">
Employee,Quarter,Score,Department
Alice,Q1,72.90167443157581,Sales
Alice,Q2,69.44329536273762,Sales
Alice,Q3,85.8550924249442,Sales
Alice,Q4,61.22481600176235,Sales
Bob,Q1,71.54008314255638,Engineering
Bob,Q2,94.84977138481625,Engineering
Bob,Q3,97.17949630220537,Engineering
Bob,Q4,78.78709970816041,Engineering
Charlie,Q1,79.15317519127287,Sales
Charlie,Q2,69.92922152215539,Sales
Charlie,Q3,62.422506017703526,Sales
Charlie,Q4,74.06835978359791,Sales
Diana,Q1,86.99736335042479,Marketing
Diana,Q2,69.49621102301639,Marketing
Diana,Q3,67.94750211319034,Marketing
Diana,Q4,79.76141985580881,Marketing
Eve,Q1,73.86327761996789,Engineering
Eve,Q2,68.18996672627136,Engineering
Eve,Q3,80.58345456637414,Engineering
Eve,Q4,94.1714316419753,Engineering

</script><script type="text/plain" id="product_data" data-format="csv_embedded" data-src="">
Category,Brand,Revenue,Quarter
Electronics,Brand B,2505,Q1
Clothing,Brand D,3568,Q2
Home,Brand C,8315,Q3
Sports,Brand A,9987,Q4
Books,Brand A,8134,Q1
Electronics,Brand D,7227,Q2
Clothing,Brand D,7573,Q3
Home,Brand B,8997,Q4
Sports,Brand B,6676,Q1
Books,Brand A,2437,Q2
Electronics,Brand A,2974,Q3
Clothing,Brand D,4340,Q4
Home,Brand D,9224,Q1
Sports,Brand C,7209,Q2
Books,Brand B,9533,Q3
Electronics,Brand C,9561,Q4
Clothing,Brand D,2521,Q1
Home,Brand A,6386,Q2
Sports,Brand B,5636,Q3
Books,Brand C,1493,Q4
Electronics,Brand C,9976,Q1
Clothing,Brand B,2535,Q2
Home,Brand C,9777,Q3
Sports,Brand A,9138,Q4
Books,Brand C,5057,Q1
Electronics,Brand D,8927,Q2
Clothing,Brand B,1393,Q3
Home,Brand A,2894,Q4
Sports,Brand B,2122,Q1
Books,Brand A,2404,Q2
Electronics,Brand B,3647,Q3
Clothing,Brand A,5883,Q4
Home,Brand B,4031,Q1
Sports,Brand D,8321,Q2
Books,Brand B,1203,Q3
Electronics,Brand A,1741,Q4
Clothing,Brand A,8270,Q1
Home,Brand C,5770,Q2
Sports,Brand A,9806,Q3
Books,Brand A,2161,Q4
Electronics,Brand C,8569,Q1
Clothing,Brand D,4153,Q2
Home,Brand B,1832,Q3
Sports,Brand B,2234,Q4
Books,Brand C,3762,Q1
Electronics,Brand C,5852,Q2
Clothing,Brand A,4015,Q3
Home,Brand B,7903,Q4
Sports,Brand D,5417,Q1
Books,Brand A,8532,Q2
Electronics,Brand C,8692,Q3
Clothing,Brand B,2331,Q4
Home,Brand A,9439,Q1
Sports,Brand B,7926,Q2
Books,Brand D,9880,Q3
Electronics,Brand A,3355,Q4
Clothing,Brand D,2935,Q1
Home,Brand C,6877,Q2
Sports,Brand C,6619,Q3
Books,Brand A,1358,Q4
Electronics,Brand B,8459,Q1
Clothing,Brand C,5412,Q2
Home,Brand D,3269,Q3
Sports,Brand A,6703,Q4
Books,Brand B,8088,Q1
Electronics,Brand A,1479,Q2
Clothing,Brand B,1650,Q3
Home,Brand C,5176,Q4
Sports,Brand C,1839,Q1
Books,Brand A,3725,Q2
Electronics,Brand A,6966,Q3
Clothing,Brand D,5721,Q4
Home,Brand B,6799,Q1
Sports,Brand C,1599,Q2
Books,Brand D,2578,Q3
Electronics,Brand B,9112,Q4
Clothing,Brand C,1844,Q1
Home,Brand D,6320,Q2
Sports,Brand D,1857,Q3
Books,Brand B,2521,Q4
Electronics,Brand C,4032,Q1
Clothing,Brand D,7200,Q2
Home,Brand B,7415,Q3
Sports,Brand C,1142,Q4
Books,Brand D,6993,Q1
Electronics,Brand B,9440,Q2
Clothing,Brand B,2074,Q3
Home,Brand B,2059,Q4
Sports,Brand C,3061,Q1
Books,Brand A,4468,Q2
Electronics,Brand B,1076,Q3
Clothing,Brand C,3726,Q4
Home,Brand A,2514,Q1
Sports,Brand A,7629,Q2
Books,Brand A,1284,Q3
Electronics,Brand D,1139,Q4
Clothing,Brand D,6300,Q1
Home,Brand B,1422,Q2
Sports,Brand C,9741,Q3
Books,Brand B,8539,Q4

</script><script type="text/plain" id="customer_data" data-format="csv_embedded" data-src="">
Country,ProductType,Channel,Revenue,Year
Test,Premium,Online,4177,2022
UK,Premium,Wholesale,1017,2023
France,Budget,Wholesale,3737,2024
Germany,Budget,Wholesale,1682,2022
UK,Standard,Wholesale,3871,2023
Test,Budget,Online,3093,2024
USA,Budget,Online,2953,2022
Germany,Premium,Wholesale,1959,2023
Test,Budget,Online,4017,2024
Test,Budget,Retail,573,2022
USA,Budget,Online,4550,2023
Germany,Premium,Online,1354,2024
UK,Budget,Retail,825,2022
Germany,Standard,Wholesale,1568,2023
France,Budget,Retail,4664,2024
Germany,Budget,Retail,3547,2022
USA,Premium,Retail,3946,2023
Germany,Premium,Retail,4361,2024
USA,Standard,Retail,608,2022
USA,Premium,Online,1220,2023
France,Budget,Wholesale,1405,2024
Test,Budget,Retail,1703,2022
Test,Standard,Wholesale,1179,2023
Test,Premium,Wholesale,3557,2024
UK,Premium,Retail,4254,2022
France,Budget,Online,822,2023
UK,Premium,Wholesale,3925,2024
Germany,Premium,Retail,2148,2022
USA,Standard,Online,2742,2023
Germany,Premium,Wholesale,3132,2024
Germany,Premium,Retail,2239,2022
USA,Premium,Online,4401,2023
Test,Premium,Wholesale,4509,2024
Germany,Budget,Online,2819,2022
Germany,Budget,Retail,2220,2023
Test,Budget,Wholesale,4076,2024
Germany,Premium,Online,1852,2022
Japan,Standard,Wholesale,788,2023
UK,Budget,Retail,615,2024
UK,Standard,Online,923,2022
Japan,Budget,Online,2227,2023
USA,Standard,Retail,601,2024
Japan,Premium,Wholesale,502,2022
Japan,Budget,Retail,4720,2023
Germany,Budget,Retail,3984,2024
Germany,Standard,Online,4035,2022
Test,Premium,Retail,1023,2023
Test,Budget,Retail,4764,2024
France,Standard,Retail,1064,2022
USA,Premium,Wholesale,3023,2023
UK,Premium,Online,792,2024
USA,Budget,Online,2016,2022
Germany,Budget,Online,2187,2023
France,Standard,Wholesale,3289,2024
Japan,Budget,Online,902,2022
USA,Budget,Retail,2883,2023
France,Budget,Online,1711,2024
Test,Standard,Online,4463,2022
Test,Standard,Online,3039,2023
Test,Budget,Wholesale,3559,2024
Japan,Premium,Retail,2983,2022
Japan,Standard,Wholesale,1248,2023
France,Standard,Online,3739,2024
UK,Budget,Retail,4064,2022
USA,Premium,Wholesale,779,2023
Germany,Premium,Online,1944,2024
Germany,Standard,Online,4444,2022
Test,Budget,Online,955,2023
UK,Budget,Retail,4410,2024
France,Standard,Wholesale,1924,2022
Germany,Premium,Wholesale,3949,2023
Germany,Budget,Retail,2347,2024
UK,Standard,Online,2891,2022
USA,Standard,Wholesale,2853,2023
Germany,Budget,Wholesale,4165,2024
UK,Standard,Wholesale,4829,2022
Test,Standard,Wholesale,4579,2023
Germany,Budget,Retail,1034,2024
France,Budget,Online,751,2022
France,Premium,Retail,1585,2023
Germany,Budget,Online,4363,2024
Japan,Premium,Wholesale,632,2022
UK,Budget,Online,1042,2023
Germany,Premium,Wholesale,4969,2024
Test,Standard,Online,3009,2022
Test,Premium,Online,505,2023
France,Premium,Online,4353,2024
Japan,Budget,Online,3109,2022
Germany,Standard,Retail,4791,2023
UK,Premium,Retail,4249,2024
USA,Standard,Online,3867,2022
France,Standard,Online,1840,2023
UK,Standard,Retail,1687,2024
Japan,Budget,Wholesale,2508,2022
Germany,Standard,Online,4430,2023
UK,Budget,Wholesale,1602,2024
Germany,Premium,Online,1808,2022
USA,Budget,Online,4251,2023
UK,Premium,Wholesale,3205,2024
USA,Budget,Wholesale,1134,2022
France,Premium,Retail,3794,2023
Test,Premium,Wholesale,1752,2024
Test,Standard,Online,2094,2022
France,Budget,Wholesale,944,2023
UK,Budget,Online,2942,2024
Test,Premium,Wholesale,3900,2022
Germany,Budget,Retail,2943,2023
France,Budget,Retail,4656,2024
Germany,Budget,Wholesale,2882,2022
Germany,Standard,Wholesale,4991,2023
UK,Premium,Online,1492,2024
Japan,Standard,Retail,4185,2022
Test,Standard,Retail,3281,2023
Test,Premium,Wholesale,1280,2024
UK,Standard,Wholesale,4961,2022
Test,Budget,Wholesale,2781,2023
Test,Budget,Online,4545,2024
UK,Premium,Online,1720,2022
Germany,Budget,Retail,1505,2023
USA,Premium,Wholesale,4449,2024

</script><script type="text/plain" id="survey_data" data-format="csv_embedded" data-src="">
Age_Group,Gender,Satisfaction,Product,Region
18-25,Male,4,Product A,East
46-55,Male,4,Product C,West
56+,Other,9,Product B,West
26-35,Female,7,Product A,South
36-45,Other,10,Product A,South
26-35,Prefer not to say,6,Product C,South
26-35,Other,8,Product B,East
26-35,Other,7,Product B,South
56+,Other,10,Product A,West
36-45,Other,4,Product C,West
18-25,Male,3,Product B,East
56+,Male,8,Product C,South
56+,Female,8,Product B,North
36-45,Female,9,Product B,West
56+,Prefer not to say,2,Product B,West
26-35,Other,2,Product A,East
18-25,Female,9,Product B,West
46-55,Male,1,Product C,East
18-25,Prefer not to say,6,Product B,East
56+,Female,3,Product C,East
26-35,Other,6,Product C,South
26-35,Other,4,Product C,East
26-35,Other,6,Product B,North
56+,Prefer not to say,9,Product A,South
56+,Female,2,Product A,South
18-25,Prefer not to say,10,Product B,North
56+,Male,10,Product A,West
26-35,Male,7,Product A,East
36-45,Female,9,Product B,East
56+,Male,10,Product A,West
56+,Prefer not to say,8,Product C,North
36-45,Other,6,Product A,East
18-25,Male,7,Product C,West
56+,Male,9,Product B,West
26-35,Male,2,Product A,West
18-25,Other,7,Product A,South
46-55,Other,4,Product A,West
36-45,Other,3,Product A,North
56+,Female,6,Product B,North
26-35,Prefer not to say,6,Product A,West
46-55,Male,10,Product C,West
46-55,Male,5,Product A,West
46-55,Other,1,Product B,North
26-35,Male,4,Product C,West
18-25,Other,7,Product C,West
46-55,Male,1,Product A,South
36-45,Other,7,Product C,South
56+,Prefer not to say,7,Product A,West
18-25,Male,6,Product C,West
56+,Female,5,Product B,East
36-45,Male,1,Product C,East
26-35,Male,6,Product B,East
46-55,Male,6,Product A,West
36-45,Prefer not to say,10,Product B,East
18-25,Prefer not to say,1,Product B,West
36-45,Other,9,Product B,West
26-35,Male,8,Product C,North
56+,Male,9,Product A,East
18-25,Male,8,Product A,South
56+,Male,6,Product B,West
56+,Other,6,Product B,South
36-45,Prefer not to say,8,Product A,South
26-35,Prefer not to say,1,Product C,North
26-35,Male,10,Product B,West
46-55,Female,2,Product C,East
46-55,Other,2,Product C,North
36-45,Other,10,Product A,South
36-45,Male,1,Product B,East
46-55,Female,1,Product C,East
46-55,Prefer not to say,1,Product A,South
56+,Male,8,Product B,West
56+,Male,5,Product A,North
56+,Prefer not to say,1,Product B,West
18-25,Male,9,Product B,South
56+,Female,8,Product A,East
56+,Prefer not to say,9,Product B,North
26-35,Other,2,Product C,East
36-45,Other,6,Product B,West
46-55,Prefer not to say,4,Product A,West
18-25,Female,10,Product A,East
36-45,Female,3,Product C,East
18-25,Prefer not to say,8,Product B,West
46-55,Other,10,Product B,South
36-45,Other,9,Product B,East
18-25,Prefer not to say,7,Product A,East
36-45,Female,1,Product A,West
26-35,Male,3,Product C,West
46-55,Other,10,Product C,East
56+,Other,4,Product C,North
18-25,Male,6,Product C,South
36-45,Female,6,Product A,North
46-55,Male,4,Product A,North
46-55,Male,4,Product C,East
46-55,Male,7,Product A,South
18-25,Other,6,Product C,South
26-35,Female,7,Product B,South
36-45,Other,6,Product A,East
56+,Prefer not to say,5,Product B,South
46-55,Female,5,Product A,East
46-55,Female,7,Product A,South
46-55,Male,7,Product C,West
46-55,Prefer not to say,2,Product C,East
18-25,Female,4,Product C,South
26-35,Male,9,Product A,North
36-45,Female,9,Product C,North
18-25,Other,4,Product B,East
56+,Other,1,Product C,North
18-25,Prefer not to say,4,Product C,South
46-55,Other,10,Product B,West
46-55,Other,4,Product B,East
26-35,Prefer not to say,9,Product A,West
18-25,Other,9,Product C,North
56+,Prefer not to say,8,Product A,West
18-25,Prefer not to say,9,Product C,West
56+,Prefer not to say,9,Product C,South
18-25,Other,2,Product A,West
46-55,Other,4,Product C,South
36-45,Male,3,Product B,East
36-45,Female,4,Product A,West
56+,Female,7,Product A,North
56+,Male,6,Product C,North
36-45,Other,9,Product B,West
18-25,Prefer not to say,6,Product A,South
46-55,Female,7,Product A,East
36-45,Prefer not to say,10,Product A,East
56+,Prefer not to say,2,Product B,East
18-25,Male,4,Product A,East
46-55,Male,5,Product A,South
18-25,Other,3,Product C,West
18-25,Female,10,Product C,East
46-55,Other,7,Product B,South
46-55,Prefer not to say,5,Product A,North
18-25,Prefer not to say,9,Product A,South
36-45,Other,2,Product B,East
56+,Prefer not to say,10,Product C,South
56+,Male,1,Product B,South
46-55,Other,7,Product C,North
36-45,Male,6,Product B,West
56+,Prefer not to say,7,Product A,East
56+,Other,9,Product A,North
46-55,Male,8,Product A,West
46-55,Other,10,Product B,North
56+,Prefer not to say,7,Product A,East
36-45,Female,9,Product A,South
36-45,Female,2,Product C,North
56+,Female,10,Product A,South
46-55,Prefer not to say,1,Product C,West
46-55,Female,9,Product C,East
26-35,Other,10,Product A,South
18-25,Prefer not to say,5,Product A,South
46-55,Male,4,Product C,West
18-25,Female,2,Product A,South
56+,Prefer not to say,4,Product C,North
18-25,Male,3,Product A,West
36-45,Prefer not to say,10,Product C,North
26-35,Other,2,Product A,North
36-45,Male,9,Product B,South
18-25,Other,6,Product B,West
36-45,Prefer not to say,1,Product A,East
18-25,Male,6,Product C,East
26-35,Male,5,Product B,North
46-55,Prefer not to say,10,Product A,West
56+,Prefer not to say,10,Product B,North
46-55,Other,7,Product B,North
46-55,Prefer not to say,7,Product A,West
36-45,Other,3,Product C,East
18-25,Other,5,Product B,South
56+,Female,3,Product B,East
18-25,Male,7,Product B,East
18-25,Prefer not to say,3,Product C,West
56+,Male,7,Product B,East
26-35,Prefer not to say,6,Product C,East
26-35,Female,3,Product C,North
18-25,Male,1,Product C,East
46-55,Male,5,Product C,West
18-25,Prefer not to say,1,Product B,South
26-35,Prefer not to say,9,Product B,West
18-25,Other,3,Product A,West
46-55,Other,3,Product C,East
18-25,Female,5,Product C,East
36-45,Female,7,Product C,North
18-25,Other,5,Product B,West
26-35,Female,9,Product C,East
26-35,Other,10,Product B,South
18-25,Prefer not to say,8,Product B,East
18-25,Male,5,Product A,East
36-45,Female,8,Product B,South
36-45,Prefer not to say,10,Product B,East
46-55,Prefer not to say,3,Product C,South
46-55,Male,5,Product C,South
36-45,Male,10,Product B,North
26-35,Prefer not to say,9,Product B,East
18-25,Other,1,Product A,East
26-35,Other,3,Product B,West
46-55,Other,2,Product C,North
46-55,Other,5,Product C,West
26-35,Female,4,Product A,West
18-25,Male,8,Product A,East
46-55,Female,9,Product B,East
26-35,Male,1,Product B,North

</script><script type="text/plain" id="stockReturns" data-format="csv_embedded" data-src="">
Symbol,Date,Return
RTX,2023-01-01,10.01
RTX,2023-01-02,-10.005
RTX,2023-01-03,-0.5
GOOG,2023-01-01,1.0
GOOG,2023-01-02,0.01
GOOG,2023-01-03,-0.003
MSFT,2023-01-01,0.008
MSFT,2023-01-02,0.004
MSFT,2023-01-03,-0.002

</script><script type="text/plain" id="correlations" data-format="csv_embedded" data-src="">
Symbol1,Symbol2,Correlation
RTX,GOOG,-0.85
RTX,MSFT,-0.75
GOOG,MSFT,0.8
RTX,RTX,1.0
GOOG,GOOG,1.0
MSFT,MSFT,1.0
GOOG,RTX,-0.85
MSFT,RTX,-0.75
MSFT,GOOG,0.8

</script><script type="text/plain" id="sales_data" data-format="csv_embedded" data-src="">
Region,Month,Product,Sales,Units
North,Jan,Gadget,32570,175
North,Feb,Gizmo,44989,75
North,Mar,Gizmo,33344,55
North,Apr,Gizmo,26765,129
North,May,Gadget,10427,132
North,Jun,Widget,48182,62
North,Jul,Gizmo,39675,159
North,Aug,Gizmo,13343,165
North,Sep,Widget,31578,191
North,Oct,Gadget,31538,116
North,Nov,Gizmo,37816,59
North,Dec,Gizmo,17190,122
South,Jan,Gadget,21046,94
South,Feb,Gizmo,12306,103
South,Mar,Widget,48598,200
South,Apr,Gizmo,25600,80
South,May,Gadget,19311,161
South,Jun,Widget,14823,186
South,Jul,Gizmo,41002,126
South,Aug,Widget,12197,185
South,Sep,Gizmo,14191,64
South,Oct,Widget,29701,183
South,Nov,Widget,18915,117
South,Dec,Gadget,17241,162
East,Jan,Widget,18855,143
East,Feb,Widget,17094,83
East,Mar,Widget,32737,54
East,Apr,Gadget,45588,161
East,May,Gadget,28439,199
East,Jun,Gadget,13477,112
East,Jul,Gizmo,21517,152
East,Aug,Gizmo,20731,175
East,Sep,Gizmo,27416,117
East,Oct,Widget,33183,66
East,Nov,Gadget,47756,104
East,Dec,Gizmo,25618,149
West,Jan,Gadget,42618,169
West,Feb,Gadget,23712,147
West,Mar,Widget,48663,171
West,Apr,Widget,45875,87
West,May,Widget,20750,187
West,Jun,Widget,47461,57
West,Jul,Gizmo,18689,54
West,Aug,Gadget,31085,119
West,Sep,Gizmo,10181,54
West,Oct,Widget,18691,163
West,Nov,Gadget,36071,86
West,Dec,Widget,20790,90

</script><script type="text/plain" id="transaction_data" data-format="csv_embedded" data-src="">
Transaction_Type,Customer_Type,Payment_Method,Store,Amount
Exchange,New,Credit Card,Store 1,479
Cancel,VIP,Bank Transfer,Store 2,81
Exchange,VIP,PayPal,Store 3,169
Refund,Returning,Bank Transfer,Store 3,56
Purchase,Returning,PayPal,Store 1,423
Exchange,VIP,PayPal,Store 3,228
Refund,VIP,Cash,Store 3,494
Cancel,VIP,Cash,Store 1,161
Cancel,New,PayPal,Store 1,216
Refund,VIP,Cash,Store 2,248
Exchange,Returning,Cash,Store 3,199
Refund,New,PayPal,Store 1,230
Exchange,VIP,Bank Transfer,Store 3,190
Refund,Returning,Bank Transfer,Store 3,174
Cancel,New,Bank Transfer,Store 1,225
Exchange,Returning,PayPal,Store 1,245
Purchase,Returning,PayPal,Store 1,481
Purchase,VIP,Bank Transfer,Store 3,313
Purchase,VIP,Credit Card,Store 2,98
Purchase,Returning,Bank Transfer,Store 3,369
Cancel,Returning,Credit Card,Store 3,241
Exchange,Returning,PayPal,Store 3,231
Purchase,VIP,Credit Card,Store 3,182
Refund,New,Cash,Store 3,393
Exchange,Returning,Bank Transfer,Store 2,334
Cancel,New,Credit Card,Store 2,110
Cancel,VIP,Cash,Store 3,411
Cancel,Returning,Cash,Store 3,320
Refund,VIP,PayPal,Store 3,134
Cancel,New,Bank Transfer,Store 1,82
Refund,New,Cash,Store 3,402
Refund,VIP,PayPal,Store 2,415
Cancel,VIP,Bank Transfer,Store 3,477
Cancel,Returning,PayPal,Store 2,90
Refund,Returning,PayPal,Store 3,138
Purchase,New,Bank Transfer,Store 1,341
Cancel,VIP,Cash,Store 1,397
Cancel,Returning,PayPal,Store 1,145
Purchase,New,Credit Card,Store 2,402
Cancel,New,PayPal,Store 1,329
Exchange,VIP,Credit Card,Store 3,466
Exchange,VIP,PayPal,Store 1,231
Purchase,New,Bank Transfer,Store 2,309
Refund,VIP,Bank Transfer,Store 1,143
Exchange,New,Credit Card,Store 3,320
Cancel,Returning,Bank Transfer,Store 3,456
Refund,Returning,PayPal,Store 2,343
Purchase,VIP,PayPal,Store 3,231
Refund,New,PayPal,Store 3,479
Purchase,Returning,PayPal,Store 2,51
Refund,VIP,Bank Transfer,Store 2,498
Refund,VIP,PayPal,Store 1,186
Purchase,New,PayPal,Store 3,197
Purchase,VIP,Cash,Store 1,286
Purchase,New,Cash,Store 3,150
Exchange,New,Cash,Store 2,261
Exchange,Returning,PayPal,Store 2,406
Cancel,New,Cash,Store 1,36
Cancel,New,Bank Transfer,Store 1,146
Cancel,VIP,PayPal,Store 2,48
Purchase,Returning,Cash,Store 3,442
Purchase,VIP,Bank Transfer,Store 3,133
Exchange,New,Bank Transfer,Store 2,415
Refund,New,PayPal,Store 1,126
Cancel,Returning,Credit Card,Store 3,162
Cancel,VIP,PayPal,Store 2,124
Refund,New,Credit Card,Store 2,235
Exchange,Returning,Bank Transfer,Store 1,154
Cancel,VIP,Credit Card,Store 2,433
Refund,New,Bank Transfer,Store 2,169
Purchase,Returning,PayPal,Store 1,37
Exchange,New,Cash,Store 2,69
Cancel,VIP,Credit Card,Store 1,145
Cancel,Returning,PayPal,Store 2,470
Exchange,Returning,Bank Transfer,Store 1,168
Refund,New,Bank Transfer,Store 3,84
Refund,New,Bank Transfer,Store 1,177
Refund,New,Bank Transfer,Store 2,268
Refund,VIP,Credit Card,Store 1,222
Cancel,New,Cash,Store 3,202
Cancel,Returning,Bank Transfer,Store 3,177
Purchase,VIP,PayPal,Store 3,474
Refund,VIP,Credit Card,Store 2,457
Exchange,VIP,PayPal,Store 1,287
Refund,New,Bank Transfer,Store 2,81
Purchase,New,Bank Transfer,Store 1,191
Exchange,New,PayPal,Store 1,366
Purchase,VIP,Bank Transfer,Store 1,131
Refund,VIP,Cash,Store 2,290
Refund,New,Bank Transfer,Store 1,145
Cancel,VIP,PayPal,Store 1,472
Refund,VIP,Credit Card,Store 2,219
Cancel,Returning,Cash,Store 2,285
Cancel,New,Bank Transfer,Store 3,355
Cancel,VIP,Cash,Store 3,344
Refund,Returning,Credit Card,Store 3,270
Cancel,New,PayPal,Store 3,138
Cancel,New,Cash,Store 1,269
Exchange,New,Bank Transfer,Store 2,368
Refund,Returning,Credit Card,Store 3,396
Cancel,New,PayPal,Store 3,30
Refund,New,Credit Card,Store 3,385
Refund,VIP,Cash,Store 1,473
Purchase,Returning,Cash,Store 3,258
Exchange,New,Credit Card,Store 1,304
Cancel,New,Credit Card,Store 2,189
Exchange,Returning,PayPal,Store 1,71
Purchase,VIP,Credit Card,Store 2,384
Refund,VIP,Cash,Store 1,166
Refund,Returning,Cash,Store 3,391
Exchange,New,PayPal,Store 1,262
Purchase,VIP,PayPal,Store 1,108
Cancel,Returning,Cash,Store 3,136
Refund,VIP,Bank Transfer,Store 2,130
Refund,New,Credit Card,Store 1,349
Exchange,VIP,Bank Transfer,Store 3,364
Purchase,Returning,Credit Card,Store 2,294
Purchase,Returning,Bank Transfer,Store 3,306
Cancel,VIP,Bank Transfer,Store 3,144
Cancel,Returning,Cash,Store 3,438
Refund,VIP,PayPal,Store 1,238
Cancel,Returning,PayPal,Store 1,126
Exchange,VIP,Credit Card,Store 3,226
Refund,New,PayPal,Store 2,114
Exchange,New,Credit Card,Store 1,403
Cancel,Returning,Bank Transfer,Store 3,327
Cancel,Returning,Cash,Store 2,417
Exchange,New,Bank Transfer,Store 2,492
Exchange,New,Cash,Store 2,301
Exchange,Returning,Cash,Store 2,443
Refund,Returning,Credit Card,Store 3,217
Exchange,VIP,Bank Transfer,Store 2,415
Cancel,VIP,Bank Transfer,Store 2,226
Purchase,New,Credit Card,Store 3,241
Cancel,VIP,PayPal,Store 3,125
Cancel,VIP,PayPal,Store 1,198
Cancel,New,PayPal,Store 2,27
Purchase,New,Bank Transfer,Store 3,497
Cancel,New,Bank Transfer,Store 3,171
Cancel,New,Cash,Store 2,228
Exchange,VIP,Credit Card,Store 2,211
Cancel,Returning,PayPal,Store 1,194
Exchange,New,PayPal,Store 3,391
Refund,New,Credit Card,Store 3,228
Exchange,Returning,PayPal,Store 3,246
Purchase,Returning,Credit Card,Store 3,61
Exchange,Returning,Cash,Store 3,306
Purchase,VIP,Bank Transfer,Store 1,417
Purchase,New,Bank Transfer,Store 2,68
Cancel,Returning,Bank Transfer,Store 2,100
Refund,VIP,Credit Card,Store 2,173
Exchange,New,PayPal,Store 2,489
Exchange,VIP,Bank Transfer,Store 3,337
Exchange,Returning,Credit Card,Store 1,60
Purchase,VIP,Credit Card,Store 2,366
Purchase,VIP,PayPal,Store 2,90
Exchange,New,PayPal,Store 1,441
Cancel,VIP,Credit Card,Store 2,98
Exchange,New,Bank Transfer,Store 3,101
Exchange,Returning,PayPal,Store 1,402
Cancel,New,Credit Card,Store 1,484
Refund,Returning,PayPal,Store 1,158
Purchase,New,Bank Transfer,Store 1,442
Exchange,VIP,Credit Card,Store 2,307
Refund,Returning,PayPal,Store 1,315
Refund,New,Credit Card,Store 1,295
Purchase,Returning,Credit Card,Store 2,487
Purchase,Returning,Bank Transfer,Store 1,290
Refund,Returning,Credit Card,Store 3,495
Exchange,VIP,Bank Transfer,Store 2,107
Cancel,VIP,PayPal,Store 2,218
Cancel,VIP,PayPal,Store 2,452
Cancel,New,PayPal,Store 2,93
Cancel,Returning,Bank Transfer,Store 2,484
Cancel,VIP,PayPal,Store 1,135
Refund,Returning,Bank Transfer,Store 2,146
Exchange,Returning,Credit Card,Store 1,272
Purchase,VIP,Credit Card,Store 3,313
Exchange,VIP,Credit Card,Store 3,467
Cancel,VIP,Bank Transfer,Store 1,266
Purchase,Returning,Cash,Store 2,159
Refund,Returning,PayPal,Store 3,190
Purchase,New,PayPal,Store 2,203
Exchange,VIP,PayPal,Store 2,463
Exchange,New,PayPal,Store 1,96
Exchange,VIP,Credit Card,Store 3,139
Cancel,New,Bank Transfer,Store 3,449
Exchange,New,Credit Card,Store 3,309
Cancel,Returning,Cash,Store 1,213
Purchase,New,PayPal,Store 1,484
Exchange,New,Cash,Store 3,358
Exchange,New,Credit Card,Store 1,461
Refund,New,Bank Transfer,Store 3,101
Cancel,VIP,Cash,Store 3,270
Cancel,VIP,Cash,Store 2,311
Refund,VIP,PayPal,Store 2,259
Refund,Returning,Cash,Store 3,151
Refund,VIP,PayPal,Store 3,69
Refund,Returning,Bank Transfer,Store 3,313
Purchase,VIP,Cash,Store 3,266
Exchange,VIP,Bank Transfer,Store 1,188
Purchase,VIP,Credit Card,Store 1,18
Exchange,Returning,Bank Transfer,Store 2,376
Purchase,New,Credit Card,Store 2,284
Purchase,New,Bank Transfer,Store 1,120
Exchange,Returning,PayPal,Store 2,157
Exchange,VIP,PayPal,Store 2,358
Exchange,New,PayPal,Store 2,443
Exchange,New,PayPal,Store 3,341
Cancel,VIP,Cash,Store 1,56
Refund,Returning,Cash,Store 3,255
Exchange,VIP,Cash,Store 2,360
Purchase,Returning,Bank Transfer,Store 3,211
Refund,VIP,Bank Transfer,Store 2,434
Purchase,Returning,Bank Transfer,Store 2,182
Refund,VIP,PayPal,Store 1,53
Cancel,Returning,Cash,Store 2,182
Purchase,Returning,Credit Card,Store 2,225
Exchange,Returning,Cash,Store 3,473
Refund,VIP,Bank Transfer,Store 1,431
Cancel,VIP,PayPal,Store 2,218
Cancel,Returning,PayPal,Store 3,52
Purchase,New,Credit Card,Store 2,182
Purchase,New,Cash,Store 3,450
Exchange,VIP,Credit Card,Store 1,399
Purchase,New,Credit Card,Store 3,256
Exchange,Returning,Bank Transfer,Store 1,266
Purchase,Returning,Credit Card,Store 2,300
Cancel,Returning,Credit Card,Store 3,359
Exchange,VIP,Bank Transfer,Store 1,371
Cancel,Returning,PayPal,Store 1,447
Exchange,VIP,PayPal,Store 1,297
Purchase,Returning,Credit Card,Store 2,202
Purchase,VIP,PayPal,Store 2,445
Purchase,Returning,PayPal,Store 1,258
Exchange,Returning,Credit Card,Store 1,358
Cancel,New,Credit Card,Store 2,308
Purchase,VIP,Bank Transfer,Store 3,316
Purchase,New,Credit Card,Store 1,375
Refund,VIP,Bank Transfer,Store 1,338
Exchange,VIP,Credit Card,Store 3,138
Cancel,New,Credit Card,Store 2,175
Purchase,Returning,Bank Transfer,Store 3,464
Refund,Returning,Credit Card,Store 1,498
Cancel,New,Bank Transfer,Store 1,431
Cancel,Returning,PayPal,Store 1,133
Refund,Returning,PayPal,Store 3,263
Refund,New,Credit Card,Store 1,92
Refund,New,Bank Transfer,Store 2,15
Cancel,New,Bank Transfer,Store 1,280
Refund,VIP,Bank Transfer,Store 2,229
Purchase,New,Bank Transfer,Store 2,101
Refund,VIP,PayPal,Store 1,128
Cancel,Returning,Credit Card,Store 3,158
Exchange,New,PayPal,Store 3,272
Exchange,New,Cash,Store 3,299
Exchange,Returning,Bank Transfer,Store 2,114
Exchange,Returning,PayPal,Store 1,331
Purchase,Returning,Cash,Store 2,199
Cancel,VIP,Cash,Store 1,61
Exchange,New,Credit Card,Store 1,226
Purchase,Returning,PayPal,Store 2,364
Exchange,VIP,Credit Card,Store 3,461
Cancel,New,PayPal,Store 2,205
Exchange,VIP,PayPal,Store 2,338
Exchange,New,Bank Transfer,Store 2,142
Refund,New,Credit Card,Store 2,161
Refund,VIP,Cash,Store 1,391
Purchase,Returning,Credit Card,Store 1,409
Cancel,VIP,Cash,Store 1,331
Cancel,New,Cash,Store 1,24
Exchange,VIP,PayPal,Store 2,259
Exchange,VIP,Cash,Store 1,455
Cancel,Returning,Cash,Store 2,76
Purchase,VIP,Credit Card,Store 1,325
Purchase,New,Cash,Store 2,319
Exchange,VIP,PayPal,Store 2,252
Refund,VIP,Cash,Store 2,143
Cancel,Returning,Credit Card,Store 3,294
Purchase,Returning,Bank Transfer,Store 3,295
Cancel,VIP,Cash,Store 1,145
Refund,VIP,Cash,Store 1,360
Exchange,VIP,Credit Card,Store 1,84
Exchange,Returning,Cash,Store 1,259
Exchange,Returning,Credit Card,Store 1,392
Cancel,Returning,Bank Transfer,Store 2,467
Refund,Returning,PayPal,Store 2,200
Purchase,New,Cash,Store 1,58
Exchange,New,PayPal,Store 2,40
Exchange,Returning,PayPal,Store 2,13
Exchange,Returning,Credit Card,Store 2,59
Purchase,VIP,PayPal,Store 3,164
Purchase,Returning,Bank Transfer,Store 1,489
Refund,New,PayPal,Store 1,35
Purchase,Returning,PayPal,Store 3,266
Cancel,New,Bank Transfer,Store 1,214
Cancel,New,PayPal,Store 3,326
Exchange,New,Bank Transfer,Store 3,387
Exchange,New,Cash,Store 1,347
Exchange,VIP,Bank Transfer,Store 1,72
Purchase,New,Credit Card,Store 2,26
Refund,New,PayPal,Store 1,49
Purchase,Returning,Cash,Store 3,62
Cancel,VIP,PayPal,Store 2,456
Cancel,Returning,Credit Card,Store 2,58
Refund,New,Bank Transfer,Store 2,392
Cancel,Returning,PayPal,Store 3,178
Purchase,Returning,Cash,Store 1,414
Cancel,Returning,Cash,Store 1,367
Refund,VIP,Bank Transfer,Store 3,132
Exchange,New,Bank Transfer,Store 1,160
Purchase,Returning,Cash,Store 1,112
Refund,VIP,Bank Transfer,Store 2,240
Cancel,VIP,Bank Transfer,Store 3,23
Refund,Returning,Cash,Store 3,462
Refund,New,PayPal,Store 1,410
Refund,VIP,Credit Card,Store 3,485
Refund,Returning,Credit Card,Store 3,231
Refund,Returning,Credit Card,Store 1,94
Cancel,Returning,Credit Card,Store 2,156
Cancel,VIP,Cash,Store 3,165
Exchange,Returning,Cash,Store 3,228
Exchange,VIP,Cash,Store 1,23
Refund,VIP,PayPal,Store 2,93
Purchase,VIP,PayPal,Store 3,495
Purchase,Returning,Bank Transfer,Store 2,297
Exchange,Returning,Credit Card,Store 1,454
Purchase,New,Cash,Store 2,397
Purchase,New,Credit Card,Store 1,457
Refund,Returning,Cash,Store 2,300
Refund,Returning,Bank Transfer,Store 3,155
Exchange,New,Cash,Store 2,438
Exchange,New,PayPal,Store 1,127
Purchase,VIP,Credit Card,Store 1,302
Purchase,VIP,Cash,Store 2,60
Refund,VIP,Credit Card,Store 1,367
Exchange,New,Cash,Store 2,115
Cancel,VIP,Cash,Store 1,435
Cancel,VIP,Credit Card,Store 3,295
Cancel,New,Bank Transfer,Store 1,415
Purchase,VIP,Credit Card,Store 2,414
Refund,New,Cash,Store 3,276
Exchange,New,Credit Card,Store 2,369
Purchase,New,Credit Card,Store 1,241
Exchange,VIP,Credit Card,Store 1,136
Refund,VIP,Credit Card,Store 3,308
Purchase,VIP,PayPal,Store 3,103
Refund,New,PayPal,Store 1,193
Purchase,VIP,PayPal,Store 1,116
Refund,Returning,PayPal,Store 1,109
Purchase,Returning,Credit Card,Store 3,156
Refund,New,PayPal,Store 2,16
Cancel,New,Cash,Store 3,310
Purchase,New,Cash,Store 3,323
Refund,Returning,PayPal,Store 1,131
Purchase,New,Credit Card,Store 1,71
Exchange,Returning,Cash,Store 3,19
Purchase,VIP,Cash,Store 2,178
Exchange,VIP,Credit Card,Store 2,383
Cancel,VIP,PayPal,Store 1,467
Exchange,VIP,Cash,Store 2,97
Purchase,New,Credit Card,Store 3,321
Exchange,VIP,Credit Card,Store 2,52
Refund,New,Credit Card,Store 2,136
Refund,VIP,Bank Transfer,Store 2,428
Exchange,Returning,PayPal,Store 1,336
Cancel,VIP,PayPal,Store 1,60
Cancel,New,PayPal,Store 3,146
Cancel,Returning,PayPal,Store 2,11
Purchase,VIP,Bank Transfer,Store 2,452
Cancel,VIP,PayPal,Store 3,272
Exchange,Returning,Credit Card,Store 1,164
Exchange,New,Cash,Store 3,155
Purchase,Returning,Bank Transfer,Store 2,442
Refund,New,Cash,Store 3,221
Cancel,VIP,PayPal,Store 2,222
Refund,Returning,Bank Transfer,Store 2,351
Purchase,Returning,PayPal,Store 1,198
Purchase,Returning,PayPal,Store 2,134
Cancel,Returning,Credit Card,Store 3,460
Refund,VIP,Cash,Store 3,323
Exchange,Returning,Cash,Store 2,128
Cancel,Returning,Credit Card,Store 1,466
Refund,Returning,PayPal,Store 2,264
Refund,Returning,Bank Transfer,Store 1,189
Refund,VIP,Credit Card,Store 3,240
Cancel,VIP,Cash,Store 2,130
Exchange,VIP,PayPal,Store 1,418
Cancel,New,Cash,Store 3,462
Purchase,Returning,Credit Card,Store 3,419
Refund,Returning,Cash,Store 3,491
Cancel,Returning,PayPal,Store 2,472
Purchase,Returning,Cash,Store 2,472
Refund,New,Bank Transfer,Store 1,398
Cancel,Returning,Bank Transfer,Store 3,481
Purchase,New,PayPal,Store 3,391
Exchange,VIP,Cash,Store 1,25
Refund,VIP,PayPal,Store 3,126
Exchange,New,Cash,Store 3,145
Exchange,Returning,Cash,Store 3,496
Cancel,Returning,Credit Card,Store 2,296
Exchange,Returning,PayPal,Store 2,344
Purchase,New,Bank Transfer,Store 2,18
Exchange,New,Credit Card,Store 2,428
Exchange,New,Bank Transfer,Store 3,288
Cancel,New,PayPal,Store 2,219
Cancel,Returning,PayPal,Store 1,122
Cancel,New,Credit Card,Store 1,160
Cancel,Returning,PayPal,Store 1,117
Cancel,New,Cash,Store 1,439
Cancel,Returning,PayPal,Store 2,99
Purchase,VIP,Cash,Store 2,158
Exchange,New,Credit Card,Store 2,95
Refund,New,Cash,Store 2,126
Cancel,New,Bank Transfer,Store 1,84
Cancel,New,Credit Card,Store 1,78
Purchase,New,Cash,Store 1,435
Refund,New,Cash,Store 3,257
Cancel,VIP,PayPal,Store 3,136
Exchange,Returning,Credit Card,Store 3,181
Cancel,New,Cash,Store 2,289
Exchange,Returning,PayPal,Store 3,401
Purchase,New,Credit Card,Store 3,396
Refund,VIP,Credit Card,Store 1,404
Cancel,New,PayPal,Store 1,479
Exchange,Returning,PayPal,Store 2,356
Cancel,New,Bank Transfer,Store 1,474
Cancel,VIP,Cash,Store 3,200
Exchange,VIP,Credit Card,Store 2,267
Cancel,VIP,Credit Card,Store 1,144
Purchase,Returning,PayPal,Store 2,11
Exchange,Returning,Credit Card,Store 1,349
Cancel,Returning,Cash,Store 1,139
Exchange,New,PayPal,Store 1,37
Refund,New,Cash,Store 2,335
Purchase,New,Credit Card,Store 3,90
Refund,New,Bank Transfer,Store 1,49
Exchange,Returning,Bank Transfer,Store 3,159
Purchase,Returning,Credit Card,Store 3,102
Refund,VIP,PayPal,Store 3,316
Refund,VIP,PayPal,Store 2,187
Cancel,New,Cash,Store 2,371
Cancel,New,Cash,Store 3,188
Exchange,New,Bank Transfer,Store 2,137
Exchange,New,Bank Transfer,Store 3,401
Exchange,Returning,Bank Transfer,Store 2,383
Purchase,Returning,Cash,Store 1,274
Cancel,VIP,PayPal,Store 2,469
Purchase,VIP,Credit Card,Store 3,59
Purchase,VIP,PayPal,Store 1,92
Cancel,VIP,Bank Transfer,Store 3,273
Purchase,Returning,Bank Transfer,Store 2,70
Refund,VIP,Cash,Store 2,232
Refund,New,Bank Transfer,Store 2,378
Exchange,Returning,Bank Transfer,Store 3,219
Exchange,VIP,Credit Card,Store 1,300
Cancel,Returning,PayPal,Store 3,35
Purchase,New,PayPal,Store 3,307
Cancel,Returning,PayPal,Store 1,89
Cancel,New,Bank Transfer,Store 3,260
Cancel,New,Cash,Store 2,426
Purchase,Returning,PayPal,Store 3,292
Purchase,VIP,PayPal,Store 2,86
Cancel,Returning,Cash,Store 3,362
Cancel,New,Credit Card,Store 3,69
Cancel,Returning,Bank Transfer,Store 2,133
Purchase,Returning,Cash,Store 2,499
Purchase,New,Credit Card,Store 3,42
Exchange,VIP,Bank Transfer,Store 3,238
Cancel,New,Bank Transfer,Store 2,442
Purchase,VIP,Cash,Store 3,120
Purchase,New,Bank Transfer,Store 3,210
Refund,Returning,Bank Transfer,Store 2,304
Cancel,VIP,Credit Card,Store 3,94
Refund,New,PayPal,Store 3,377
Refund,New,Cash,Store 2,296
Exchange,VIP,Bank Transfer,Store 2,136
Refund,Returning,PayPal,Store 2,137
Exchange,Returning,Bank Transfer,Store 2,441
Purchase,VIP,PayPal,Store 2,28
Refund,New,Credit Card,Store 3,471
Purchase,New,Cash,Store 1,175
Cancel,VIP,Credit Card,Store 3,47
Purchase,VIP,Bank Transfer,Store 2,312
Cancel,Returning,PayPal,Store 2,311
Refund,New,Credit Card,Store 2,50
Cancel,VIP,Credit Card,Store 2,328
Refund,VIP,Bank Transfer,Store 1,370
Exchange,Returning,Bank Transfer,Store 1,30
Cancel,Returning,Bank Transfer,Store 3,494
Cancel,New,Bank Transfer,Store 2,93
Cancel,VIP,Cash,Store 2,197
Exchange,Returning,PayPal,Store 3,393
Exchange,Returning,Cash,Store 3,152
Cancel,Returning,PayPal,Store 3,170
Exchange,New,Bank Transfer,Store 2,116
Exchange,VIP,Credit Card,Store 3,209
Refund,New,Credit Card,Store 3,96
Exchange,New,Cash,Store 1,142
Cancel,New,Cash,Store 3,266

</script><script type="text/plain" id="subframe" data-format="csv_embedded" data-src="">
x,y,group,z
1,1,A,0.15594369476537437
2,1,A,-0.6172728764571667
3,1,A,-0.9997860728793259
4,1,A,-0.5557653904191477
5,1,A,0.37706981246168597
6,1,A,0.9799824974549554
1,2,A,-0.6172728764571667
2,2,A,-0.9513631281258474
3,2,A,-0.894288058558276
4,2,A,-0.2379483919805909
5,2,A,0.6231593449762197
6,2,A,0.9991443830469295
1,3,A,-0.9997860728793259
2,3,A,-0.894288058558276
3,3,A,-0.4526618572923528
4,3,A,0.28366218546322625
5,3,A,0.8994733999984659
6,3,A,0.9110310531896002
1,4,A,-0.5557653904191477
2,4,A,-0.2379483919805909
3,4,A,0.28366218546322625
4,4,A,0.8101836031147954
5,4,A,0.9928159447966954
6,4,A,0.5995022633598608
1,5,A,0.37706981246168597
2,5,A,0.6231593449762197
3,5,A,0.8994733999984659
4,5,A,0.9928159447966954
5,5,A,0.7053479063084421
6,5,A,0.04371801995456107
1,6,A,0.9799824974549554
2,6,A,0.9991443830469295
3,6,A,0.9110310531896002
4,6,A,0.5995022633598608
5,6,A,0.04371801995456107
6,6,A,-0.5901944859052752
1,1,B,-0.8440563052346256
2,1,B,-1.6172728764571667
3,1,B,-1.999786072879326
4,1,B,-1.5557653904191477
5,1,B,-0.622930187538314
6,1,B,-0.02001750254504464
1,2,B,-1.1605565385746905
2,2,B,-1.769905729749893
3,2,B,-1.9847209431240276
4,2,B,-1.4526618572923529
5,2,B,-0.5348859483071466
6,2,B,-0.007045023716309329
1,3,B,-1.4161468365471424
2,3,B,-1.8795687341082288
3,3,B,-1.9484431958418278
4,3,B,-1.346174157871352
5,3,B,-0.45271768395849554
6,3,B,-0.0007290466739067192
1,4,B,-1.6172728764571667
2,4,B,-1.9513631281258474
3,4,B,-1.894288058558276
4,4,B,-1.237948391980591
5,4,B,-0.3768406550237803
6,4,B,-0.0008556169530704594
1,5,B,-1.769905729749893
2,5,B,-1.9899924966004454
3,5,B,-1.8252990620752587
4,5,B,-1.1294490013073428
5,5,B,-0.3075808884062521
6,5,B,-0.007184055203304562
1,6,B,-1.8795687341082288
2,6,B,-1.999786072879326
3,6,B,-1.7442462713722906
4,6,B,-1.021971452410018
5,6,B,-0.24518280412638171
6,6,B,-0.019450682346141668
1,1,C,1.1559436947653743
2,1,C,0.38272712354283334
3,1,C,0.00021392712067414
4,1,C,0.44423460958085226
5,1,C,1.377069812461686
6,1,C,1.9799824974549554
1,2,C,1.0170215307092125
2,2,C,0.3139470657369108
3,2,C,0.0036540443554032853
4,2,C,0.48641743614550437
5,2,C,1.4142212387971869
6,2,C,1.986175939144255
1,3,C,0.9179968609607547
2,3,C,0.2665566278409074
3,3,C,0.009016517099134758
4,3,C,0.519307022323508
5,3,C,1.4420795294939195
6,3,C,1.990140036061585
1,4,C,0.8394434614253095
2,4,C,0.2300942702501071
3,4,C,0.015279056875972419
4,4,C,0.5473381427076471
5,4,C,1.4651140516928534
6,4,C,1.9929549762836907
1,5,C,0.7738620277177296
2,5,C,0.20052801164655532
3,5,C,0.022059190682766516
4,5,C,0.5722355793970464
5,5,C,1.485058145415328
6,5,C,1.9950387168674295
1,6,C,0.7174188421724267
2,6,C,0.17579990271593138
3,6,C,0.02916737260633384
4,6,C,0.5948873339246776
5,6,C,1.502801829878708
6,6,C,1.9966053897707945
1,1,D,0.0
2,1,D,0.41421356237309515
3,1,D,0.7320508075688772
4,1,D,1.0
5,1,D,1.2360679774997898
6,1,D,1.4494897427831779
1,2,D,-0.41421356237309515
2,2,D,0.0
3,2,D,0.31783724519578205
4,2,D,0.5857864376269049
5,2,D,0.8218544151266947
6,2,D,1.0352761804100827
1,3,D,-0.7320508075688772
2,3,D,-0.31783724519578205
3,3,D,0.0
4,3,D,0.2679491924311228
5,3,D,0.5040171699309126
6,3,D,0.7174389352143007
1,4,D,-1.0
2,4,D,-0.5857864376269049
3,4,D,-0.2679491924311228
4,4,D,0.0
5,4,D,0.2360679774997898
6,4,D,0.4494897427831779
1,5,D,-1.2360679774997898
2,5,D,-0.8218544151266947
3,5,D,-0.5040171699309126
4,5,D,-0.2360679774997898
5,5,D,0.0
6,5,D,0.21342176528338808
1,6,D,-1.4494897427831779
2,6,D,-1.0352761804100827
3,6,D,-0.7174389352143007
4,6,D,-0.4494897427831779
5,6,D,-0.21342176528338808
6,6,D,0.0

</script><script type="text/plain" id="df_combined" data-format="csv_embedded" data-src="">
date,x,y,color,categ,categ22
2024-01-01,1,0.7864734258546547,A,B,Category_A
2024-01-02,2,0.16342627676961985,B,B,Category_A
2024-01-03,3,0.5758836856752605,A,B,Category_A
2024-01-04,4,0.5456231253840658,B,B,Category_A
2024-01-05,5,0.2971281004665256,A,B,Category_A
2024-01-06,6,0.979407141277703,B,A,Category_A
2024-01-07,7,0.6173673284342991,A,A,Category_A
2024-01-08,8,0.5754961761023225,B,A,Category_A
2024-01-09,9,0.8485219734773457,A,A,Category_A
2024-01-10,10,0.4457200632756906,B,C,Category_A
2024-01-01,1,0.15900219417700578,A,A,Category_B
2024-01-02,2,0.16672709834893373,B,A,Category_B
2024-01-03,3,0.9190062287911912,A,A,Category_B
2024-01-04,4,0.545303296545283,B,A,Category_B
2024-01-05,5,0.7077722034548926,A,A,Category_B
2024-01-06,6,0.08520408734188945,B,B,Category_B
2024-01-07,7,0.8106337132874764,A,B,Category_B
2024-01-08,8,0.39682557224449566,B,B,Category_B
2024-01-09,9,0.7162086425119806,A,B,Category_B
2024-01-10,10,0.26015769480154105,B,C,Category_B

</script>

<!-- ACTUAL CONTENT -->

<h1></h1>
<p></p>

    <div class="textblock-content">
        <h1>PivotTable Examples</h1>
<p>This page demonstrates the key features of interactive PivotTable plots in JSPlots.</p>
<ul>
    <li><strong>Basic pivot:</strong> Simple data aggregation with drag-and-drop</li>
    <li><strong>Custom heatmaps:</strong> Color-coded matrices with custom color scales</li>
    <li><strong>Different renderers:</strong> Table, Bar Chart, Line Chart, and more</li>
    <li><strong>Data filtering:</strong> Inclusions and exclusions to focus on specific data</li>
    <li><strong>Aggregations:</strong> Sum, Average, Count, and other aggregation functions</li>
    <li><strong>Combined with other plots:</strong> Mix PivotTables with LineCharts and 3D plots</li>
</ul>
<p><em>Tip: Drag and drop fields between Rows, Columns, and Values to reorganize!</em></p>

    </div>
<br>
<hr>
<br>
    <h2>sales_pivot</h2>
    <p>Basic pivot table - drag fields to reorganize rows and columns</p>
    <div id="sales_pivot"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: sales_data</p><br>
<hr>
<br>
    <h2>performance_heatmap</h2>
    <p>Custom color scale heatmap - green indicates good performance, red needs improvement</p>
    <div id="performance_heatmap"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: performance_data</p><br>
<hr>
<br>
    <h2>revenue_by_category</h2>
    <p>Bar chart renderer - switch renderer in the dropdown to see other visualizations</p>
    <div id="revenue_by_category"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: product_data</p><br>
<hr>
<br>
    <h2>customer_revenue</h2>
    <p>Exclusions feature - 'Test' country data is automatically filtered out</p>
    <div id="customer_revenue"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: customer_data</p><br>
<hr>
<br>
    <h2>survey_results</h2>
    <p>Inclusions feature - only showing ages 18-45, filtering out older demographics</p>
    <div id="survey_results"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: survey_data</p><br>
<hr>
<br>
    <h2>transaction_analysis</h2>
    <p>Count aggregation - showing transaction counts rather than sums or averages</p>
    <div id="transaction_analysis"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: transaction_data</p><br>
<hr>
<br>
    <h2>Returns_Over_Last_Few_Days</h2>
    <p>Stock returns heatmap with MSFT excluded</p>
    <div id="Returns_Over_Last_Few_Days"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: stockReturns</p><br>
<hr>
<br>
    <h2>Correlation_Matrix</h2>
    <p>Correlation matrix with custom red-white-blue color scale</p>
    <div id="Correlation_Matrix"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: correlations</p><br>
<hr>
<br>
<h2>Line Chart with Filters</h2>
<p>Interactive line chart with dropdown filters - combine with PivotTables!</p>

<!-- Filters (for data filtering) -->
<div style="margin-bottom: 15px; padding: 10px; border: 1px solid #ddd; background-color: #f9f9f9;">
            <h4 style="margin-top: 0;">Filters</h4>
                    <div style="margin: 10px;">
            <label for="categ22_select">categ22: </label>
            <select id="categ22_select" multiple style="min-width: 150px; height: 100px;" onchange="updateChart_pchart()">
                <option value="Category_A" selected>Category_A</option>
                <option value="Category_B">Category_B</option>
            </select>
        </div>
                <div style="margin: 10px;">
            <label for="categ_select">categ: </label>
            <select id="categ_select" multiple style="min-width: 150px; height: 100px;" onchange="updateChart_pchart()">
                <option value="B">B</option>
                <option value="A" selected>A</option>
                <option value="C">C</option>
            </select>
        </div>
        
        </div>

<!-- Plot Attributes (x, y, color, aggregator) -->
<div style="margin-bottom: 15px; padding: 10px; border: 1px solid #ddd; background-color: #f0f8ff;">
            <h4 style="margin-top: 0;">Plot Attributes</h4>
                <div style="margin: 10px;">
        <label for="aggregator_select_pchart">Aggregator: </label>
        <select id="aggregator_select_pchart" onchange="updateChart_pchart()">
                <option value="none" selected>none</option>
                <option value="mean">mean</option>
                <option value="median">median</option>
                <option value="count">count</option>
                <option value="min">min</option>
                <option value="max">max</option>
        </select>
    </div>
    
        </div>

<!-- Faceting -->


<!-- Chart -->
<div id="pchart"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: df_combined</p><br>
<hr>
<br>
<h2>3D Surface Chart</h2>
<p>3D surface visualization grouped by mathematical functions</p>

<!-- Filters (for data filtering) -->


<!-- Chart -->
<div id="threeD"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: subframe</p><br>
<hr>
<br>
    <div class="textblock-content">
        <h2>Key Features Summary</h2>
<ul>
    <li><strong>Drag-and-drop interface:</strong> Reorganize data dynamically by dragging fields</li>
    <li><strong>Multiple renderers:</strong> Table, Heatmap, Bar Chart, Line Chart, and more</li>
    <li><strong>Custom color scales:</strong> Define your own color gradients for heatmaps</li>
    <li><strong>Aggregation functions:</strong> Sum, Average, Count, Median, Min, Max, etc.</li>
    <li><strong>Data filtering:</strong> Include or exclude specific values</li>
    <li><strong>Multi-level grouping:</strong> Use multiple row or column dimensions</li>
    <li><strong>Integration:</strong> Combine PivotTables with LineCharts, 3D plots, and more</li>
</ul>
<p><strong>Tip:</strong> Try dragging unused fields from the top into Rows or Columns!</p>

    </div>


<hr><p align="right"><small>This page was created using <a href="https://github.com/s-baumann/JSPlots.jl">JSPlots.jl</a>.</small></p>
</body>
</html>
