<!DOCTYPE html>
<html>
<head>
    <title>PivotTable Examples</title>
    <meta charset="UTF-8">
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apache-arrow@14.0.1/Arrow.es2015.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        #controls {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 20px;
            padding: 10px;
            background-color: #f0f0f0;
            border-radius: 5px;
        }
        #$div_id {
            width: 100%;
            height: 600px;
        }
    </style>
        <style>
        .textblock-content {
            padding: 20px;
            margin: 10px 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: #333;
        }

        .textblock-content h1 {
            font-size: 2em;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
            font-weight: 600;
        }

        .textblock-content h2 {
            font-size: 1.5em;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
            font-weight: 600;
        }

        .textblock-content h3 {
            font-size: 1.25em;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
            font-weight: 600;
        }

        .textblock-content p {
            margin: 0.5em 0;
        }

        .textblock-content ul, .textblock-content ol {
            margin: 0.5em 0;
            padding-left: 2em;
        }

        .textblock-content code {
            background-color: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .textblock-content pre {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }

        .textblock-content pre code {
            background-color: transparent;
            padding: 0;
        }

        .textblock-content blockquote {
            border-left: 4px solid #ddd;
            padding-left: 1em;
            margin-left: 0;
            color: #666;
        }

        .textblock-content a {
            color: #0066cc;
            text-decoration: none;
        }

        .textblock-content a:hover {
            text-decoration: underline;
        }

        .textblock-content table {
            border-collapse: collapse;
            width: 100%;
            margin: 1em 0;
        }

        .textblock-content th, .textblock-content td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        .textblock-content th {
            background-color: #f5f5f5;
            font-weight: 600;
        }
    </style>


    <!-- external libs -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/0.71/jquery.csv-0.71.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.19.0/pivot.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.19.0/pivot.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.19.0/d3_renderers.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.19.0/c3_renderers.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.19.0/export_renderers.min.js"></script>
</head>

<body>

<script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>

<script type="module">
// Import parquet-wasm for Parquet file support
import * as parquet from 'https://unpkg.com/parquet-wasm@0.6.1/esm/parquet_wasm.js';

// Initialize parquet-wasm
await parquet.default();

// Make parquet available globally for loadDataset
window.parquetWasm = parquet;
window.parquetReady = true;
console.log('Parquet-wasm library loaded successfully');
</script>

<script>
// Helper function to wait for parquet-wasm to be loaded
function waitForParquet() {
    return new Promise(function(resolve) {
        if (window.parquetReady) {
            resolve();
            return;
        }
        var checkInterval = setInterval(function() {
            if (window.parquetReady) {
                clearInterval(checkInterval);
                resolve();
            }
        }, 50);
    });
}

// Centralized data loading function
// This function parses data from embedded or external sources and returns a Promise
// Supports CSV (embedded/external), JSON (embedded/external), and Parquet (external) formats
// Usage: loadDataset('dataLabel').then(function(data) { /* use data */ });
function loadDataset(dataLabel) {
    return new Promise(function(resolve, reject) {
        var dataElement = document.getElementById(dataLabel);
        if (!dataElement) {
            reject(new Error('Data element not found: ' + dataLabel));
            return;
        }

        var format = dataElement.getAttribute('data-format') || 'csv_embedded';
        var dataSrc = dataElement.getAttribute('data-src');

        // Handle external JSON files
        if (format === 'json_external' && dataSrc) {
            fetch(dataSrc)
                .then(function(response) {
                    if (!response.ok) {
                        throw new Error('Failed to load ' + dataSrc + ': ' + response.statusText);
                    }
                    return response.json();
                })
                .then(function(data) {
                    resolve(data);
                })
                .catch(function(error) {
                    console.error('Error loading external JSON:', error);
                    reject(error);
                });
            return;
        }

        // Handle external Parquet files
        if (format === 'parquet' && dataSrc) {
            // Wait for parquet-wasm to be loaded first
            waitForParquet()
                .then(function() {
                    return fetch(dataSrc);
                })
                .then(function(response) {
                    if (!response.ok) {
                        throw new Error('Failed to load ' + dataSrc + ': ' + response.statusText);
                    }
                    return response.arrayBuffer();
                })
                .then(function(arrayBuffer) {
                    // Use parquet-wasm to read the file
                    var uint8Array = new Uint8Array(arrayBuffer);

                    // readParquet returns an Arrow Table
                    var wasmTable = window.parquetWasm.readParquet(uint8Array);

                    // Convert to Arrow IPC stream
                    var ipcStream = wasmTable.intoIPCStream();

                    // Use Apache Arrow JS to read the IPC stream
                    var arrowTable = window.Arrow.tableFromIPC(ipcStream);

                    // Convert Arrow Table to array of JavaScript objects
                    var data = [];
                    for (var i = 0; i < arrowTable.numRows; i++) {
                        var row = {};
                        arrowTable.schema.fields.forEach(function(field) {
                            var column = arrowTable.getChild(field.name);
                            var value = column.get(i);

                            // Convert BigInt to Number (Arrow returns BigInt for Int64)
                            if (typeof value === 'bigint') {
                                value = Number(value);
                            }

                            row[field.name] = value;
                        });
                        data.push(row);
                    }

                    resolve(data);
                })
                .catch(function(error) {
                    console.error('Error loading external Parquet:', error);
                    reject(error);
                });
            return;
        }

        // Handle external CSV files
        if (format === 'csv_external' && dataSrc) {
            fetch(dataSrc)
                .then(function(response) {
                    if (!response.ok) {
                        throw new Error('Failed to load ' + dataSrc + ': ' + response.statusText);
                    }
                    return response.text();
                })
                .then(function(csvText) {
                    Papa.parse(csvText, {
                        header: true,
                        dynamicTyping: true,
                        skipEmptyLines: true,
                        complete: function(results) {
                            // Check for fatal errors only (not warnings)
                            var fatalErrors = results.errors.filter(function(err) {
                                return err.type !== 'Delimiter';
                            });

                            if (fatalErrors.length > 0) {
                                console.error('CSV parsing errors:', fatalErrors);
                                reject(fatalErrors);
                            } else if (results.data && results.data.length > 0) {
                                resolve(results.data);
                            } else {
                                reject(new Error('No data parsed from CSV'));
                            }
                        },
                        error: function(error) {
                            console.error('CSV parsing error:', error);
                            reject(error);
                        }
                    });
                })
                .catch(function(error) {
                    console.error('Error loading external CSV:', error);
                    reject(error);
                });
            return;
        }

        // Handle embedded data
        var dataText = dataElement.textContent.trim();

        if (format === 'json_embedded') {
            // Parse JSON data
            try {
                var data = JSON.parse(dataText);
                resolve(data);
            } catch (error) {
                console.error('JSON parsing error:', error);
                reject(error);
            }
        } else if (format === 'csv_embedded') {
            // Parse CSV data using PapaParse
            Papa.parse(dataText, {
                header: true,
                dynamicTyping: true,
                skipEmptyLines: true,
                complete: function(results) {
                    // Check for fatal errors only (not warnings)
                    // PapaParse includes non-fatal warnings in errors array
                    var fatalErrors = results.errors.filter(function(err) {
                        // Filter out delimiter detection warnings - these aren't fatal
                        // (common for single-column CSVs)
                        return err.type !== 'Delimiter';
                    });

                    if (fatalErrors.length > 0) {
                        console.error('CSV parsing errors:', fatalErrors);
                        reject(fatalErrors);
                    } else if (results.data && results.data.length > 0) {
                        resolve(results.data);
                    } else {
                        reject(new Error('No data parsed from CSV'));
                    }
                },
                error: function(error) {
                    console.error('CSV parsing error:', error);
                    reject(error);
                }
            });
        } else {
            reject(new Error('Unsupported data format: ' + format));
        }
    });
}

$(function(){

    loadDataset('sales_data').then(function(data) {
        console.log('Loaded data for pivot table sales_pivot:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table sales_pivot');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for sales_pivot:', arrayData.slice(0, 3));

        $("#sales_pivot").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Table","rows":["Region"],"aggregatorName":"Sum","vals":["Sales"],"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([-2.5, -1.0, 0.0, 1.0, 2.5]).range(["#FF9999", "#FFFF99", "#FFFFFF", "#99FF99", "#99CCFF"]).clamp(true)}}},"cols":["Month"]})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table sales_pivot:', error);
        $("#sales_pivot").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
    loadDataset('performance_data').then(function(data) {
        console.log('Loaded data for pivot table performance_heatmap:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table performance_heatmap');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for performance_heatmap:', arrayData.slice(0, 3));

        $("#performance_heatmap").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Heatmap","rows":["Employee"],"aggregatorName":"Average","vals":["Score"],"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([50.0, 65.0, 75.0, 85.0, 100.0]).range(["#d73027", "#fee08b", "#ffffbf", "#d9ef8b", "#1a9850"]).clamp(true)}}},"cols":["Quarter"]})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table performance_heatmap:', error);
        $("#performance_heatmap").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
    loadDataset('product_data').then(function(data) {
        console.log('Loaded data for pivot table revenue_by_category:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table revenue_by_category');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for revenue_by_category:', arrayData.slice(0, 3));

        $("#revenue_by_category").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Bar Chart","rows":["Category"],"aggregatorName":"Sum","vals":["Revenue"],"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([-2.5, -1.0, 0.0, 1.0, 2.5]).range(["#FF9999", "#FFFF99", "#FFFFFF", "#99FF99", "#99CCFF"]).clamp(true)}}},"cols":["Quarter"]})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table revenue_by_category:', error);
        $("#revenue_by_category").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
    loadDataset('customer_data').then(function(data) {
        console.log('Loaded data for pivot table customer_revenue:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table customer_revenue');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for customer_revenue:', arrayData.slice(0, 3));

        $("#customer_revenue").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Heatmap","rows":["Country"],"aggregatorName":"Sum","vals":["Revenue"],"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([-2.5, -1.0, 0.0, 1.0, 2.5]).range(["#FF9999", "#FFFF99", "#FFFFFF", "#99FF99", "#99CCFF"]).clamp(true)}}},"cols":["ProductType"],"exclusions":{"Country":["Test"]}})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table customer_revenue:', error);
        $("#customer_revenue").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
    loadDataset('survey_data').then(function(data) {
        console.log('Loaded data for pivot table survey_results:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table survey_results');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for survey_results:', arrayData.slice(0, 3));

        $("#survey_results").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Table Barchart","rows":["Age_Group","Gender"],"aggregatorName":"Average","vals":["Satisfaction"],"inclusions":{"Age_Group":["18-25","26-35","36-45"]},"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([-2.5, -1.0, 0.0, 1.0, 2.5]).range(["#FF9999", "#FFFF99", "#FFFFFF", "#99FF99", "#99CCFF"]).clamp(true)}}},"cols":["Product"]})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table survey_results:', error);
        $("#survey_results").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
    loadDataset('transaction_data').then(function(data) {
        console.log('Loaded data for pivot table transaction_analysis:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table transaction_analysis');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for transaction_analysis:', arrayData.slice(0, 3));

        $("#transaction_analysis").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Heatmap","rows":["Customer_Type"],"aggregatorName":"Count","vals":["Amount"],"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([0.0, 50.0, 100.0, 150.0]).range(["#f7fbff", "#9ecae1", "#4292c6", "#08519c"]).clamp(true)}}},"cols":["Transaction_Type"]})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table transaction_analysis:', error);
        $("#transaction_analysis").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
    loadDataset('stockReturns').then(function(data) {
        console.log('Loaded data for pivot table Returns_Over_Last_Few_Days:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table Returns_Over_Last_Few_Days');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for Returns_Over_Last_Few_Days:', arrayData.slice(0, 3));

        $("#Returns_Over_Last_Few_Days").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Heatmap","rows":["Symbol"],"aggregatorName":"Average","vals":["Return"],"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([-2.5, -1.0, 0.0, 1.0, 2.5]).range(["#FF9999", "#FFFF99", "#FFFFFF", "#99FF99", "#99CCFF"]).clamp(true)}}},"cols":["Date"],"exclusions":{"Symbol":["MSFT"]}})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table Returns_Over_Last_Few_Days:', error);
        $("#Returns_Over_Last_Few_Days").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
    loadDataset('correlations').then(function(data) {
        console.log('Loaded data for pivot table Correlation_Matrix:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table Correlation_Matrix');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for Correlation_Matrix:', arrayData.slice(0, 3));

        $("#Correlation_Matrix").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Heatmap","rows":["Symbol1"],"aggregatorName":"Average","vals":["Correlation"],"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([-1.0, 0.0, 1.0]).range(["#FF4545", "#ffffff", "#4F92FF"]).clamp(true)}}},"cols":["Symbol2"]})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table Correlation_Matrix:', error);
        $("#Correlation_Matrix").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
(function() {
    // Configuration
    const FILTER_COLS = ['categ22', 'categ'];
    const X_COLS = ['x'];
    const Y_COLS = ['y'];
    const COLOR_COLS = ['color'];
    const COLOR_MAPS = {'color': {'B': '#EF553B', 'A': '#636efa'}};
    const DEFAULT_X_COL = 'x';
    const DEFAULT_Y_COL = 'y';
    const DEFAULT_COLOR_COL = 'color';

    let allData = [];

    // Aggregation functions
    function aggregate(values, method) {
        if (values.length === 0) return null;
        if (method === 'none') return values;
        if (method === 'count') return [values.length];
        if (method === 'mean') {
            const sum = values.reduce((a, b) => a + b, 0);
            return [sum / values.length];
        }
        if (method === 'median') {
            const sorted = [...values].sort((a, b) => a - b);
            const mid = Math.floor(sorted.length / 2);
            return sorted.length % 2 === 0 ?
                [(sorted[mid - 1] + sorted[mid]) / 2] :
                [sorted[mid]];
        }
        if (method === 'min') return [Math.min(...values)];
        if (method === 'max') return [Math.max(...values)];
        return values;
    }

    // Make it global so inline onchange can see it
    window.updateChart_pchart = function() {
        // Get current X and Y columns
        const xColSelect = document.getElementById('x_col_select_pchart');
        const X_COL = xColSelect ? xColSelect.value : DEFAULT_X_COL;

        const yColSelect = document.getElementById('y_col_select_pchart');
        const Y_COL = yColSelect ? yColSelect.value : DEFAULT_Y_COL;

        // Get current filter values (multiple selections)
        const filters = {};
        FILTER_COLS.forEach(col => {
            const select = document.getElementById(col + '_select');
            if (select) {
                filters[col] = Array.from(select.selectedOptions).map(opt => opt.value);
            }
        });

        // Get current color column
        const colorColSelect = document.getElementById('color_col_select_pchart');
        const COLOR_COL = colorColSelect ? colorColSelect.value : DEFAULT_COLOR_COL;

        // Get current aggregator
        const aggregatorSelect = document.getElementById('aggregator_select_pchart');
        const AGGREGATOR = aggregatorSelect ? aggregatorSelect.value : 'none';

        // Get current facet selections
        const facet1Select = document.getElementById('facet1_select_pchart');
        const facet2Select = document.getElementById('facet2_select_pchart');
        const facet1 = facet1Select && facet1Select.value !== 'None' ? facet1Select.value : null;
        const facet2 = facet2Select && facet2Select.value !== 'None' ? facet2Select.value : null;

        // Build FACET_COLS array based on selections
        const FACET_COLS = [];
        if (facet1) FACET_COLS.push(facet1);
        if (facet2) FACET_COLS.push(facet2);

        // Get color map for current selection
        const COLOR_MAP = COLOR_MAPS[COLOR_COL] || {};

        // Filter data (support multiple selections per filter)
        const filteredData = allData.filter(row => {
            for (let col in filters) {
                const selectedValues = filters[col];
                if (selectedValues.length > 0 && !selectedValues.includes(String(row[col]))) {
                    return false;
                }
            }
            return true;
        });

        if (FACET_COLS.length === 0) {
            // No faceting - group by color
            const groupedData = {};
            filteredData.forEach(row => {
                const colorVal = (COLOR_COL === '__no_color__') ? 'all' : String(row[COLOR_COL]);
                if (!groupedData[colorVal]) {
                    groupedData[colorVal] = {
                        data: [],
                        color: colorVal
                    };
                }
                groupedData[colorVal].data.push(row);
            });

            const traces = [];
            for (let groupKey in groupedData) {
                const group = groupedData[groupKey];
                group.data.sort((a, b) => a[X_COL] - b[X_COL]);

                let xValues, yValues;
                if (AGGREGATOR === 'none') {
                    xValues = group.data.map(row => row[X_COL]);
                    yValues = group.data.map(row => row[Y_COL]);
                } else {
                    // Group by x value and aggregate
                    const xGroups = {};
                    group.data.forEach(row => {
                        const xVal = row[X_COL];
                        if (!xGroups[xVal]) xGroups[xVal] = [];
                        xGroups[xVal].push(row[Y_COL]);
                    });

                    xValues = [];
                    yValues = [];
                    // Sort keys - try numeric sort first, fall back to string sort
                    const sortedKeys = Object.keys(xGroups).sort((a, b) => {
                        const aNum = parseFloat(a);
                        const bNum = parseFloat(b);
                        if (!isNaN(aNum) && !isNaN(bNum)) {
                            return aNum - bNum;
                        }
                        return String(a).localeCompare(String(b));
                    });

                    sortedKeys.forEach(xVal => {
                        const aggregated = aggregate(xGroups[xVal], AGGREGATOR);
                        if (aggregated && aggregated.length > 0) {
                            // Keep original value type (don't force to float for strings)
                            const numVal = parseFloat(xVal);
                            xValues.push(isNaN(numVal) ? xVal : numVal);
                            yValues.push(aggregated[0]);
                        }
                    });
                }

                traces.push({
                    x: xValues,
                    y: yValues,
                    type: 'scatter',
                    mode: 'lines+markers',
                    name: group.color,
                    line: {
                        color: COLOR_MAP[group.color] || '#000000',
                        width: 1
                    },
                    marker: { size: 1 }
                });
            }

            const layout = {
                xaxis: { title: X_COL },
                yaxis: { title: Y_COL },
                hovermode: 'closest',
                showlegend: true
            };

            Plotly.newPlot('pchart', traces, layout, {responsive: true});

        } else if (FACET_COLS.length === 1) {
            // Facet wrap
            const facetCol = FACET_COLS[0];
            const facetValues = [...new Set(filteredData.map(row => row[facetCol]))].sort();
            const nFacets = facetValues.length;

            // Calculate grid dimensions (prefer wider grids)
            const nCols = Math.ceil(Math.sqrt(nFacets * 1.5));
            const nRows = Math.ceil(nFacets / nCols);

            const traces = [];
            const layout = {
                hovermode: 'closest',
                showlegend: true,
                grid: {rows: nRows, columns: nCols, pattern: 'independent'}
            };

            facetValues.forEach((facetVal, idx) => {
                const facetData = filteredData.filter(row => row[facetCol] === facetVal);

                // Group by color within this facet
                const groupedData = {};
                facetData.forEach(row => {
                    const colorVal = (COLOR_COL === '__no_color__') ? 'all' : String(row[COLOR_COL]);
                    if (!groupedData[colorVal]) {
                        groupedData[colorVal] = {
                            data: [],
                            color: colorVal
                        };
                    }
                    groupedData[colorVal].data.push(row);
                });

                const row = Math.floor(idx / nCols) + 1;
                const col = (idx % nCols) + 1;
                const xaxis = idx === 0 ? 'x' : 'x' + (idx + 1);
                const yaxis = idx === 0 ? 'y' : 'y' + (idx + 1);

                for (let groupKey in groupedData) {
                    const group = groupedData[groupKey];
                    group.data.sort((a, b) => a[X_COL] - b[X_COL]);

                    let xValues, yValues;
                    if (AGGREGATOR === 'none') {
                        xValues = group.data.map(row => row[X_COL]);
                        yValues = group.data.map(row => row[Y_COL]);
                    } else {
                        // Group by x value and aggregate
                        const xGroups = {};
                        group.data.forEach(row => {
                            const xVal = row[X_COL];
                            if (!xGroups[xVal]) xGroups[xVal] = [];
                            xGroups[xVal].push(row[Y_COL]);
                        });

                        xValues = [];
                        yValues = [];
                        // Sort keys - try numeric sort first, fall back to string sort
                        const sortedKeys = Object.keys(xGroups).sort((a, b) => {
                            const aNum = parseFloat(a);
                            const bNum = parseFloat(b);
                            if (!isNaN(aNum) && !isNaN(bNum)) {
                                return aNum - bNum;
                            }
                            return String(a).localeCompare(String(b));
                        });

                        sortedKeys.forEach(xVal => {
                            const aggregated = aggregate(xGroups[xVal], AGGREGATOR);
                            if (aggregated && aggregated.length > 0) {
                                // Keep original value type (don't force to float for strings)
                                const numVal = parseFloat(xVal);
                                xValues.push(isNaN(numVal) ? xVal : numVal);
                                yValues.push(aggregated[0]);
                            }
                        });
                    }

                    const legendGroup = group.color;

                    traces.push({
                        x: xValues,
                        y: yValues,
                        type: 'scatter',
                        mode: 'lines+markers',
                        name: group.color,
                        legendgroup: legendGroup,
                        showlegend: idx === 0,
                        xaxis: xaxis,
                        yaxis: yaxis,
                        line: {
                            color: COLOR_MAP[group.color] || '#000000',
                            width: 1
                        },
                        marker: { size: 1 }
                    });
                }

                // Add axis configuration
                layout[xaxis] = {
                    title: row === nRows ? X_COL : '',
                    anchor: yaxis
                };
                layout[yaxis] = {
                    title: col === 1 ? Y_COL : '',
                    anchor: xaxis
                };

                // Add annotation for facet label
                if (!layout.annotations) layout.annotations = [];
                layout.annotations.push({
                    text: facetCol + ': ' + facetVal,
                    showarrow: false,
                    xref: xaxis === 'x' ? 'x domain' : xaxis + ' domain',
                    yref: yaxis === 'y' ? 'y domain' : yaxis + ' domain',
                    x: 0.5,
                    y: 1.05,
                    xanchor: 'center',
                    yanchor: 'bottom',
                    font: {size: 10}
                });
            });

            Plotly.newPlot('pchart', traces, layout, {responsive: true});

        } else {
            // Facet grid (2 facet columns)
            const facetRow = FACET_COLS[0];
            const facetCol = FACET_COLS[1];
            const rowValues = [...new Set(filteredData.map(row => row[facetRow]))].sort();
            const colValues = [...new Set(filteredData.map(row => row[facetCol]))].sort();
            const nRows = rowValues.length;
            const nCols = colValues.length;

            const traces = [];
            const layout = {
                hovermode: 'closest',
                showlegend: true,
                grid: {rows: nRows, columns: nCols, pattern: 'independent'}
            };

            rowValues.forEach((rowVal, rowIdx) => {
                colValues.forEach((colVal, colIdx) => {
                    const facetData = filteredData.filter(row =>
                        row[facetRow] === rowVal && row[facetCol] === colVal
                    );

                    // Group by color within this facet
                    const groupedData = {};
                    facetData.forEach(row => {
                        const colorVal = (COLOR_COL === '__no_color__') ? 'all' : String(row[COLOR_COL]);
                        if (!groupedData[colorVal]) {
                            groupedData[colorVal] = {
                                data: [],
                                color: colorVal
                            };
                        }
                        groupedData[colorVal].data.push(row);
                    });

                    const idx = rowIdx * nCols + colIdx;
                    const xaxis = idx === 0 ? 'x' : 'x' + (idx + 1);
                    const yaxis = idx === 0 ? 'y' : 'y' + (idx + 1);

                    for (let groupKey in groupedData) {
                        const group = groupedData[groupKey];
                        group.data.sort((a, b) => a[X_COL] - b[X_COL]);

                        let xValues, yValues;
                        if (AGGREGATOR === 'none') {
                            xValues = group.data.map(row => row[X_COL]);
                            yValues = group.data.map(row => row[Y_COL]);
                        } else {
                            // Group by x value and aggregate
                            const xGroups = {};
                            group.data.forEach(row => {
                                const xVal = row[X_COL];
                                if (!xGroups[xVal]) xGroups[xVal] = [];
                                xGroups[xVal].push(row[Y_COL]);
                            });

                            xValues = [];
                            yValues = [];
                            const sortedKeys = Object.keys(xGroups).sort((a, b) => {
                                const aNum = parseFloat(a);
                                const bNum = parseFloat(b);
                                if (!isNaN(aNum) && !isNaN(bNum)) {
                                    return aNum - bNum;
                                }
                                return String(a).localeCompare(String(b));
                            });

                            sortedKeys.forEach(xVal => {
                                const aggregated = aggregate(xGroups[xVal], AGGREGATOR);
                                if (aggregated && aggregated.length > 0) {
                                    const numVal = parseFloat(xVal);
                                    xValues.push(isNaN(numVal) ? xVal : numVal);
                                    yValues.push(aggregated[0]);
                                }
                            });
                        }

                        const legendGroup = group.color;

                        traces.push({
                            x: xValues,
                            y: yValues,
                            type: 'scatter',
                            mode: 'lines+markers',
                            name: group.color,
                            legendgroup: legendGroup,
                            showlegend: idx === 0,
                            xaxis: xaxis,
                            yaxis: yaxis,
                            line: {
                                color: COLOR_MAP[group.color] || '#000000',
                                width: 1
                            },
                            marker: { size: 1 }
                        });
                    }

                    // Add axis configuration
                    layout[xaxis] = {
                        title: rowIdx === nRows - 1 ? X_COL : '',
                        anchor: yaxis
                    };
                    layout[yaxis] = {
                        title: colIdx === 0 ? Y_COL : '',
                        anchor: xaxis
                    };

                    // Add annotations for facet labels
                    if (!layout.annotations) layout.annotations = [];

                    // Column header
                    if (rowIdx === 0) {
                        layout.annotations.push({
                            text: facetCol + ': ' + colVal,
                            showarrow: false,
                            xref: xaxis === 'x' ? 'x domain' : xaxis + ' domain',
                            yref: yaxis === 'y' ? 'y domain' : yaxis + ' domain',
                            x: 0.5,
                            y: 1.1,
                            xanchor: 'center',
                            yanchor: 'bottom',
                            font: {size: 10}
                        });
                    }

                    // Row label
                    if (colIdx === nCols - 1) {
                        layout.annotations.push({
                            text: facetRow + ': ' + rowVal,
                            showarrow: false,
                            xref: xaxis === 'x' ? 'x domain' : xaxis + ' domain',
                            yref: yaxis === 'y' ? 'y domain' : yaxis + ' domain',
                            x: 1.05,
                            y: 0.5,
                            xanchor: 'left',
                            yanchor: 'middle',
                            textangle: -90,
                            font: {size: 10}
                        });
                    }
                });
            });

            Plotly.newPlot('pchart', traces, layout, {responsive: true});
        }
    };

    // Load and parse CSV data using centralized parser
    loadDataset('df_combined').then(function(data) {
        allData = data;
        window.updateChart_pchart();
    }).catch(function(error) {
        console.error('Error loading data for chart pchart:', error);
    });
})();
    // Load and parse CSV data using centralized parser
    loadDataset('subframe').then(function(data3d) {
        window.allData_threeD = data3d;

        $(function() {
            

            // Initial plot
            updatePlotWithFilters_threeD();
        });
    }).catch(function(error) {
        console.error('Error loading data for chart threeD:', error);
    });

    function updatePlot_threeD(data3d) {
        // ========== 3D SURFACE PLOT CONFIGURATION ==========
        // Define your column names here
        const x = 'x';
        const y = 'y';
        const z = 'z';
        const group = 'group';
        // ===================================================

        // Get unique groups
const uniqueGroups = [...new Set(data3d.map(row => row[group]))].sort();


        // Define a set of distinct color gradients
        const colorGradients = [
            // Blue gradient
            [[0, 'rgb(8,48,107)'], [0.25, 'rgb(33,102,172)'], [0.5, 'rgb(67,147,195)'], [0.75, 'rgb(146,197,222)'], [1, 'rgb(209,229,240)']],
            // Red-Orange gradient
            [[0, 'rgb(127,0,0)'], [0.25, 'rgb(189,0,38)'], [0.5, 'rgb(227,74,51)'], [0.75, 'rgb(252,141,89)'], [1, 'rgb(253,204,138)']],
            // Green gradient
            [[0, 'rgb(0,68,27)'], [0.25, 'rgb(0,109,44)'], [0.5, 'rgb(35,139,69)'], [0.75, 'rgb(116,196,118)'], [1, 'rgb(199,233,192)']],
            // Purple gradient
            [[0, 'rgb(63,0,125)'], [0.25, 'rgb(106,81,163)'], [0.5, 'rgb(158,154,200)'], [0.75, 'rgb(188,189,220)'], [1, 'rgb(218,218,235)']],
            // Yellow-Orange gradient
            [[0, 'rgb(102,37,6)'], [0.25, 'rgb(153,52,4)'], [0.5, 'rgb(217,95,14)'], [0.75, 'rgb(254,153,41)'], [1, 'rgb(254,217,142)']],
            // Teal gradient
            [[0, 'rgb(1,70,54)'], [0.25, 'rgb(1,102,94)'], [0.5, 'rgb(2,129,138)'], [0.75, 'rgb(54,175,172)'], [1, 'rgb(178,226,226)']],
            // Pink-Magenta gradient
            [[0, 'rgb(73,0,106)'], [0.25, 'rgb(123,50,148)'], [0.5, 'rgb(194,165,207)'], [0.75, 'rgb(231,212,232)'], [1, 'rgb(247,242,247)']],
            // Brown gradient
            [[0, 'rgb(84,48,5)'], [0.25, 'rgb(140,81,10)'], [0.5, 'rgb(191,129,45)'], [0.75, 'rgb(223,194,125)'], [1, 'rgb(246,232,195)']],
        ];

        // Function to create z matrix for a group
        function createSurface(groupData, colorscale, name) {
            const xVals = [...new Set(groupData.map(row => parseFloat(row[x])))].sort((a,b) => a-b);
            const yVals = [...new Set(groupData.map(row => parseFloat(row[y])))].sort((a,b) => a-b);

            const zMatrix = [];
            for (let i = 0; i < yVals.length; i++) {
                zMatrix[i] = [];
                for (let j = 0; j < xVals.length; j++) {
                    const point = groupData.find(row =>
                        parseFloat(row[x]) === xVals[j] &&
                        parseFloat(row[y]) === yVals[i]
                    );
                    zMatrix[i][j] = point ? parseFloat(point[z]) : null;
                }
            }

            return {
                z: zMatrix,
                x: xVals,
                y: yVals,
                type: 'surface',
                name: name,
                colorscale: colorscale,
                showscale: false
            };
        }

        // Create a surface for each group
const plotData = uniqueGroups.map((grp, index) => {
    const groupData = data3d.filter(row => row[group] === grp);
    const colorscale = colorGradients[index % colorGradients.length];
    return createSurface(groupData, colorscale, `Group ${grp}`);
});


        const layout = {
            title: '3D Surface Chart',
            autosize: true,
            height: 600,
            scene: {
                xaxis: { title: x },
                yaxis: { title: y },
                zaxis: { title: z }
            },
            showlegend: true,
        };

        Plotly.newPlot('threeD', plotData, layout);
    }

    function updatePlotWithFilters_threeD() {
    updatePlot_threeD(window.allData_threeD);
}



});
</script>

<!-- DATASETS -->

<script type="text/plain" id="performance_data" data-format="csv_embedded" data-src="">
Employee,Quarter,Score,Department
Alice,Q1,78.45623376959264,Sales
Alice,Q2,84.92850833621084,Sales
Alice,Q3,54.37942686446685,Sales
Alice,Q4,81.08433790112502,Sales
Bob,Q1,68.46397909646362,Engineering
Bob,Q2,57.545455506955136,Engineering
Bob,Q3,69.79352324257535,Engineering
Bob,Q4,61.82379855684112,Engineering
Charlie,Q1,75.69620218388572,Sales
Charlie,Q2,76.44080674686671,Sales
Charlie,Q3,60.54753844511313,Sales
Charlie,Q4,76.52988654227306,Sales
Diana,Q1,61.32143381730145,Marketing
Diana,Q2,70.86947435362642,Marketing
Diana,Q3,105.84996576072975,Marketing
Diana,Q4,66.3908252948573,Marketing
Eve,Q1,77.75466369638163,Engineering
Eve,Q2,75.75485361534547,Engineering
Eve,Q3,77.42698358485518,Engineering
Eve,Q4,80.56522796671621,Engineering

</script><script type="text/plain" id="product_data" data-format="csv_embedded" data-src="">
Category,Brand,Revenue,Quarter
Electronics,Brand C,8014,Q1
Clothing,Brand C,8408,Q2
Home,Brand C,1677,Q3
Sports,Brand D,7957,Q4
Books,Brand D,8166,Q1
Electronics,Brand B,7550,Q2
Clothing,Brand C,2258,Q3
Home,Brand C,8439,Q4
Sports,Brand D,3811,Q1
Books,Brand C,6925,Q2
Electronics,Brand D,5562,Q3
Clothing,Brand D,9109,Q4
Home,Brand D,6957,Q1
Sports,Brand C,2508,Q2
Books,Brand C,3881,Q3
Electronics,Brand C,6770,Q4
Clothing,Brand A,6973,Q1
Home,Brand A,9123,Q2
Sports,Brand A,1953,Q3
Books,Brand A,6749,Q4
Electronics,Brand C,2062,Q1
Clothing,Brand A,9115,Q2
Home,Brand C,3805,Q3
Sports,Brand B,8834,Q4
Books,Brand B,7641,Q1
Electronics,Brand D,9854,Q2
Clothing,Brand C,8743,Q3
Home,Brand B,9147,Q4
Sports,Brand C,6783,Q1
Books,Brand D,1072,Q2
Electronics,Brand C,5152,Q3
Clothing,Brand A,1936,Q4
Home,Brand C,4689,Q1
Sports,Brand B,6031,Q2
Books,Brand A,8318,Q3
Electronics,Brand C,3940,Q4
Clothing,Brand A,3790,Q1
Home,Brand B,8982,Q2
Sports,Brand B,3198,Q3
Books,Brand B,5635,Q4
Electronics,Brand A,8598,Q1
Clothing,Brand B,8839,Q2
Home,Brand A,4254,Q3
Sports,Brand B,2021,Q4
Books,Brand C,2140,Q1
Electronics,Brand A,5808,Q2
Clothing,Brand C,4703,Q3
Home,Brand B,4941,Q4
Sports,Brand D,9422,Q1
Books,Brand A,8461,Q2
Electronics,Brand C,9445,Q3
Clothing,Brand C,6151,Q4
Home,Brand D,8319,Q1
Sports,Brand C,4996,Q2
Books,Brand A,1452,Q3
Electronics,Brand A,3325,Q4
Clothing,Brand D,1564,Q1
Home,Brand A,7300,Q2
Sports,Brand C,1284,Q3
Books,Brand B,8693,Q4
Electronics,Brand A,9297,Q1
Clothing,Brand C,3569,Q2
Home,Brand B,7608,Q3
Sports,Brand D,7119,Q4
Books,Brand B,5571,Q1
Electronics,Brand D,7075,Q2
Clothing,Brand C,1670,Q3
Home,Brand B,6688,Q4
Sports,Brand D,8455,Q1
Books,Brand B,8518,Q2
Electronics,Brand C,1768,Q3
Clothing,Brand B,8736,Q4
Home,Brand C,1641,Q1
Sports,Brand A,4095,Q2
Books,Brand B,6204,Q3
Electronics,Brand B,3790,Q4
Clothing,Brand C,2648,Q1
Home,Brand A,1858,Q2
Sports,Brand A,7571,Q3
Books,Brand C,3124,Q4
Electronics,Brand B,8145,Q1
Clothing,Brand B,2744,Q2
Home,Brand A,3775,Q3
Sports,Brand C,6237,Q4
Books,Brand D,6748,Q1
Electronics,Brand D,5082,Q2
Clothing,Brand C,9165,Q3
Home,Brand D,8119,Q4
Sports,Brand B,8896,Q1
Books,Brand A,2296,Q2
Electronics,Brand D,9884,Q3
Clothing,Brand C,4734,Q4
Home,Brand A,9239,Q1
Sports,Brand B,2595,Q2
Books,Brand B,9880,Q3
Electronics,Brand A,4930,Q4
Clothing,Brand B,4471,Q1
Home,Brand C,9123,Q2
Sports,Brand B,5959,Q3
Books,Brand C,1355,Q4

</script><script type="text/plain" id="customer_data" data-format="csv_embedded" data-src="">
Country,ProductType,Channel,Revenue,Year
France,Budget,Wholesale,3750,2022
France,Standard,Retail,4316,2023
Test,Budget,Retail,4517,2024
Test,Premium,Retail,3567,2022
Japan,Standard,Wholesale,4172,2023
UK,Budget,Wholesale,3061,2024
USA,Budget,Retail,2794,2022
Test,Budget,Online,1995,2023
France,Budget,Wholesale,1263,2024
Test,Budget,Wholesale,3577,2022
Japan,Premium,Online,3481,2023
USA,Standard,Online,1542,2024
UK,Standard,Wholesale,1827,2022
Test,Budget,Wholesale,1528,2023
Japan,Standard,Wholesale,2224,2024
USA,Premium,Online,762,2022
Germany,Standard,Wholesale,1875,2023
USA,Premium,Retail,1481,2024
Japan,Standard,Online,2202,2022
Japan,Standard,Retail,3693,2023
France,Budget,Retail,610,2024
USA,Premium,Online,2261,2022
Test,Budget,Online,4412,2023
USA,Premium,Online,1937,2024
USA,Premium,Retail,2225,2022
Japan,Standard,Online,3749,2023
Germany,Premium,Retail,2006,2024
USA,Budget,Retail,4347,2022
USA,Premium,Wholesale,1169,2023
Germany,Premium,Retail,3695,2024
Germany,Standard,Wholesale,4670,2022
Test,Premium,Online,2731,2023
UK,Premium,Retail,1355,2024
France,Premium,Wholesale,1703,2022
Japan,Standard,Wholesale,997,2023
UK,Premium,Online,4133,2024
Japan,Premium,Retail,670,2022
USA,Standard,Retail,3324,2023
UK,Standard,Retail,3275,2024
Germany,Standard,Retail,4815,2022
USA,Budget,Online,2491,2023
France,Standard,Retail,4189,2024
Japan,Premium,Online,517,2022
Germany,Premium,Wholesale,914,2023
Japan,Budget,Online,591,2024
France,Standard,Online,3236,2022
Japan,Premium,Retail,3963,2023
Japan,Standard,Online,3399,2024
Germany,Standard,Wholesale,3266,2022
Test,Standard,Retail,3807,2023
USA,Standard,Wholesale,2725,2024
Germany,Premium,Retail,3415,2022
Japan,Premium,Wholesale,2051,2023
Japan,Premium,Online,1523,2024
Germany,Premium,Retail,4866,2022
France,Standard,Wholesale,2867,2023
Japan,Premium,Online,2829,2024
France,Budget,Online,3638,2022
UK,Budget,Online,4535,2023
France,Premium,Retail,1331,2024
Test,Budget,Online,942,2022
Japan,Standard,Online,3830,2023
UK,Budget,Wholesale,3693,2024
France,Budget,Wholesale,854,2022
Test,Budget,Retail,3300,2023
Test,Budget,Wholesale,4599,2024
Germany,Budget,Retail,2101,2022
Germany,Standard,Online,2456,2023
Test,Standard,Wholesale,4687,2024
Test,Premium,Retail,864,2022
Germany,Standard,Wholesale,4096,2023
UK,Budget,Retail,3772,2024
Japan,Premium,Online,4910,2022
USA,Budget,Retail,1637,2023
UK,Budget,Wholesale,3224,2024
France,Premium,Online,1400,2022
USA,Premium,Wholesale,693,2023
USA,Budget,Wholesale,3179,2024
UK,Standard,Online,512,2022
France,Budget,Online,1423,2023
Japan,Budget,Wholesale,2362,2024
France,Budget,Wholesale,3938,2022
UK,Standard,Retail,649,2023
France,Standard,Online,3850,2024
Japan,Standard,Wholesale,3004,2022
UK,Budget,Wholesale,931,2023
Germany,Standard,Wholesale,615,2024
USA,Premium,Online,4086,2022
Germany,Budget,Wholesale,3055,2023
USA,Premium,Wholesale,2608,2024
UK,Standard,Wholesale,4586,2022
Germany,Premium,Wholesale,2748,2023
UK,Standard,Wholesale,3980,2024
Germany,Standard,Retail,913,2022
USA,Budget,Wholesale,780,2023
USA,Standard,Wholesale,4369,2024
Germany,Standard,Retail,638,2022
Germany,Budget,Online,2586,2023
Germany,Standard,Online,3241,2024
Test,Budget,Online,2364,2022
Test,Standard,Online,3360,2023
USA,Standard,Online,3239,2024
UK,Premium,Online,2730,2022
Japan,Standard,Wholesale,1668,2023
Japan,Standard,Online,4012,2024
Japan,Budget,Wholesale,4589,2022
USA,Premium,Retail,659,2023
Test,Budget,Retail,3792,2024
USA,Premium,Wholesale,1888,2022
France,Standard,Online,4096,2023
Germany,Budget,Wholesale,3809,2024
Test,Budget,Wholesale,3896,2022
USA,Standard,Wholesale,3012,2023
France,Standard,Wholesale,519,2024
UK,Standard,Online,1503,2022
USA,Budget,Wholesale,1236,2023
Japan,Standard,Retail,1106,2024
UK,Standard,Online,4051,2022
Test,Premium,Wholesale,2971,2023
Test,Premium,Retail,4892,2024

</script><script type="text/plain" id="survey_data" data-format="csv_embedded" data-src="">
Age_Group,Gender,Satisfaction,Product,Region
36-45,Male,10,Product A,East
46-55,Male,10,Product A,North
36-45,Male,4,Product C,West
26-35,Female,1,Product A,North
18-25,Other,9,Product B,North
46-55,Male,4,Product C,East
46-55,Male,5,Product A,West
56+,Other,5,Product A,North
46-55,Other,8,Product B,East
36-45,Other,6,Product C,East
26-35,Female,10,Product A,North
36-45,Female,4,Product A,South
36-45,Female,2,Product B,East
26-35,Male,6,Product C,West
56+,Prefer not to say,3,Product A,North
36-45,Other,1,Product B,East
36-45,Male,6,Product A,West
46-55,Male,1,Product B,North
18-25,Male,8,Product B,East
36-45,Male,6,Product B,East
56+,Prefer not to say,2,Product A,East
46-55,Female,6,Product C,East
26-35,Male,8,Product A,North
18-25,Other,3,Product B,East
56+,Other,7,Product B,East
46-55,Male,1,Product A,West
36-45,Female,3,Product C,South
56+,Prefer not to say,3,Product B,East
56+,Female,3,Product B,South
56+,Male,7,Product A,South
46-55,Male,10,Product A,North
18-25,Male,5,Product B,East
18-25,Female,5,Product B,North
36-45,Prefer not to say,2,Product C,North
26-35,Prefer not to say,6,Product B,East
46-55,Female,9,Product A,East
46-55,Prefer not to say,6,Product A,East
36-45,Other,6,Product C,East
46-55,Other,4,Product A,North
36-45,Female,2,Product C,West
18-25,Male,8,Product C,East
26-35,Other,9,Product A,North
26-35,Male,6,Product B,West
26-35,Female,3,Product C,South
56+,Other,8,Product A,West
36-45,Other,2,Product C,West
56+,Prefer not to say,2,Product B,West
36-45,Prefer not to say,9,Product A,South
18-25,Other,2,Product B,East
36-45,Male,9,Product A,East
36-45,Prefer not to say,3,Product B,South
36-45,Prefer not to say,8,Product C,North
18-25,Male,6,Product B,West
26-35,Male,1,Product C,East
36-45,Female,6,Product B,North
36-45,Other,7,Product B,West
26-35,Other,6,Product A,West
46-55,Other,7,Product C,East
36-45,Female,7,Product A,West
18-25,Male,3,Product A,North
26-35,Female,5,Product B,East
46-55,Female,7,Product A,North
26-35,Female,5,Product A,North
36-45,Other,1,Product B,North
46-55,Female,2,Product A,South
26-35,Other,2,Product C,East
36-45,Prefer not to say,9,Product B,South
36-45,Female,2,Product B,North
26-35,Other,6,Product A,South
26-35,Prefer not to say,2,Product C,South
36-45,Male,4,Product B,West
56+,Prefer not to say,4,Product A,West
26-35,Other,10,Product A,East
18-25,Prefer not to say,8,Product C,South
18-25,Other,4,Product B,North
18-25,Other,8,Product B,South
56+,Other,7,Product B,North
56+,Female,3,Product C,West
26-35,Female,5,Product A,North
46-55,Prefer not to say,4,Product B,North
46-55,Prefer not to say,9,Product C,East
56+,Prefer not to say,10,Product B,South
26-35,Prefer not to say,5,Product B,East
36-45,Prefer not to say,4,Product A,West
26-35,Other,9,Product B,South
18-25,Other,6,Product C,South
46-55,Female,3,Product C,South
46-55,Prefer not to say,1,Product C,North
46-55,Male,6,Product A,North
36-45,Female,9,Product B,South
26-35,Female,4,Product C,North
56+,Prefer not to say,3,Product A,North
46-55,Prefer not to say,10,Product A,South
56+,Prefer not to say,1,Product C,East
56+,Female,4,Product C,East
26-35,Other,9,Product A,West
46-55,Female,6,Product C,East
46-55,Female,9,Product C,East
46-55,Female,7,Product C,West
56+,Female,7,Product B,South
18-25,Other,10,Product B,North
56+,Female,8,Product A,West
26-35,Prefer not to say,8,Product B,South
36-45,Male,4,Product B,North
46-55,Other,3,Product A,West
18-25,Prefer not to say,9,Product A,West
18-25,Female,3,Product B,North
46-55,Other,1,Product B,South
46-55,Female,4,Product B,East
46-55,Female,10,Product A,North
56+,Other,2,Product B,North
18-25,Female,9,Product C,East
36-45,Male,4,Product A,West
46-55,Prefer not to say,5,Product C,South
18-25,Prefer not to say,10,Product B,North
56+,Female,6,Product A,West
36-45,Female,1,Product A,East
56+,Male,6,Product A,South
18-25,Male,3,Product B,South
56+,Female,1,Product C,South
36-45,Prefer not to say,4,Product C,West
36-45,Other,4,Product A,West
36-45,Female,7,Product A,West
56+,Prefer not to say,8,Product B,South
36-45,Male,1,Product A,West
26-35,Other,10,Product C,North
36-45,Female,10,Product A,West
56+,Female,4,Product A,East
18-25,Male,1,Product A,South
36-45,Female,7,Product C,South
18-25,Female,3,Product A,North
56+,Other,10,Product B,North
26-35,Female,4,Product B,East
36-45,Other,10,Product B,East
46-55,Male,6,Product C,West
36-45,Male,3,Product A,South
18-25,Other,4,Product C,South
18-25,Prefer not to say,4,Product A,East
56+,Prefer not to say,1,Product A,North
56+,Male,8,Product B,East
46-55,Male,9,Product A,East
18-25,Female,6,Product C,West
18-25,Female,6,Product B,West
46-55,Male,6,Product A,North
56+,Prefer not to say,10,Product B,West
36-45,Male,9,Product B,North
18-25,Female,8,Product C,North
46-55,Male,3,Product B,South
56+,Prefer not to say,9,Product C,North
36-45,Prefer not to say,6,Product B,West
56+,Male,7,Product B,East
26-35,Prefer not to say,2,Product B,North
36-45,Male,10,Product A,West
26-35,Prefer not to say,10,Product C,South
36-45,Male,3,Product A,South
26-35,Other,8,Product C,West
46-55,Other,10,Product C,East
56+,Prefer not to say,10,Product C,South
56+,Prefer not to say,3,Product A,West
56+,Prefer not to say,2,Product A,East
18-25,Other,8,Product C,North
56+,Female,9,Product C,West
56+,Female,4,Product A,West
46-55,Other,5,Product B,North
56+,Male,7,Product A,North
36-45,Female,7,Product B,North
26-35,Male,8,Product C,North
56+,Prefer not to say,3,Product B,East
26-35,Male,1,Product A,South
36-45,Female,7,Product B,North
36-45,Other,1,Product B,South
18-25,Other,3,Product C,West
26-35,Male,2,Product A,East
46-55,Other,8,Product A,South
18-25,Female,8,Product B,East
46-55,Other,2,Product C,South
46-55,Male,8,Product C,North
26-35,Male,2,Product A,West
26-35,Prefer not to say,7,Product C,South
26-35,Female,10,Product B,South
36-45,Prefer not to say,3,Product A,South
18-25,Prefer not to say,6,Product A,East
18-25,Female,3,Product B,South
56+,Other,10,Product A,East
18-25,Prefer not to say,4,Product B,South
26-35,Female,4,Product C,East
56+,Female,9,Product C,North
26-35,Other,6,Product A,East
18-25,Male,9,Product B,North
26-35,Female,8,Product B,East
18-25,Prefer not to say,6,Product C,North
36-45,Male,6,Product A,East
36-45,Female,8,Product A,North
26-35,Prefer not to say,6,Product C,North
18-25,Male,7,Product A,East
56+,Male,6,Product C,South
56+,Female,7,Product C,West
18-25,Male,8,Product C,East
56+,Other,3,Product A,East
56+,Other,5,Product B,West

</script><script type="text/plain" id="stockReturns" data-format="csv_embedded" data-src="">
Symbol,Date,Return
RTX,2023-01-01,10.01
RTX,2023-01-02,-10.005
RTX,2023-01-03,-0.5
GOOG,2023-01-01,1.0
GOOG,2023-01-02,0.01
GOOG,2023-01-03,-0.003
MSFT,2023-01-01,0.008
MSFT,2023-01-02,0.004
MSFT,2023-01-03,-0.002

</script><script type="text/plain" id="correlations" data-format="csv_embedded" data-src="">
Symbol1,Symbol2,Correlation
RTX,GOOG,-0.85
RTX,MSFT,-0.75
GOOG,MSFT,0.8
RTX,RTX,1.0
GOOG,GOOG,1.0
MSFT,MSFT,1.0
GOOG,RTX,-0.85
MSFT,RTX,-0.75
MSFT,GOOG,0.8

</script><script type="text/plain" id="sales_data" data-format="csv_embedded" data-src="">
Region,Month,Product,Sales,Units
North,Jan,Widget,12023,196
North,Feb,Gadget,28083,98
North,Mar,Gadget,10587,134
North,Apr,Gizmo,29877,151
North,May,Gizmo,28217,199
North,Jun,Widget,36001,95
North,Jul,Gizmo,20528,114
North,Aug,Gadget,43366,104
North,Sep,Gizmo,23431,149
North,Oct,Gadget,24833,178
North,Nov,Widget,18658,122
North,Dec,Gizmo,39510,85
South,Jan,Widget,47936,172
South,Feb,Gadget,12285,192
South,Mar,Widget,23667,172
South,Apr,Widget,48516,168
South,May,Widget,42402,118
South,Jun,Gizmo,21158,82
South,Jul,Gadget,41459,81
South,Aug,Gadget,25593,149
South,Sep,Gizmo,40216,164
South,Oct,Widget,19366,198
South,Nov,Gizmo,26958,183
South,Dec,Gizmo,16244,79
East,Jan,Widget,44173,102
East,Feb,Gadget,46304,57
East,Mar,Widget,34854,164
East,Apr,Gadget,30731,54
East,May,Gadget,34497,54
East,Jun,Widget,46659,89
East,Jul,Gadget,28334,73
East,Aug,Widget,22901,181
East,Sep,Widget,34284,121
East,Oct,Gadget,13803,123
East,Nov,Gizmo,23251,97
East,Dec,Gadget,29012,112
West,Jan,Widget,27393,53
West,Feb,Widget,44808,134
West,Mar,Widget,29522,99
West,Apr,Gadget,38486,192
West,May,Gizmo,18813,160
West,Jun,Gadget,43099,117
West,Jul,Gadget,12832,120
West,Aug,Gadget,15630,66
West,Sep,Gadget,30342,147
West,Oct,Gadget,12381,63
West,Nov,Widget,49445,104
West,Dec,Widget,39102,109

</script><script type="text/plain" id="transaction_data" data-format="csv_embedded" data-src="">
Transaction_Type,Customer_Type,Payment_Method,Store,Amount
Refund,VIP,Credit Card,Store 1,205
Purchase,VIP,Cash,Store 3,317
Refund,VIP,PayPal,Store 3,120
Exchange,New,PayPal,Store 1,171
Exchange,New,Bank Transfer,Store 2,348
Exchange,New,Bank Transfer,Store 3,236
Exchange,Returning,Credit Card,Store 3,262
Refund,VIP,Cash,Store 1,394
Refund,New,PayPal,Store 3,449
Exchange,New,Credit Card,Store 3,396
Exchange,VIP,Credit Card,Store 3,126
Purchase,Returning,Bank Transfer,Store 3,80
Cancel,Returning,Credit Card,Store 2,310
Cancel,VIP,Credit Card,Store 1,391
Refund,Returning,Credit Card,Store 1,123
Exchange,VIP,Cash,Store 1,335
Purchase,Returning,Bank Transfer,Store 1,479
Purchase,Returning,Bank Transfer,Store 2,129
Cancel,Returning,Cash,Store 3,118
Purchase,New,Bank Transfer,Store 1,389
Exchange,Returning,PayPal,Store 3,37
Refund,New,Bank Transfer,Store 1,463
Cancel,VIP,Bank Transfer,Store 3,238
Cancel,VIP,PayPal,Store 3,289
Exchange,New,PayPal,Store 1,144
Cancel,Returning,Cash,Store 1,471
Purchase,New,Bank Transfer,Store 1,165
Exchange,Returning,Bank Transfer,Store 2,204
Purchase,New,Cash,Store 3,58
Refund,Returning,Credit Card,Store 1,444
Purchase,VIP,Cash,Store 3,159
Purchase,New,Cash,Store 2,198
Purchase,Returning,PayPal,Store 2,162
Cancel,New,PayPal,Store 3,214
Refund,New,PayPal,Store 3,390
Refund,VIP,Cash,Store 1,446
Refund,Returning,Credit Card,Store 1,261
Refund,New,PayPal,Store 2,172
Refund,VIP,Credit Card,Store 1,134
Purchase,Returning,PayPal,Store 1,260
Cancel,Returning,Credit Card,Store 2,454
Cancel,New,PayPal,Store 3,199
Purchase,New,PayPal,Store 2,130
Purchase,VIP,PayPal,Store 1,36
Exchange,New,Bank Transfer,Store 3,312
Refund,New,Credit Card,Store 1,380
Exchange,New,PayPal,Store 2,210
Cancel,Returning,PayPal,Store 1,10
Refund,Returning,Bank Transfer,Store 2,451
Cancel,New,Credit Card,Store 1,173
Cancel,Returning,PayPal,Store 2,383
Exchange,New,Bank Transfer,Store 3,169
Exchange,New,Cash,Store 3,211
Refund,Returning,Bank Transfer,Store 2,415
Purchase,Returning,PayPal,Store 2,202
Refund,New,Credit Card,Store 2,374
Refund,VIP,Credit Card,Store 1,124
Exchange,New,Bank Transfer,Store 2,246
Refund,New,Cash,Store 1,19
Refund,New,PayPal,Store 3,230
Purchase,Returning,Bank Transfer,Store 3,394
Exchange,Returning,PayPal,Store 2,59
Cancel,VIP,PayPal,Store 2,278
Purchase,Returning,Credit Card,Store 2,378
Refund,New,Bank Transfer,Store 2,150
Cancel,Returning,Credit Card,Store 1,428
Cancel,VIP,Cash,Store 2,197
Refund,New,Bank Transfer,Store 1,216
Exchange,New,Credit Card,Store 1,192
Exchange,New,PayPal,Store 1,162
Purchase,New,Cash,Store 2,378
Exchange,Returning,Credit Card,Store 3,400
Exchange,New,Credit Card,Store 3,236
Purchase,Returning,Credit Card,Store 2,292
Refund,Returning,PayPal,Store 1,149
Cancel,Returning,Credit Card,Store 2,69
Exchange,New,Bank Transfer,Store 3,32
Exchange,VIP,Credit Card,Store 3,321
Exchange,VIP,PayPal,Store 1,495
Exchange,VIP,PayPal,Store 3,67
Refund,VIP,Bank Transfer,Store 1,411
Cancel,New,PayPal,Store 1,286
Purchase,VIP,Credit Card,Store 2,284
Purchase,VIP,Bank Transfer,Store 3,393
Exchange,Returning,Bank Transfer,Store 1,261
Purchase,New,Credit Card,Store 3,108
Refund,New,Credit Card,Store 1,369
Purchase,New,Credit Card,Store 3,469
Purchase,VIP,Bank Transfer,Store 2,434
Refund,Returning,PayPal,Store 3,412
Purchase,New,Bank Transfer,Store 2,493
Cancel,Returning,Bank Transfer,Store 2,40
Cancel,VIP,Bank Transfer,Store 3,472
Refund,Returning,PayPal,Store 3,405
Purchase,Returning,Credit Card,Store 2,245
Cancel,VIP,PayPal,Store 2,434
Cancel,VIP,PayPal,Store 2,98
Refund,New,PayPal,Store 3,500
Cancel,Returning,Bank Transfer,Store 1,500
Refund,New,Cash,Store 1,277
Cancel,Returning,Credit Card,Store 2,115
Purchase,New,Cash,Store 2,85
Purchase,VIP,PayPal,Store 3,450
Exchange,Returning,PayPal,Store 1,307
Purchase,Returning,Bank Transfer,Store 3,50
Refund,Returning,PayPal,Store 3,462
Purchase,VIP,Bank Transfer,Store 1,305
Purchase,Returning,Bank Transfer,Store 2,164
Exchange,VIP,Bank Transfer,Store 3,135
Exchange,New,Credit Card,Store 2,14
Purchase,VIP,PayPal,Store 3,381
Cancel,VIP,PayPal,Store 1,199
Cancel,New,Cash,Store 3,250
Exchange,Returning,PayPal,Store 1,400
Refund,Returning,Bank Transfer,Store 2,336
Purchase,VIP,Cash,Store 1,185
Purchase,New,Bank Transfer,Store 2,134
Exchange,VIP,Credit Card,Store 3,246
Exchange,New,Credit Card,Store 3,246
Cancel,VIP,Cash,Store 1,203
Exchange,New,Bank Transfer,Store 1,176
Exchange,VIP,Bank Transfer,Store 1,296
Purchase,Returning,PayPal,Store 3,223
Purchase,Returning,Cash,Store 2,455
Purchase,VIP,Bank Transfer,Store 1,410
Cancel,Returning,Cash,Store 3,132
Refund,Returning,Credit Card,Store 3,220
Exchange,New,Credit Card,Store 2,239
Refund,New,PayPal,Store 2,43
Purchase,VIP,Bank Transfer,Store 2,470
Purchase,New,PayPal,Store 2,121
Cancel,VIP,Cash,Store 2,320
Exchange,Returning,PayPal,Store 3,457
Purchase,Returning,Bank Transfer,Store 1,51
Purchase,Returning,PayPal,Store 1,122
Exchange,VIP,Bank Transfer,Store 1,65
Cancel,New,Cash,Store 2,498
Purchase,New,Credit Card,Store 2,227
Purchase,Returning,Cash,Store 2,107
Purchase,New,Bank Transfer,Store 3,362
Purchase,New,Cash,Store 2,472
Refund,New,Credit Card,Store 3,384
Refund,Returning,Credit Card,Store 2,334
Purchase,VIP,Credit Card,Store 2,499
Refund,Returning,Bank Transfer,Store 1,146
Cancel,VIP,PayPal,Store 3,148
Cancel,Returning,Bank Transfer,Store 2,109
Purchase,Returning,PayPal,Store 3,131
Refund,VIP,Bank Transfer,Store 3,438
Refund,Returning,PayPal,Store 1,297
Cancel,New,Credit Card,Store 1,409
Refund,VIP,Bank Transfer,Store 2,10
Refund,Returning,PayPal,Store 2,325
Cancel,Returning,Bank Transfer,Store 2,145
Purchase,Returning,Credit Card,Store 1,477
Cancel,New,PayPal,Store 2,492
Refund,New,PayPal,Store 1,441
Cancel,VIP,PayPal,Store 3,287
Purchase,New,Bank Transfer,Store 2,181
Refund,Returning,Bank Transfer,Store 1,292
Exchange,New,PayPal,Store 1,119
Purchase,New,Bank Transfer,Store 3,470
Purchase,New,Credit Card,Store 3,214
Refund,VIP,Bank Transfer,Store 3,148
Purchase,VIP,Bank Transfer,Store 1,380
Cancel,VIP,PayPal,Store 1,19
Exchange,New,PayPal,Store 2,203
Refund,VIP,Cash,Store 1,206
Refund,VIP,Cash,Store 1,474
Refund,New,Cash,Store 1,420
Exchange,Returning,Credit Card,Store 2,78
Refund,New,Cash,Store 2,233
Refund,New,Bank Transfer,Store 1,36
Cancel,VIP,PayPal,Store 3,439
Refund,New,Bank Transfer,Store 1,408
Cancel,New,Cash,Store 2,467
Refund,VIP,Cash,Store 3,189
Purchase,VIP,Bank Transfer,Store 3,440
Cancel,Returning,Credit Card,Store 3,380
Purchase,Returning,PayPal,Store 3,15
Exchange,New,Cash,Store 3,67
Exchange,VIP,PayPal,Store 3,33
Exchange,Returning,Cash,Store 2,254
Cancel,VIP,Bank Transfer,Store 1,70
Refund,VIP,Credit Card,Store 2,158
Purchase,VIP,PayPal,Store 2,226
Cancel,VIP,PayPal,Store 3,117
Exchange,New,Credit Card,Store 2,27
Refund,VIP,Cash,Store 3,18
Purchase,Returning,Credit Card,Store 3,451
Refund,VIP,Cash,Store 2,463
Refund,New,PayPal,Store 1,115
Refund,New,Cash,Store 2,414
Refund,Returning,Bank Transfer,Store 1,235
Cancel,Returning,PayPal,Store 2,104
Exchange,Returning,Credit Card,Store 1,244
Refund,VIP,Credit Card,Store 2,127
Exchange,New,Cash,Store 2,78
Purchase,Returning,Cash,Store 3,122
Exchange,New,Credit Card,Store 1,434
Refund,Returning,Credit Card,Store 3,161
Cancel,VIP,Bank Transfer,Store 1,230
Purchase,VIP,Credit Card,Store 3,187
Exchange,VIP,PayPal,Store 1,196
Purchase,Returning,Cash,Store 1,83
Cancel,Returning,PayPal,Store 2,499
Purchase,VIP,Bank Transfer,Store 1,345
Refund,VIP,Bank Transfer,Store 1,387
Cancel,VIP,Bank Transfer,Store 1,429
Cancel,VIP,PayPal,Store 2,78
Purchase,VIP,Cash,Store 1,19
Cancel,New,Credit Card,Store 3,116
Purchase,New,Credit Card,Store 2,445
Exchange,New,Credit Card,Store 3,141
Exchange,New,Cash,Store 3,268
Purchase,Returning,Cash,Store 3,313
Refund,Returning,Credit Card,Store 2,81
Purchase,Returning,PayPal,Store 3,132
Purchase,New,Bank Transfer,Store 1,465
Purchase,VIP,PayPal,Store 3,93
Exchange,VIP,PayPal,Store 3,451
Cancel,Returning,Bank Transfer,Store 2,183
Purchase,New,Bank Transfer,Store 3,143
Purchase,Returning,Cash,Store 1,94
Refund,Returning,Credit Card,Store 2,262
Cancel,Returning,PayPal,Store 1,414
Refund,VIP,Bank Transfer,Store 1,499
Refund,VIP,PayPal,Store 1,192
Purchase,New,PayPal,Store 3,373
Cancel,VIP,Bank Transfer,Store 1,259
Refund,New,PayPal,Store 2,190
Cancel,New,Bank Transfer,Store 2,474
Exchange,VIP,Bank Transfer,Store 2,433
Refund,New,PayPal,Store 1,420
Exchange,Returning,Cash,Store 1,145
Cancel,Returning,PayPal,Store 1,56
Refund,New,Credit Card,Store 1,341
Refund,Returning,Credit Card,Store 2,68
Purchase,VIP,PayPal,Store 3,31
Exchange,New,Cash,Store 3,114
Exchange,New,Cash,Store 2,431
Purchase,VIP,PayPal,Store 2,122
Exchange,New,Cash,Store 3,459
Refund,Returning,Bank Transfer,Store 2,40
Exchange,Returning,Credit Card,Store 2,199
Purchase,New,Cash,Store 1,252
Cancel,VIP,Bank Transfer,Store 3,416
Refund,Returning,Bank Transfer,Store 1,433
Refund,Returning,Credit Card,Store 1,331
Purchase,Returning,Bank Transfer,Store 2,138
Cancel,Returning,Credit Card,Store 3,317
Refund,New,PayPal,Store 1,465
Refund,VIP,Credit Card,Store 3,89
Cancel,VIP,Credit Card,Store 1,237
Purchase,VIP,Credit Card,Store 1,53
Cancel,VIP,PayPal,Store 2,71
Refund,VIP,Credit Card,Store 3,139
Refund,VIP,Bank Transfer,Store 1,173
Purchase,VIP,Credit Card,Store 3,168
Exchange,VIP,Credit Card,Store 1,429
Exchange,Returning,Credit Card,Store 1,151
Purchase,VIP,PayPal,Store 2,217
Purchase,VIP,Cash,Store 1,24
Purchase,VIP,Cash,Store 1,254
Cancel,New,Bank Transfer,Store 3,21
Purchase,Returning,PayPal,Store 1,27
Cancel,Returning,Bank Transfer,Store 2,23
Exchange,Returning,PayPal,Store 1,292
Cancel,New,Bank Transfer,Store 2,258
Cancel,Returning,Cash,Store 1,26
Purchase,Returning,Bank Transfer,Store 3,182
Exchange,Returning,Bank Transfer,Store 1,70
Purchase,VIP,PayPal,Store 3,131
Exchange,VIP,Bank Transfer,Store 2,227
Cancel,Returning,Cash,Store 3,143
Cancel,Returning,Credit Card,Store 1,223
Purchase,VIP,PayPal,Store 3,400
Exchange,VIP,Bank Transfer,Store 2,27
Purchase,New,PayPal,Store 1,328
Exchange,New,Credit Card,Store 2,12
Purchase,New,PayPal,Store 1,201
Refund,Returning,Cash,Store 3,165
Refund,VIP,Bank Transfer,Store 1,318
Purchase,Returning,PayPal,Store 1,315
Exchange,VIP,Credit Card,Store 1,39
Exchange,VIP,PayPal,Store 1,196
Purchase,New,PayPal,Store 3,371
Refund,Returning,Credit Card,Store 3,46
Exchange,New,Cash,Store 2,98
Cancel,New,Bank Transfer,Store 3,208
Purchase,New,PayPal,Store 2,421
Refund,VIP,Cash,Store 2,454
Exchange,New,PayPal,Store 1,363
Cancel,VIP,Cash,Store 1,112
Cancel,New,Cash,Store 3,490
Refund,New,Credit Card,Store 1,373
Refund,Returning,PayPal,Store 1,271
Purchase,New,Credit Card,Store 2,148
Refund,New,Bank Transfer,Store 1,477
Cancel,Returning,Credit Card,Store 1,457
Purchase,New,Cash,Store 1,366
Purchase,VIP,Credit Card,Store 1,165
Cancel,New,Cash,Store 1,207
Cancel,Returning,Bank Transfer,Store 2,441
Exchange,New,PayPal,Store 1,331
Purchase,New,Credit Card,Store 2,85
Purchase,Returning,Bank Transfer,Store 2,319
Refund,Returning,Cash,Store 2,78
Purchase,VIP,Bank Transfer,Store 2,213
Purchase,New,Cash,Store 3,399
Exchange,New,Credit Card,Store 2,462
Exchange,VIP,Credit Card,Store 1,302
Refund,VIP,Bank Transfer,Store 3,449
Exchange,VIP,Credit Card,Store 2,49
Cancel,VIP,Cash,Store 3,204
Cancel,VIP,Cash,Store 1,239
Exchange,VIP,Credit Card,Store 2,134
Purchase,VIP,Bank Transfer,Store 1,436
Exchange,New,Credit Card,Store 3,460
Refund,New,Credit Card,Store 1,192
Purchase,Returning,Cash,Store 1,315
Cancel,Returning,Bank Transfer,Store 1,243
Exchange,VIP,PayPal,Store 2,354
Refund,New,Cash,Store 2,116
Exchange,VIP,PayPal,Store 2,13
Purchase,VIP,Credit Card,Store 2,437
Refund,Returning,Bank Transfer,Store 3,129
Cancel,Returning,Credit Card,Store 2,451
Cancel,VIP,Cash,Store 3,246
Refund,VIP,Cash,Store 2,462
Purchase,Returning,PayPal,Store 2,309
Cancel,Returning,Credit Card,Store 2,234
Exchange,VIP,Credit Card,Store 3,231
Refund,New,Credit Card,Store 1,359
Purchase,New,PayPal,Store 3,87
Purchase,New,PayPal,Store 1,462
Purchase,New,Credit Card,Store 3,414
Refund,New,Cash,Store 2,305
Cancel,New,Cash,Store 2,474
Refund,Returning,Cash,Store 1,322
Cancel,Returning,Credit Card,Store 2,90
Exchange,VIP,Cash,Store 2,364
Cancel,Returning,Credit Card,Store 1,249
Refund,New,Cash,Store 1,43
Purchase,New,Cash,Store 3,134
Refund,VIP,Bank Transfer,Store 3,428
Exchange,Returning,Bank Transfer,Store 1,369
Cancel,New,Credit Card,Store 1,104
Cancel,VIP,Cash,Store 1,12
Refund,Returning,Credit Card,Store 2,494
Refund,Returning,Cash,Store 1,465
Purchase,VIP,Cash,Store 3,85
Exchange,New,Credit Card,Store 1,78
Exchange,New,Bank Transfer,Store 1,182
Exchange,VIP,Cash,Store 3,218
Purchase,Returning,Credit Card,Store 3,300
Exchange,New,Bank Transfer,Store 2,392
Cancel,Returning,Cash,Store 2,406
Refund,VIP,Credit Card,Store 2,200
Purchase,VIP,Cash,Store 1,280
Refund,VIP,Cash,Store 2,391
Exchange,VIP,Cash,Store 3,400
Exchange,Returning,Bank Transfer,Store 3,443
Exchange,Returning,Credit Card,Store 3,103
Cancel,VIP,Cash,Store 2,32
Exchange,VIP,Credit Card,Store 1,144
Refund,New,PayPal,Store 2,81
Purchase,New,Credit Card,Store 1,491
Purchase,New,PayPal,Store 1,12
Exchange,New,Credit Card,Store 3,478
Exchange,New,Credit Card,Store 3,178
Cancel,VIP,Cash,Store 1,372
Cancel,VIP,Bank Transfer,Store 3,443
Exchange,New,Bank Transfer,Store 3,136
Cancel,Returning,PayPal,Store 1,231
Exchange,New,PayPal,Store 1,126
Refund,New,Credit Card,Store 2,65
Refund,Returning,Bank Transfer,Store 2,413
Refund,Returning,Cash,Store 3,59
Purchase,VIP,Credit Card,Store 1,387
Purchase,VIP,Cash,Store 1,488
Cancel,Returning,Bank Transfer,Store 2,357
Cancel,Returning,Cash,Store 1,286
Purchase,New,Credit Card,Store 2,243
Cancel,Returning,Cash,Store 3,12
Cancel,New,Bank Transfer,Store 1,238
Cancel,Returning,Credit Card,Store 3,180
Cancel,New,PayPal,Store 3,299
Refund,VIP,Bank Transfer,Store 3,34
Cancel,New,Bank Transfer,Store 2,101
Refund,New,Bank Transfer,Store 3,21
Purchase,Returning,Credit Card,Store 1,36
Purchase,VIP,PayPal,Store 3,234
Exchange,New,Bank Transfer,Store 1,101
Cancel,VIP,Bank Transfer,Store 2,24
Refund,VIP,Bank Transfer,Store 3,269
Purchase,New,Bank Transfer,Store 2,467
Exchange,Returning,PayPal,Store 1,183
Exchange,VIP,Credit Card,Store 3,89
Cancel,VIP,Credit Card,Store 3,238
Purchase,VIP,Cash,Store 1,25
Refund,Returning,Credit Card,Store 2,142
Purchase,Returning,Credit Card,Store 1,210
Cancel,VIP,PayPal,Store 2,288
Exchange,New,Bank Transfer,Store 2,324
Refund,Returning,Cash,Store 3,88
Cancel,VIP,Cash,Store 3,423
Cancel,New,PayPal,Store 1,334
Cancel,Returning,Cash,Store 3,385
Cancel,Returning,Credit Card,Store 2,423
Refund,VIP,Cash,Store 2,396
Refund,VIP,Bank Transfer,Store 3,153
Cancel,VIP,Cash,Store 1,238
Exchange,New,Bank Transfer,Store 2,245
Exchange,Returning,PayPal,Store 3,296
Exchange,New,Credit Card,Store 1,211
Cancel,VIP,Bank Transfer,Store 3,174
Purchase,Returning,Cash,Store 2,317
Cancel,Returning,PayPal,Store 1,158
Cancel,Returning,Cash,Store 1,201
Exchange,VIP,Cash,Store 3,294
Cancel,VIP,PayPal,Store 3,279
Purchase,New,Bank Transfer,Store 3,287
Refund,Returning,Bank Transfer,Store 1,297
Refund,VIP,Cash,Store 3,19
Purchase,Returning,Cash,Store 2,91
Cancel,New,Bank Transfer,Store 3,50
Refund,Returning,Cash,Store 2,107
Exchange,VIP,Cash,Store 1,339
Refund,New,Cash,Store 1,130
Purchase,New,Cash,Store 1,171
Purchase,VIP,Credit Card,Store 2,110
Refund,Returning,Cash,Store 1,307
Purchase,New,Bank Transfer,Store 1,50
Cancel,VIP,PayPal,Store 3,251
Exchange,VIP,Cash,Store 3,36
Purchase,New,PayPal,Store 3,372
Exchange,Returning,Bank Transfer,Store 1,347
Refund,Returning,PayPal,Store 2,484
Purchase,Returning,PayPal,Store 3,59
Exchange,Returning,Cash,Store 2,469
Cancel,Returning,Credit Card,Store 2,388
Refund,Returning,Credit Card,Store 3,74
Refund,New,Bank Transfer,Store 1,91
Cancel,Returning,Cash,Store 3,427
Refund,VIP,Bank Transfer,Store 3,454
Refund,VIP,Bank Transfer,Store 3,449
Cancel,VIP,PayPal,Store 1,258
Purchase,New,Credit Card,Store 3,16
Refund,New,Cash,Store 1,72
Refund,New,Cash,Store 2,497
Refund,VIP,Credit Card,Store 1,288
Purchase,VIP,PayPal,Store 3,456
Exchange,New,Cash,Store 1,42
Exchange,Returning,Cash,Store 2,463
Purchase,Returning,Bank Transfer,Store 3,376
Purchase,VIP,Bank Transfer,Store 2,197
Refund,Returning,PayPal,Store 1,250
Purchase,VIP,Credit Card,Store 3,166
Refund,New,PayPal,Store 3,235
Exchange,New,PayPal,Store 3,215
Purchase,Returning,Bank Transfer,Store 3,129
Exchange,VIP,Cash,Store 3,44
Cancel,New,Credit Card,Store 3,291
Purchase,New,PayPal,Store 2,475
Exchange,VIP,Bank Transfer,Store 3,276
Purchase,New,Bank Transfer,Store 2,492
Purchase,VIP,Cash,Store 3,489
Exchange,New,Cash,Store 3,348
Purchase,Returning,Credit Card,Store 2,420
Refund,New,Bank Transfer,Store 3,307
Exchange,New,PayPal,Store 3,406
Cancel,New,Bank Transfer,Store 3,450
Refund,New,Credit Card,Store 1,312
Purchase,VIP,Cash,Store 2,157
Exchange,New,Bank Transfer,Store 3,177
Exchange,Returning,Cash,Store 3,359
Purchase,New,Cash,Store 3,452
Refund,Returning,Credit Card,Store 3,146
Exchange,New,Bank Transfer,Store 2,90
Refund,Returning,Bank Transfer,Store 2,140
Refund,VIP,Credit Card,Store 3,181
Exchange,Returning,Bank Transfer,Store 3,12
Exchange,New,Credit Card,Store 3,25
Exchange,New,Credit Card,Store 2,254
Cancel,Returning,Cash,Store 2,47
Refund,VIP,PayPal,Store 1,197
Refund,VIP,PayPal,Store 3,123
Cancel,VIP,PayPal,Store 1,392
Purchase,VIP,PayPal,Store 2,364
Exchange,VIP,Bank Transfer,Store 1,145
Cancel,New,Bank Transfer,Store 3,189
Exchange,Returning,Cash,Store 1,30
Purchase,VIP,PayPal,Store 1,439
Refund,New,PayPal,Store 1,201
Purchase,Returning,Credit Card,Store 1,346
Cancel,VIP,Cash,Store 3,277
Cancel,VIP,PayPal,Store 1,19
Exchange,Returning,Bank Transfer,Store 2,350
Cancel,VIP,Bank Transfer,Store 2,244

</script><script type="text/plain" id="subframe" data-format="csv_embedded" data-src="">
x,y,group,z
1,1,A,0.15594369476537437
2,1,A,-0.6172728764571667
3,1,A,-0.9997860728793259
4,1,A,-0.5557653904191477
5,1,A,0.37706981246168597
6,1,A,0.9799824974549554
1,2,A,-0.6172728764571667
2,2,A,-0.9513631281258474
3,2,A,-0.894288058558276
4,2,A,-0.2379483919805909
5,2,A,0.6231593449762197
6,2,A,0.9991443830469295
1,3,A,-0.9997860728793259
2,3,A,-0.894288058558276
3,3,A,-0.4526618572923528
4,3,A,0.28366218546322625
5,3,A,0.8994733999984659
6,3,A,0.9110310531896002
1,4,A,-0.5557653904191477
2,4,A,-0.2379483919805909
3,4,A,0.28366218546322625
4,4,A,0.8101836031147954
5,4,A,0.9928159447966954
6,4,A,0.5995022633598608
1,5,A,0.37706981246168597
2,5,A,0.6231593449762197
3,5,A,0.8994733999984659
4,5,A,0.9928159447966954
5,5,A,0.7053479063084421
6,5,A,0.04371801995456107
1,6,A,0.9799824974549554
2,6,A,0.9991443830469295
3,6,A,0.9110310531896002
4,6,A,0.5995022633598608
5,6,A,0.04371801995456107
6,6,A,-0.5901944859052752
1,1,B,-0.8440563052346256
2,1,B,-1.6172728764571667
3,1,B,-1.999786072879326
4,1,B,-1.5557653904191477
5,1,B,-0.622930187538314
6,1,B,-0.02001750254504464
1,2,B,-1.1605565385746905
2,2,B,-1.769905729749893
3,2,B,-1.9847209431240276
4,2,B,-1.4526618572923529
5,2,B,-0.5348859483071466
6,2,B,-0.007045023716309329
1,3,B,-1.4161468365471424
2,3,B,-1.8795687341082288
3,3,B,-1.9484431958418278
4,3,B,-1.346174157871352
5,3,B,-0.45271768395849554
6,3,B,-0.0007290466739067192
1,4,B,-1.6172728764571667
2,4,B,-1.9513631281258474
3,4,B,-1.894288058558276
4,4,B,-1.237948391980591
5,4,B,-0.3768406550237803
6,4,B,-0.0008556169530704594
1,5,B,-1.769905729749893
2,5,B,-1.9899924966004454
3,5,B,-1.8252990620752587
4,5,B,-1.1294490013073428
5,5,B,-0.3075808884062521
6,5,B,-0.007184055203304562
1,6,B,-1.8795687341082288
2,6,B,-1.999786072879326
3,6,B,-1.7442462713722906
4,6,B,-1.021971452410018
5,6,B,-0.24518280412638171
6,6,B,-0.019450682346141668
1,1,C,1.1559436947653743
2,1,C,0.38272712354283334
3,1,C,0.00021392712067414
4,1,C,0.44423460958085226
5,1,C,1.377069812461686
6,1,C,1.9799824974549554
1,2,C,1.0170215307092125
2,2,C,0.3139470657369108
3,2,C,0.0036540443554032853
4,2,C,0.48641743614550437
5,2,C,1.4142212387971869
6,2,C,1.986175939144255
1,3,C,0.9179968609607547
2,3,C,0.2665566278409074
3,3,C,0.009016517099134758
4,3,C,0.519307022323508
5,3,C,1.4420795294939195
6,3,C,1.990140036061585
1,4,C,0.8394434614253095
2,4,C,0.2300942702501071
3,4,C,0.015279056875972419
4,4,C,0.5473381427076471
5,4,C,1.4651140516928534
6,4,C,1.9929549762836907
1,5,C,0.7738620277177296
2,5,C,0.20052801164655532
3,5,C,0.022059190682766516
4,5,C,0.5722355793970464
5,5,C,1.485058145415328
6,5,C,1.9950387168674295
1,6,C,0.7174188421724267
2,6,C,0.17579990271593138
3,6,C,0.02916737260633384
4,6,C,0.5948873339246776
5,6,C,1.502801829878708
6,6,C,1.9966053897707945
1,1,D,0.0
2,1,D,0.41421356237309515
3,1,D,0.7320508075688772
4,1,D,1.0
5,1,D,1.2360679774997898
6,1,D,1.4494897427831779
1,2,D,-0.41421356237309515
2,2,D,0.0
3,2,D,0.31783724519578205
4,2,D,0.5857864376269049
5,2,D,0.8218544151266947
6,2,D,1.0352761804100827
1,3,D,-0.7320508075688772
2,3,D,-0.31783724519578205
3,3,D,0.0
4,3,D,0.2679491924311228
5,3,D,0.5040171699309126
6,3,D,0.7174389352143007
1,4,D,-1.0
2,4,D,-0.5857864376269049
3,4,D,-0.2679491924311228
4,4,D,0.0
5,4,D,0.2360679774997898
6,4,D,0.4494897427831779
1,5,D,-1.2360679774997898
2,5,D,-0.8218544151266947
3,5,D,-0.5040171699309126
4,5,D,-0.2360679774997898
5,5,D,0.0
6,5,D,0.21342176528338808
1,6,D,-1.4494897427831779
2,6,D,-1.0352761804100827
3,6,D,-0.7174389352143007
4,6,D,-0.4494897427831779
5,6,D,-0.21342176528338808
6,6,D,0.0

</script><script type="text/plain" id="df_combined" data-format="csv_embedded" data-src="">
date,x,y,color,categ,categ22
2024-01-01,1,0.48353221503759536,A,B,Category_A
2024-01-02,2,0.09441600827458696,B,B,Category_A
2024-01-03,3,0.2841384879055001,A,B,Category_A
2024-01-04,4,0.21219256896440775,B,B,Category_A
2024-01-05,5,0.7859133151162621,A,B,Category_A
2024-01-06,6,0.46322624434463866,B,A,Category_A
2024-01-07,7,0.8387911118675132,A,A,Category_A
2024-01-08,8,0.7138075310188128,B,A,Category_A
2024-01-09,9,0.004839178023365309,A,A,Category_A
2024-01-10,10,0.3884410116489144,B,C,Category_A
2024-01-01,1,0.9794769693143522,A,A,Category_B
2024-01-02,2,0.922694500190609,B,A,Category_B
2024-01-03,3,0.0547365519751698,A,A,Category_B
2024-01-04,4,0.508253332528251,B,A,Category_B
2024-01-05,5,0.7119603991011358,A,A,Category_B
2024-01-06,6,0.4331623119208494,B,B,Category_B
2024-01-07,7,0.7014310838197094,A,B,Category_B
2024-01-08,8,0.5690885453595721,B,B,Category_B
2024-01-09,9,0.2905435807512009,A,B,Category_B
2024-01-10,10,0.8101716246274995,B,C,Category_B

</script>

<!-- ACTUAL CONTENT -->

<h1></h1>
<p></p>

    <div class="textblock-content">
        <h1>PivotTable Examples</h1>
<p>This page demonstrates the key features of interactive PivotTable plots in JSPlots.</p>
<ul>
    <li><strong>Basic pivot:</strong> Simple data aggregation with drag-and-drop</li>
    <li><strong>Custom heatmaps:</strong> Color-coded matrices with custom color scales</li>
    <li><strong>Different renderers:</strong> Table, Bar Chart, Line Chart, and more</li>
    <li><strong>Data filtering:</strong> Inclusions and exclusions to focus on specific data</li>
    <li><strong>Aggregations:</strong> Sum, Average, Count, and other aggregation functions</li>
    <li><strong>Combined with other plots:</strong> Mix PivotTables with LineCharts and 3D plots</li>
</ul>
<p><em>Tip: Drag and drop fields between Rows, Columns, and Values to reorganize!</em></p>

    </div>
<br>
<hr>
<br>
    <h2>sales_pivot</h2>
    <p>Basic pivot table - drag fields to reorganize rows and columns</p>
    <div id="sales_pivot"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: sales_data</p><br>
<hr>
<br>
    <h2>performance_heatmap</h2>
    <p>Custom color scale heatmap - green indicates good performance, red needs improvement</p>
    <div id="performance_heatmap"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: performance_data</p><br>
<hr>
<br>
    <h2>revenue_by_category</h2>
    <p>Bar chart renderer - switch renderer in the dropdown to see other visualizations</p>
    <div id="revenue_by_category"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: product_data</p><br>
<hr>
<br>
    <h2>customer_revenue</h2>
    <p>Exclusions feature - 'Test' country data is automatically filtered out</p>
    <div id="customer_revenue"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: customer_data</p><br>
<hr>
<br>
    <h2>survey_results</h2>
    <p>Inclusions feature - only showing ages 18-45, filtering out older demographics</p>
    <div id="survey_results"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: survey_data</p><br>
<hr>
<br>
    <h2>transaction_analysis</h2>
    <p>Count aggregation - showing transaction counts rather than sums or averages</p>
    <div id="transaction_analysis"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: transaction_data</p><br>
<hr>
<br>
    <h2>Returns_Over_Last_Few_Days</h2>
    <p>Stock returns heatmap with MSFT excluded</p>
    <div id="Returns_Over_Last_Few_Days"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: stockReturns</p><br>
<hr>
<br>
    <h2>Correlation_Matrix</h2>
    <p>Correlation matrix with custom red-white-blue color scale</p>
    <div id="Correlation_Matrix"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: correlations</p><br>
<hr>
<br>
<h2>Line Chart with Filters</h2>
<p>Interactive line chart with dropdown filters - combine with PivotTables!</p>

<!-- Filters (for data filtering) -->
<div style="margin-bottom: 15px; padding: 10px; border: 1px solid #ddd; background-color: #f9f9f9;">
            <h4 style="margin-top: 0;">Filters</h4>
                    <div style="margin: 10px;">
            <label for="categ22_select">categ22: </label>
            <select id="categ22_select" multiple style="min-width: 150px; height: 100px;" onchange="updateChart_pchart()">
                <option value="Category_A" selected>Category_A</option>
                <option value="Category_B">Category_B</option>
            </select>
        </div>
                <div style="margin: 10px;">
            <label for="categ_select">categ: </label>
            <select id="categ_select" multiple style="min-width: 150px; height: 100px;" onchange="updateChart_pchart()">
                <option value="B">B</option>
                <option value="A" selected>A</option>
                <option value="C">C</option>
            </select>
        </div>
        
        </div>

<!-- Plot Attributes (x, y, color, aggregator) -->
<div style="margin-bottom: 15px; padding: 10px; border: 1px solid #ddd; background-color: #f0f8ff;">
            <h4 style="margin-top: 0;">Plot Attributes</h4>
                <div style="margin: 10px;">
        <label for="aggregator_select_pchart">Aggregator: </label>
        <select id="aggregator_select_pchart" onchange="updateChart_pchart()">
                <option value="none" selected>none</option>
                <option value="mean">mean</option>
                <option value="median">median</option>
                <option value="count">count</option>
                <option value="min">min</option>
                <option value="max">max</option>
        </select>
    </div>
    
        </div>

<!-- Faceting -->


<!-- Chart -->
<div id="pchart"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: df_combined</p><br>
<hr>
<br>
<h2>3D Surface Chart</h2>
<p>3D surface visualization grouped by mathematical functions</p>

<!-- Filters (for data filtering) -->


<!-- Chart -->
<div id="threeD"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: subframe</p><br>
<hr>
<br>
    <div class="textblock-content">
        <h2>Key Features Summary</h2>
<ul>
    <li><strong>Drag-and-drop interface:</strong> Reorganize data dynamically by dragging fields</li>
    <li><strong>Multiple renderers:</strong> Table, Heatmap, Bar Chart, Line Chart, and more</li>
    <li><strong>Custom color scales:</strong> Define your own color gradients for heatmaps</li>
    <li><strong>Aggregation functions:</strong> Sum, Average, Count, Median, Min, Max, etc.</li>
    <li><strong>Data filtering:</strong> Include or exclude specific values</li>
    <li><strong>Multi-level grouping:</strong> Use multiple row or column dimensions</li>
    <li><strong>Integration:</strong> Combine PivotTables with LineCharts, 3D plots, and more</li>
</ul>
<p><strong>Tip:</strong> Try dragging unused fields from the top into Rows or Columns!</p>

    </div>


<hr><p align="right"><small>This page was created using <a href="https://github.com/s-baumann/JSPlots.jl">JSPlots.jl</a>.</small></p>
</body>
</html>
