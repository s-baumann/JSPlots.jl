<!DOCTYPE html>
<html>
<head>
    <title>PivotTable Examples</title>
    <meta charset="UTF-8">
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apache-arrow@14.0.1/Arrow.es2015.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        #controls {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 20px;
            padding: 10px;
            background-color: #f0f0f0;
            border-radius: 5px;
        }
        #$div_id {
            width: 100%;
            height: 600px;
        }
    </style>
        <style>
        .textblock-content {
            padding: 20px;
            margin: 10px 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: #333;
        }

        .textblock-content h1 {
            font-size: 2em;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
            font-weight: 600;
        }

        .textblock-content h2 {
            font-size: 1.5em;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
            font-weight: 600;
        }

        .textblock-content h3 {
            font-size: 1.25em;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
            font-weight: 600;
        }

        .textblock-content p {
            margin: 0.5em 0;
        }

        .textblock-content ul, .textblock-content ol {
            margin: 0.5em 0;
            padding-left: 2em;
        }

        .textblock-content code {
            background-color: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .textblock-content pre {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }

        .textblock-content pre code {
            background-color: transparent;
            padding: 0;
        }

        .textblock-content blockquote {
            border-left: 4px solid #ddd;
            padding-left: 1em;
            margin-left: 0;
            color: #666;
        }

        .textblock-content a {
            color: #0066cc;
            text-decoration: none;
        }

        .textblock-content a:hover {
            text-decoration: underline;
        }

        .textblock-content table {
            border-collapse: collapse;
            width: 100%;
            margin: 1em 0;
        }

        .textblock-content th, .textblock-content td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        .textblock-content th {
            background-color: #f5f5f5;
            font-weight: 600;
        }
    </style>


    <!-- external libs -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/0.71/jquery.csv-0.71.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.19.0/pivot.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.19.0/pivot.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.19.0/d3_renderers.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.19.0/c3_renderers.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.19.0/export_renderers.min.js"></script>
</head>

<body>

<script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>

<script type="module">
// Import parquet-wasm for Parquet file support
import * as parquet from 'https://unpkg.com/parquet-wasm@0.6.1/esm/parquet_wasm.js';

// Initialize parquet-wasm
await parquet.default();

// Make parquet available globally for loadDataset
window.parquetWasm = parquet;
window.parquetReady = true;
console.log('Parquet-wasm library loaded successfully');
</script>

<script>
// Helper function to wait for parquet-wasm to be loaded
function waitForParquet() {
    return new Promise(function(resolve) {
        if (window.parquetReady) {
            resolve();
            return;
        }
        var checkInterval = setInterval(function() {
            if (window.parquetReady) {
                clearInterval(checkInterval);
                resolve();
            }
        }, 50);
    });
}

// Centralized data loading function
// This function parses data from embedded or external sources and returns a Promise
// Supports CSV (embedded/external), JSON (embedded/external), and Parquet (external) formats
// Usage: loadDataset('dataLabel').then(function(data) { /* use data */ });
function loadDataset(dataLabel) {
    return new Promise(function(resolve, reject) {
        var dataElement = document.getElementById(dataLabel);
        if (!dataElement) {
            reject(new Error('Data element not found: ' + dataLabel));
            return;
        }

        var format = dataElement.getAttribute('data-format') || 'csv_embedded';
        var dataSrc = dataElement.getAttribute('data-src');

        // Handle external JSON files
        if (format === 'json_external' && dataSrc) {
            fetch(dataSrc)
                .then(function(response) {
                    if (!response.ok) {
                        throw new Error('Failed to load ' + dataSrc + ': ' + response.statusText);
                    }
                    return response.json();
                })
                .then(function(data) {
                    resolve(data);
                })
                .catch(function(error) {
                    console.error('Error loading external JSON:', error);
                    reject(error);
                });
            return;
        }

        // Handle external Parquet files
        if (format === 'parquet' && dataSrc) {
            // Wait for parquet-wasm to be loaded first
            waitForParquet()
                .then(function() {
                    return fetch(dataSrc);
                })
                .then(function(response) {
                    if (!response.ok) {
                        throw new Error('Failed to load ' + dataSrc + ': ' + response.statusText);
                    }
                    return response.arrayBuffer();
                })
                .then(function(arrayBuffer) {
                    // Use parquet-wasm to read the file
                    var uint8Array = new Uint8Array(arrayBuffer);

                    // readParquet returns an Arrow Table
                    var wasmTable = window.parquetWasm.readParquet(uint8Array);

                    // Convert to Arrow IPC stream
                    var ipcStream = wasmTable.intoIPCStream();

                    // Use Apache Arrow JS to read the IPC stream
                    var arrowTable = window.Arrow.tableFromIPC(ipcStream);

                    // Convert Arrow Table to array of JavaScript objects
                    var data = [];
                    for (var i = 0; i < arrowTable.numRows; i++) {
                        var row = {};
                        arrowTable.schema.fields.forEach(function(field) {
                            var column = arrowTable.getChild(field.name);
                            var value = column.get(i);

                            // Convert BigInt to Number (Arrow returns BigInt for Int64)
                            if (typeof value === 'bigint') {
                                value = Number(value);
                            }

                            row[field.name] = value;
                        });
                        data.push(row);
                    }

                    resolve(data);
                })
                .catch(function(error) {
                    console.error('Error loading external Parquet:', error);
                    reject(error);
                });
            return;
        }

        // Handle external CSV files
        if (format === 'csv_external' && dataSrc) {
            fetch(dataSrc)
                .then(function(response) {
                    if (!response.ok) {
                        throw new Error('Failed to load ' + dataSrc + ': ' + response.statusText);
                    }
                    return response.text();
                })
                .then(function(csvText) {
                    Papa.parse(csvText, {
                        header: true,
                        dynamicTyping: true,
                        skipEmptyLines: true,
                        complete: function(results) {
                            // Check for fatal errors only (not warnings)
                            var fatalErrors = results.errors.filter(function(err) {
                                return err.type !== 'Delimiter';
                            });

                            if (fatalErrors.length > 0) {
                                console.error('CSV parsing errors:', fatalErrors);
                                reject(fatalErrors);
                            } else if (results.data && results.data.length > 0) {
                                resolve(results.data);
                            } else {
                                reject(new Error('No data parsed from CSV'));
                            }
                        },
                        error: function(error) {
                            console.error('CSV parsing error:', error);
                            reject(error);
                        }
                    });
                })
                .catch(function(error) {
                    console.error('Error loading external CSV:', error);
                    reject(error);
                });
            return;
        }

        // Handle embedded data
        var dataText = dataElement.textContent.trim();

        if (format === 'json_embedded') {
            // Parse JSON data
            try {
                var data = JSON.parse(dataText);
                resolve(data);
            } catch (error) {
                console.error('JSON parsing error:', error);
                reject(error);
            }
        } else if (format === 'csv_embedded') {
            // Parse CSV data using PapaParse
            Papa.parse(dataText, {
                header: true,
                dynamicTyping: true,
                skipEmptyLines: true,
                complete: function(results) {
                    // Check for fatal errors only (not warnings)
                    // PapaParse includes non-fatal warnings in errors array
                    var fatalErrors = results.errors.filter(function(err) {
                        // Filter out delimiter detection warnings - these aren't fatal
                        // (common for single-column CSVs)
                        return err.type !== 'Delimiter';
                    });

                    if (fatalErrors.length > 0) {
                        console.error('CSV parsing errors:', fatalErrors);
                        reject(fatalErrors);
                    } else if (results.data && results.data.length > 0) {
                        resolve(results.data);
                    } else {
                        reject(new Error('No data parsed from CSV'));
                    }
                },
                error: function(error) {
                    console.error('CSV parsing error:', error);
                    reject(error);
                }
            });
        } else {
            reject(new Error('Unsupported data format: ' + format));
        }
    });
}

$(function(){

    loadDataset('sales_data').then(function(data) {
        console.log('Loaded data for pivot table sales_pivot:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table sales_pivot');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for sales_pivot:', arrayData.slice(0, 3));

        $("#sales_pivot").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Table","rows":["Region"],"aggregatorName":"Sum","vals":["Sales"],"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([-2.5, -1.0, 0.0, 1.0, 2.5]).range(["#FF9999", "#FFFF99", "#FFFFFF", "#99FF99", "#99CCFF"]).clamp(true)}}},"cols":["Month"]})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table sales_pivot:', error);
        $("#sales_pivot").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
    loadDataset('performance_data').then(function(data) {
        console.log('Loaded data for pivot table performance_heatmap:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table performance_heatmap');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for performance_heatmap:', arrayData.slice(0, 3));

        $("#performance_heatmap").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Heatmap","rows":["Employee"],"aggregatorName":"Average","vals":["Score"],"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([50.0, 65.0, 75.0, 85.0, 100.0]).range(["#d73027", "#fee08b", "#ffffbf", "#d9ef8b", "#1a9850"]).clamp(true)}}},"cols":["Quarter"]})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table performance_heatmap:', error);
        $("#performance_heatmap").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
    loadDataset('product_data').then(function(data) {
        console.log('Loaded data for pivot table revenue_by_category:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table revenue_by_category');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for revenue_by_category:', arrayData.slice(0, 3));

        $("#revenue_by_category").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Bar Chart","rows":["Category"],"aggregatorName":"Sum","vals":["Revenue"],"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([-2.5, -1.0, 0.0, 1.0, 2.5]).range(["#FF9999", "#FFFF99", "#FFFFFF", "#99FF99", "#99CCFF"]).clamp(true)}}},"cols":["Quarter"]})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table revenue_by_category:', error);
        $("#revenue_by_category").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
    loadDataset('customer_data').then(function(data) {
        console.log('Loaded data for pivot table customer_revenue:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table customer_revenue');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for customer_revenue:', arrayData.slice(0, 3));

        $("#customer_revenue").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Heatmap","rows":["Country"],"aggregatorName":"Sum","vals":["Revenue"],"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([-2.5, -1.0, 0.0, 1.0, 2.5]).range(["#FF9999", "#FFFF99", "#FFFFFF", "#99FF99", "#99CCFF"]).clamp(true)}}},"cols":["ProductType"],"exclusions":{"Country":["Test"]}})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table customer_revenue:', error);
        $("#customer_revenue").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
    loadDataset('survey_data').then(function(data) {
        console.log('Loaded data for pivot table survey_results:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table survey_results');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for survey_results:', arrayData.slice(0, 3));

        $("#survey_results").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Table Barchart","rows":["Age_Group","Gender"],"aggregatorName":"Average","vals":["Satisfaction"],"inclusions":{"Age_Group":["18-25","26-35","36-45"]},"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([-2.5, -1.0, 0.0, 1.0, 2.5]).range(["#FF9999", "#FFFF99", "#FFFFFF", "#99FF99", "#99CCFF"]).clamp(true)}}},"cols":["Product"]})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table survey_results:', error);
        $("#survey_results").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
    loadDataset('transaction_data').then(function(data) {
        console.log('Loaded data for pivot table transaction_analysis:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table transaction_analysis');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for transaction_analysis:', arrayData.slice(0, 3));

        $("#transaction_analysis").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Heatmap","rows":["Customer_Type"],"aggregatorName":"Count","vals":["Amount"],"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([0.0, 50.0, 100.0, 150.0]).range(["#f7fbff", "#9ecae1", "#4292c6", "#08519c"]).clamp(true)}}},"cols":["Transaction_Type"]})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table transaction_analysis:', error);
        $("#transaction_analysis").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
    loadDataset('stockReturns').then(function(data) {
        console.log('Loaded data for pivot table Returns_Over_Last_Few_Days:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table Returns_Over_Last_Few_Days');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for Returns_Over_Last_Few_Days:', arrayData.slice(0, 3));

        $("#Returns_Over_Last_Few_Days").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Heatmap","rows":["Symbol"],"aggregatorName":"Average","vals":["Return"],"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([-2.5, -1.0, 0.0, 1.0, 2.5]).range(["#FF9999", "#FFFF99", "#FFFFFF", "#99FF99", "#99CCFF"]).clamp(true)}}},"cols":["Date"],"exclusions":{"Symbol":["MSFT"]}})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table Returns_Over_Last_Few_Days:', error);
        $("#Returns_Over_Last_Few_Days").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
    loadDataset('correlations').then(function(data) {
        console.log('Loaded data for pivot table Correlation_Matrix:', data);

        // Validate data
        if (!data || data.length === 0) {
            throw new Error('No data loaded for pivot table Correlation_Matrix');
        }

        // Convert data to array format expected by pivotUI
        // First row is headers
        var headers = Object.keys(data[0]);
        var arrayData = [headers];

        // Add data rows
        data.forEach(function(row) {
            var rowArray = headers.map(function(header) {
                return row[header];
            });
            arrayData.push(rowArray);
        });

        console.log('Converted array data for Correlation_Matrix:', arrayData.slice(0, 3));

        $("#Correlation_Matrix").pivotUI(
            arrayData,
            $.extend({
                renderers: $.extend(
                    $.pivotUtilities.renderers,
                    $.pivotUtilities.c3_renderers,
                    $.pivotUtilities.d3_renderers,
                    $.pivotUtilities.export_renderers
                ),
                hiddenAttributes: [""]
            }, {"rendererName":"Heatmap","rows":["Symbol1"],"aggregatorName":"Average","vals":["Correlation"],"rendererOptions":{ heatmap: { colorScaleGenerator: function(values) { return d3.scale.linear().domain([-1.0, 0.0, 1.0]).range(["#FF4545", "#ffffff", "#4F92FF"]).clamp(true)}}},"cols":["Symbol2"]})
        );
    }).catch(function(error) {
        console.error('Error loading data for pivot table Correlation_Matrix:', error);
        $("#Correlation_Matrix").html('<div style="color: red; padding: 20px;">Error loading pivot table: ' + error.message + '</div>');
    });
(function() {
    // Configuration
    const FILTER_COLS = ['categ22', 'categ'];
    const X_COLS = ['x'];
    const Y_COLS = ['y'];
    const COLOR_COLS = ['color'];
    const COLOR_MAPS = {'color': {'B': '#EF553B', 'A': '#636efa'}};
    const DEFAULT_X_COL = 'x';
    const DEFAULT_Y_COL = 'y';
    const DEFAULT_COLOR_COL = 'color';

    let allData = [];

    // Aggregation functions
    function aggregate(values, method) {
        if (values.length === 0) return null;
        if (method === 'none') return values;
        if (method === 'count') return [values.length];
        if (method === 'mean') {
            const sum = values.reduce((a, b) => a + b, 0);
            return [sum / values.length];
        }
        if (method === 'median') {
            const sorted = [...values].sort((a, b) => a - b);
            const mid = Math.floor(sorted.length / 2);
            return sorted.length % 2 === 0 ?
                [(sorted[mid - 1] + sorted[mid]) / 2] :
                [sorted[mid]];
        }
        if (method === 'min') return [Math.min(...values)];
        if (method === 'max') return [Math.max(...values)];
        return values;
    }

    // Make it global so inline onchange can see it
    window.updateChart_pchart = function() {
        // Get current X and Y columns
        const xColSelect = document.getElementById('x_col_select_pchart');
        const X_COL = xColSelect ? xColSelect.value : DEFAULT_X_COL;

        const yColSelect = document.getElementById('y_col_select_pchart');
        const Y_COL = yColSelect ? yColSelect.value : DEFAULT_Y_COL;

        // Get current filter values (multiple selections)
        const filters = {};
        FILTER_COLS.forEach(col => {
            const select = document.getElementById(col + '_select');
            if (select) {
                filters[col] = Array.from(select.selectedOptions).map(opt => opt.value);
            }
        });

        // Get current color column
        const colorColSelect = document.getElementById('color_col_select_pchart');
        const COLOR_COL = colorColSelect ? colorColSelect.value : DEFAULT_COLOR_COL;

        // Get current aggregator
        const aggregatorSelect = document.getElementById('aggregator_select_pchart');
        const AGGREGATOR = aggregatorSelect ? aggregatorSelect.value : 'none';

        // Get current facet selections
        const facet1Select = document.getElementById('facet1_select_pchart');
        const facet2Select = document.getElementById('facet2_select_pchart');
        const facet1 = facet1Select && facet1Select.value !== 'None' ? facet1Select.value : null;
        const facet2 = facet2Select && facet2Select.value !== 'None' ? facet2Select.value : null;

        // Build FACET_COLS array based on selections
        const FACET_COLS = [];
        if (facet1) FACET_COLS.push(facet1);
        if (facet2) FACET_COLS.push(facet2);

        // Get color map for current selection
        const COLOR_MAP = COLOR_MAPS[COLOR_COL] || {};

        // Filter data (support multiple selections per filter)
        const filteredData = allData.filter(row => {
            for (let col in filters) {
                const selectedValues = filters[col];
                if (selectedValues.length > 0 && !selectedValues.includes(String(row[col]))) {
                    return false;
                }
            }
            return true;
        });

        if (FACET_COLS.length === 0) {
            // No faceting - group by color
            const groupedData = {};
            filteredData.forEach(row => {
                const colorVal = (COLOR_COL === '__no_color__') ? 'all' : String(row[COLOR_COL]);
                if (!groupedData[colorVal]) {
                    groupedData[colorVal] = {
                        data: [],
                        color: colorVal
                    };
                }
                groupedData[colorVal].data.push(row);
            });

            const traces = [];
            for (let groupKey in groupedData) {
                const group = groupedData[groupKey];
                group.data.sort((a, b) => a[X_COL] - b[X_COL]);

                let xValues, yValues;
                if (AGGREGATOR === 'none') {
                    xValues = group.data.map(row => row[X_COL]);
                    yValues = group.data.map(row => row[Y_COL]);
                } else {
                    // Group by x value and aggregate
                    const xGroups = {};
                    group.data.forEach(row => {
                        const xVal = row[X_COL];
                        if (!xGroups[xVal]) xGroups[xVal] = [];
                        xGroups[xVal].push(row[Y_COL]);
                    });

                    xValues = [];
                    yValues = [];
                    // Sort keys - try numeric sort first, fall back to string sort
                    const sortedKeys = Object.keys(xGroups).sort((a, b) => {
                        const aNum = parseFloat(a);
                        const bNum = parseFloat(b);
                        if (!isNaN(aNum) && !isNaN(bNum)) {
                            return aNum - bNum;
                        }
                        return String(a).localeCompare(String(b));
                    });

                    sortedKeys.forEach(xVal => {
                        const aggregated = aggregate(xGroups[xVal], AGGREGATOR);
                        if (aggregated && aggregated.length > 0) {
                            // Keep original value type (don't force to float for strings)
                            const numVal = parseFloat(xVal);
                            xValues.push(isNaN(numVal) ? xVal : numVal);
                            yValues.push(aggregated[0]);
                        }
                    });
                }

                traces.push({
                    x: xValues,
                    y: yValues,
                    type: 'scatter',
                    mode: 'lines+markers',
                    name: group.color,
                    line: {
                        color: COLOR_MAP[group.color] || '#000000',
                        width: 1
                    },
                    marker: { size: 1 }
                });
            }

            const layout = {
                xaxis: { title: X_COL },
                yaxis: { title: Y_COL },
                hovermode: 'closest',
                showlegend: true
            };

            Plotly.newPlot('pchart', traces, layout, {responsive: true});

        } else if (FACET_COLS.length === 1) {
            // Facet wrap
            const facetCol = FACET_COLS[0];
            const facetValues = [...new Set(filteredData.map(row => row[facetCol]))].sort();
            const nFacets = facetValues.length;

            // Calculate grid dimensions (prefer wider grids)
            const nCols = Math.ceil(Math.sqrt(nFacets * 1.5));
            const nRows = Math.ceil(nFacets / nCols);

            const traces = [];
            const layout = {
                hovermode: 'closest',
                showlegend: true,
                grid: {rows: nRows, columns: nCols, pattern: 'independent'}
            };

            facetValues.forEach((facetVal, idx) => {
                const facetData = filteredData.filter(row => row[facetCol] === facetVal);

                // Group by color within this facet
                const groupedData = {};
                facetData.forEach(row => {
                    const colorVal = (COLOR_COL === '__no_color__') ? 'all' : String(row[COLOR_COL]);
                    if (!groupedData[colorVal]) {
                        groupedData[colorVal] = {
                            data: [],
                            color: colorVal
                        };
                    }
                    groupedData[colorVal].data.push(row);
                });

                const row = Math.floor(idx / nCols) + 1;
                const col = (idx % nCols) + 1;
                const xaxis = idx === 0 ? 'x' : 'x' + (idx + 1);
                const yaxis = idx === 0 ? 'y' : 'y' + (idx + 1);

                for (let groupKey in groupedData) {
                    const group = groupedData[groupKey];
                    group.data.sort((a, b) => a[X_COL] - b[X_COL]);

                    let xValues, yValues;
                    if (AGGREGATOR === 'none') {
                        xValues = group.data.map(row => row[X_COL]);
                        yValues = group.data.map(row => row[Y_COL]);
                    } else {
                        // Group by x value and aggregate
                        const xGroups = {};
                        group.data.forEach(row => {
                            const xVal = row[X_COL];
                            if (!xGroups[xVal]) xGroups[xVal] = [];
                            xGroups[xVal].push(row[Y_COL]);
                        });

                        xValues = [];
                        yValues = [];
                        // Sort keys - try numeric sort first, fall back to string sort
                        const sortedKeys = Object.keys(xGroups).sort((a, b) => {
                            const aNum = parseFloat(a);
                            const bNum = parseFloat(b);
                            if (!isNaN(aNum) && !isNaN(bNum)) {
                                return aNum - bNum;
                            }
                            return String(a).localeCompare(String(b));
                        });

                        sortedKeys.forEach(xVal => {
                            const aggregated = aggregate(xGroups[xVal], AGGREGATOR);
                            if (aggregated && aggregated.length > 0) {
                                // Keep original value type (don't force to float for strings)
                                const numVal = parseFloat(xVal);
                                xValues.push(isNaN(numVal) ? xVal : numVal);
                                yValues.push(aggregated[0]);
                            }
                        });
                    }

                    const legendGroup = group.color;

                    traces.push({
                        x: xValues,
                        y: yValues,
                        type: 'scatter',
                        mode: 'lines+markers',
                        name: group.color,
                        legendgroup: legendGroup,
                        showlegend: idx === 0,
                        xaxis: xaxis,
                        yaxis: yaxis,
                        line: {
                            color: COLOR_MAP[group.color] || '#000000',
                            width: 1
                        },
                        marker: { size: 1 }
                    });
                }

                // Add axis configuration
                layout[xaxis] = {
                    title: row === nRows ? X_COL : '',
                    anchor: yaxis
                };
                layout[yaxis] = {
                    title: col === 1 ? Y_COL : '',
                    anchor: xaxis
                };

                // Add annotation for facet label
                if (!layout.annotations) layout.annotations = [];
                layout.annotations.push({
                    text: facetCol + ': ' + facetVal,
                    showarrow: false,
                    xref: xaxis === 'x' ? 'x domain' : xaxis + ' domain',
                    yref: yaxis === 'y' ? 'y domain' : yaxis + ' domain',
                    x: 0.5,
                    y: 1.05,
                    xanchor: 'center',
                    yanchor: 'bottom',
                    font: {size: 10}
                });
            });

            Plotly.newPlot('pchart', traces, layout, {responsive: true});

        } else {
            // Facet grid (2 facet columns)
            const facetRow = FACET_COLS[0];
            const facetCol = FACET_COLS[1];
            const rowValues = [...new Set(filteredData.map(row => row[facetRow]))].sort();
            const colValues = [...new Set(filteredData.map(row => row[facetCol]))].sort();
            const nRows = rowValues.length;
            const nCols = colValues.length;

            const traces = [];
            const layout = {
                hovermode: 'closest',
                showlegend: true,
                grid: {rows: nRows, columns: nCols, pattern: 'independent'}
            };

            rowValues.forEach((rowVal, rowIdx) => {
                colValues.forEach((colVal, colIdx) => {
                    const facetData = filteredData.filter(row =>
                        row[facetRow] === rowVal && row[facetCol] === colVal
                    );

                    // Group by color within this facet
                    const groupedData = {};
                    facetData.forEach(row => {
                        const colorVal = (COLOR_COL === '__no_color__') ? 'all' : String(row[COLOR_COL]);
                        if (!groupedData[colorVal]) {
                            groupedData[colorVal] = {
                                data: [],
                                color: colorVal
                            };
                        }
                        groupedData[colorVal].data.push(row);
                    });

                    const idx = rowIdx * nCols + colIdx;
                    const xaxis = idx === 0 ? 'x' : 'x' + (idx + 1);
                    const yaxis = idx === 0 ? 'y' : 'y' + (idx + 1);

                    for (let groupKey in groupedData) {
                        const group = groupedData[groupKey];
                        group.data.sort((a, b) => a[X_COL] - b[X_COL]);

                        let xValues, yValues;
                        if (AGGREGATOR === 'none') {
                            xValues = group.data.map(row => row[X_COL]);
                            yValues = group.data.map(row => row[Y_COL]);
                        } else {
                            // Group by x value and aggregate
                            const xGroups = {};
                            group.data.forEach(row => {
                                const xVal = row[X_COL];
                                if (!xGroups[xVal]) xGroups[xVal] = [];
                                xGroups[xVal].push(row[Y_COL]);
                            });

                            xValues = [];
                            yValues = [];
                            const sortedKeys = Object.keys(xGroups).sort((a, b) => {
                                const aNum = parseFloat(a);
                                const bNum = parseFloat(b);
                                if (!isNaN(aNum) && !isNaN(bNum)) {
                                    return aNum - bNum;
                                }
                                return String(a).localeCompare(String(b));
                            });

                            sortedKeys.forEach(xVal => {
                                const aggregated = aggregate(xGroups[xVal], AGGREGATOR);
                                if (aggregated && aggregated.length > 0) {
                                    const numVal = parseFloat(xVal);
                                    xValues.push(isNaN(numVal) ? xVal : numVal);
                                    yValues.push(aggregated[0]);
                                }
                            });
                        }

                        const legendGroup = group.color;

                        traces.push({
                            x: xValues,
                            y: yValues,
                            type: 'scatter',
                            mode: 'lines+markers',
                            name: group.color,
                            legendgroup: legendGroup,
                            showlegend: idx === 0,
                            xaxis: xaxis,
                            yaxis: yaxis,
                            line: {
                                color: COLOR_MAP[group.color] || '#000000',
                                width: 1
                            },
                            marker: { size: 1 }
                        });
                    }

                    // Add axis configuration
                    layout[xaxis] = {
                        title: rowIdx === nRows - 1 ? X_COL : '',
                        anchor: yaxis
                    };
                    layout[yaxis] = {
                        title: colIdx === 0 ? Y_COL : '',
                        anchor: xaxis
                    };

                    // Add annotations for facet labels
                    if (!layout.annotations) layout.annotations = [];

                    // Column header
                    if (rowIdx === 0) {
                        layout.annotations.push({
                            text: facetCol + ': ' + colVal,
                            showarrow: false,
                            xref: xaxis === 'x' ? 'x domain' : xaxis + ' domain',
                            yref: yaxis === 'y' ? 'y domain' : yaxis + ' domain',
                            x: 0.5,
                            y: 1.1,
                            xanchor: 'center',
                            yanchor: 'bottom',
                            font: {size: 10}
                        });
                    }

                    // Row label
                    if (colIdx === nCols - 1) {
                        layout.annotations.push({
                            text: facetRow + ': ' + rowVal,
                            showarrow: false,
                            xref: xaxis === 'x' ? 'x domain' : xaxis + ' domain',
                            yref: yaxis === 'y' ? 'y domain' : yaxis + ' domain',
                            x: 1.05,
                            y: 0.5,
                            xanchor: 'left',
                            yanchor: 'middle',
                            textangle: -90,
                            font: {size: 10}
                        });
                    }
                });
            });

            Plotly.newPlot('pchart', traces, layout, {responsive: true});
        }
    };

    // Load and parse CSV data using centralized parser
    loadDataset('df_combined').then(function(data) {
        allData = data;
        window.updateChart_pchart();
    }).catch(function(error) {
        console.error('Error loading data for chart pchart:', error);
    });
})();
    // Load and parse CSV data using centralized parser
    loadDataset('subframe').then(function(data3d) {
        window.allData_threeD = data3d;

        $(function() {
            

            // Initial plot
            updatePlotWithFilters_threeD();
        });
    }).catch(function(error) {
        console.error('Error loading data for chart threeD:', error);
    });

    function updatePlot_threeD(data3d) {
        // ========== 3D SURFACE PLOT CONFIGURATION ==========
        // Define your column names here
        const x = 'x';
        const y = 'y';
        const z = 'z';
        const group = 'group';
        // ===================================================

        // Get unique groups
const uniqueGroups = [...new Set(data3d.map(row => row[group]))].sort();


        // Define a set of distinct color gradients
        const colorGradients = [
            // Blue gradient
            [[0, 'rgb(8,48,107)'], [0.25, 'rgb(33,102,172)'], [0.5, 'rgb(67,147,195)'], [0.75, 'rgb(146,197,222)'], [1, 'rgb(209,229,240)']],
            // Red-Orange gradient
            [[0, 'rgb(127,0,0)'], [0.25, 'rgb(189,0,38)'], [0.5, 'rgb(227,74,51)'], [0.75, 'rgb(252,141,89)'], [1, 'rgb(253,204,138)']],
            // Green gradient
            [[0, 'rgb(0,68,27)'], [0.25, 'rgb(0,109,44)'], [0.5, 'rgb(35,139,69)'], [0.75, 'rgb(116,196,118)'], [1, 'rgb(199,233,192)']],
            // Purple gradient
            [[0, 'rgb(63,0,125)'], [0.25, 'rgb(106,81,163)'], [0.5, 'rgb(158,154,200)'], [0.75, 'rgb(188,189,220)'], [1, 'rgb(218,218,235)']],
            // Yellow-Orange gradient
            [[0, 'rgb(102,37,6)'], [0.25, 'rgb(153,52,4)'], [0.5, 'rgb(217,95,14)'], [0.75, 'rgb(254,153,41)'], [1, 'rgb(254,217,142)']],
            // Teal gradient
            [[0, 'rgb(1,70,54)'], [0.25, 'rgb(1,102,94)'], [0.5, 'rgb(2,129,138)'], [0.75, 'rgb(54,175,172)'], [1, 'rgb(178,226,226)']],
            // Pink-Magenta gradient
            [[0, 'rgb(73,0,106)'], [0.25, 'rgb(123,50,148)'], [0.5, 'rgb(194,165,207)'], [0.75, 'rgb(231,212,232)'], [1, 'rgb(247,242,247)']],
            // Brown gradient
            [[0, 'rgb(84,48,5)'], [0.25, 'rgb(140,81,10)'], [0.5, 'rgb(191,129,45)'], [0.75, 'rgb(223,194,125)'], [1, 'rgb(246,232,195)']],
        ];

        // Function to create z matrix for a group
        function createSurface(groupData, colorscale, name) {
            const xVals = [...new Set(groupData.map(row => parseFloat(row[x])))].sort((a,b) => a-b);
            const yVals = [...new Set(groupData.map(row => parseFloat(row[y])))].sort((a,b) => a-b);

            const zMatrix = [];
            for (let i = 0; i < yVals.length; i++) {
                zMatrix[i] = [];
                for (let j = 0; j < xVals.length; j++) {
                    const point = groupData.find(row =>
                        parseFloat(row[x]) === xVals[j] &&
                        parseFloat(row[y]) === yVals[i]
                    );
                    zMatrix[i][j] = point ? parseFloat(point[z]) : null;
                }
            }

            return {
                z: zMatrix,
                x: xVals,
                y: yVals,
                type: 'surface',
                name: name,
                colorscale: colorscale,
                showscale: false
            };
        }

        // Create a surface for each group
const plotData = uniqueGroups.map((grp, index) => {
    const groupData = data3d.filter(row => row[group] === grp);
    const colorscale = colorGradients[index % colorGradients.length];
    return createSurface(groupData, colorscale, `Group ${grp}`);
});


        const layout = {
            title: '3D Surface Chart',
            autosize: true,
            height: 600,
            scene: {
                xaxis: { title: x },
                yaxis: { title: y },
                zaxis: { title: z }
            },
            showlegend: true,
        };

        Plotly.newPlot('threeD', plotData, layout);
    }

    function updatePlotWithFilters_threeD() {
    updatePlot_threeD(window.allData_threeD);
}



});
</script>

<!-- DATASETS -->

<script type="text/plain" id="performance_data" data-format="csv_embedded" data-src="">
Employee,Quarter,Score,Department
Alice,Q1,64.75897384124943,Sales
Alice,Q2,72.50671218746683,Sales
Alice,Q3,72.82510234178135,Sales
Alice,Q4,88.98602104937308,Sales
Bob,Q1,49.0911409121062,Engineering
Bob,Q2,71.78645610624083,Engineering
Bob,Q3,57.759232370252874,Engineering
Bob,Q4,72.93612961653265,Engineering
Charlie,Q1,66.89320238112687,Sales
Charlie,Q2,72.59712705956576,Sales
Charlie,Q3,68.73292351131781,Sales
Charlie,Q4,69.81474588738085,Sales
Diana,Q1,64.73492407436997,Marketing
Diana,Q2,81.14873191101412,Marketing
Diana,Q3,73.58708962142549,Marketing
Diana,Q4,81.08084491635952,Marketing
Eve,Q1,76.46992422335336,Engineering
Eve,Q2,52.1930640552531,Engineering
Eve,Q3,67.9899041761437,Engineering
Eve,Q4,80.1764200847887,Engineering

</script><script type="text/plain" id="product_data" data-format="csv_embedded" data-src="">
Category,Brand,Revenue,Quarter
Electronics,Brand B,2302,Q1
Clothing,Brand A,8078,Q2
Home,Brand A,1270,Q3
Sports,Brand B,5500,Q4
Books,Brand B,4931,Q1
Electronics,Brand A,3022,Q2
Clothing,Brand B,2569,Q3
Home,Brand B,2651,Q4
Sports,Brand A,9493,Q1
Books,Brand B,3239,Q2
Electronics,Brand D,3577,Q3
Clothing,Brand D,7374,Q4
Home,Brand C,4649,Q1
Sports,Brand A,5920,Q2
Books,Brand C,2313,Q3
Electronics,Brand A,9404,Q4
Clothing,Brand B,7841,Q1
Home,Brand B,8621,Q2
Sports,Brand C,9082,Q3
Books,Brand D,2221,Q4
Electronics,Brand A,1191,Q1
Clothing,Brand B,9831,Q2
Home,Brand B,6608,Q3
Sports,Brand D,2099,Q4
Books,Brand A,1504,Q1
Electronics,Brand A,4720,Q2
Clothing,Brand C,5018,Q3
Home,Brand D,4698,Q4
Sports,Brand C,8817,Q1
Books,Brand C,2536,Q2
Electronics,Brand D,5289,Q3
Clothing,Brand D,2553,Q4
Home,Brand B,5372,Q1
Sports,Brand B,7229,Q2
Books,Brand C,4613,Q3
Electronics,Brand A,5211,Q4
Clothing,Brand D,6563,Q1
Home,Brand D,5442,Q2
Sports,Brand B,5407,Q3
Books,Brand A,8034,Q4
Electronics,Brand A,5512,Q1
Clothing,Brand A,5033,Q2
Home,Brand B,2214,Q3
Sports,Brand C,3787,Q4
Books,Brand A,8915,Q1
Electronics,Brand D,5484,Q2
Clothing,Brand A,7547,Q3
Home,Brand C,3404,Q4
Sports,Brand A,7259,Q1
Books,Brand A,4975,Q2
Electronics,Brand A,9476,Q3
Clothing,Brand C,4896,Q4
Home,Brand A,1070,Q1
Sports,Brand A,1269,Q2
Books,Brand A,1543,Q3
Electronics,Brand B,8416,Q4
Clothing,Brand D,1126,Q1
Home,Brand D,3393,Q2
Sports,Brand B,6439,Q3
Books,Brand C,1075,Q4
Electronics,Brand C,3957,Q1
Clothing,Brand A,4930,Q2
Home,Brand C,6540,Q3
Sports,Brand C,7221,Q4
Books,Brand B,5124,Q1
Electronics,Brand A,7953,Q2
Clothing,Brand D,9923,Q3
Home,Brand C,4848,Q4
Sports,Brand D,6058,Q1
Books,Brand B,1749,Q2
Electronics,Brand A,6560,Q3
Clothing,Brand C,4484,Q4
Home,Brand C,1519,Q1
Sports,Brand D,9671,Q2
Books,Brand B,7695,Q3
Electronics,Brand D,6522,Q4
Clothing,Brand D,4684,Q1
Home,Brand C,5906,Q2
Sports,Brand D,5720,Q3
Books,Brand C,5531,Q4
Electronics,Brand A,7384,Q1
Clothing,Brand A,7136,Q2
Home,Brand A,9734,Q3
Sports,Brand D,3682,Q4
Books,Brand B,5534,Q1
Electronics,Brand C,4455,Q2
Clothing,Brand C,5349,Q3
Home,Brand B,3616,Q4
Sports,Brand B,6984,Q1
Books,Brand C,6219,Q2
Electronics,Brand D,6586,Q3
Clothing,Brand B,7668,Q4
Home,Brand C,1298,Q1
Sports,Brand C,8187,Q2
Books,Brand A,6649,Q3
Electronics,Brand B,1280,Q4
Clothing,Brand B,9133,Q1
Home,Brand A,5805,Q2
Sports,Brand B,8108,Q3
Books,Brand A,3546,Q4

</script><script type="text/plain" id="customer_data" data-format="csv_embedded" data-src="">
Country,ProductType,Channel,Revenue,Year
France,Standard,Online,3707,2022
UK,Budget,Online,2190,2023
France,Budget,Wholesale,1649,2024
France,Budget,Wholesale,985,2022
Germany,Budget,Wholesale,4570,2023
UK,Premium,Retail,1624,2024
USA,Premium,Retail,2365,2022
UK,Standard,Retail,1336,2023
France,Premium,Wholesale,2515,2024
USA,Standard,Wholesale,1818,2022
USA,Standard,Wholesale,3731,2023
UK,Standard,Online,1246,2024
USA,Standard,Wholesale,4678,2022
USA,Budget,Online,4199,2023
Japan,Budget,Online,2528,2024
Japan,Premium,Wholesale,3485,2022
Test,Standard,Wholesale,704,2023
Japan,Standard,Retail,3930,2024
Germany,Budget,Wholesale,3103,2022
Japan,Budget,Retail,917,2023
USA,Premium,Wholesale,1582,2024
USA,Budget,Retail,1556,2022
Test,Standard,Wholesale,2270,2023
Test,Standard,Wholesale,4859,2024
Test,Premium,Retail,2532,2022
USA,Budget,Wholesale,891,2023
Germany,Standard,Wholesale,2063,2024
France,Standard,Online,1077,2022
France,Budget,Wholesale,2185,2023
France,Standard,Wholesale,2141,2024
UK,Premium,Online,1087,2022
Test,Premium,Online,3899,2023
France,Premium,Wholesale,4719,2024
Japan,Premium,Online,1615,2022
USA,Premium,Online,4085,2023
Germany,Premium,Retail,3794,2024
UK,Budget,Online,1854,2022
USA,Standard,Retail,1889,2023
USA,Premium,Retail,4233,2024
Germany,Premium,Wholesale,4776,2022
Germany,Budget,Wholesale,4370,2023
France,Budget,Wholesale,1828,2024
UK,Premium,Wholesale,733,2022
Japan,Standard,Online,1579,2023
UK,Standard,Retail,2964,2024
Test,Premium,Wholesale,2366,2022
Test,Premium,Wholesale,1413,2023
Test,Premium,Retail,2315,2024
Japan,Standard,Online,2618,2022
USA,Budget,Wholesale,4982,2023
USA,Premium,Retail,1774,2024
Test,Standard,Retail,4948,2022
UK,Budget,Online,3390,2023
USA,Premium,Wholesale,2461,2024
Japan,Budget,Online,2957,2022
UK,Premium,Wholesale,4500,2023
USA,Budget,Retail,4004,2024
France,Budget,Retail,2716,2022
France,Budget,Retail,3491,2023
France,Premium,Online,2830,2024
USA,Standard,Retail,3908,2022
France,Premium,Wholesale,2428,2023
France,Standard,Online,1316,2024
USA,Standard,Online,1747,2022
UK,Budget,Online,1109,2023
USA,Premium,Online,1752,2024
USA,Budget,Wholesale,4502,2022
Japan,Standard,Wholesale,4620,2023
France,Premium,Retail,3889,2024
USA,Budget,Online,2478,2022
UK,Standard,Online,3156,2023
Germany,Budget,Online,767,2024
UK,Budget,Retail,4717,2022
Japan,Standard,Retail,1432,2023
USA,Premium,Retail,1929,2024
France,Budget,Retail,3315,2022
UK,Standard,Wholesale,3339,2023
France,Budget,Wholesale,2862,2024
USA,Premium,Wholesale,3133,2022
France,Premium,Wholesale,4152,2023
Test,Standard,Wholesale,3983,2024
France,Budget,Wholesale,2562,2022
UK,Budget,Retail,3688,2023
Japan,Standard,Wholesale,2135,2024
Japan,Standard,Online,1618,2022
Japan,Budget,Retail,3869,2023
Germany,Standard,Online,655,2024
USA,Standard,Online,4880,2022
USA,Budget,Retail,2749,2023
USA,Standard,Online,526,2024
Test,Standard,Online,2749,2022
Japan,Premium,Online,3583,2023
Japan,Standard,Retail,3849,2024
Japan,Premium,Online,2369,2022
UK,Standard,Retail,1230,2023
UK,Budget,Retail,562,2024
UK,Premium,Wholesale,1450,2022
UK,Premium,Online,4593,2023
France,Standard,Online,3401,2024
Japan,Premium,Wholesale,2849,2022
UK,Budget,Retail,4495,2023
Test,Standard,Retail,3533,2024
Japan,Premium,Wholesale,1685,2022
USA,Premium,Wholesale,1685,2023
Japan,Premium,Online,2475,2024
Germany,Standard,Retail,1621,2022
Test,Premium,Retail,1008,2023
USA,Standard,Wholesale,2717,2024
Test,Premium,Online,2169,2022
Germany,Premium,Wholesale,4416,2023
UK,Premium,Wholesale,2405,2024
UK,Standard,Retail,4783,2022
UK,Premium,Online,967,2023
France,Standard,Online,3525,2024
France,Premium,Online,2915,2022
France,Premium,Wholesale,2318,2023
Test,Premium,Wholesale,1126,2024
France,Standard,Wholesale,1547,2022
France,Budget,Wholesale,3398,2023
USA,Premium,Wholesale,4918,2024

</script><script type="text/plain" id="survey_data" data-format="csv_embedded" data-src="">
Age_Group,Gender,Satisfaction,Product,Region
36-45,Male,7,Product C,East
18-25,Other,9,Product B,East
46-55,Prefer not to say,2,Product C,North
56+,Other,2,Product B,West
36-45,Female,8,Product B,North
46-55,Male,6,Product A,North
46-55,Other,4,Product C,East
46-55,Female,3,Product B,South
18-25,Female,5,Product C,North
36-45,Female,1,Product C,East
46-55,Prefer not to say,4,Product A,West
36-45,Male,2,Product B,East
18-25,Male,10,Product B,West
26-35,Female,1,Product C,West
36-45,Other,8,Product B,West
56+,Male,9,Product C,South
18-25,Other,10,Product C,South
46-55,Other,2,Product B,North
18-25,Male,1,Product B,North
36-45,Other,2,Product A,West
56+,Prefer not to say,8,Product A,North
26-35,Female,3,Product A,North
18-25,Male,10,Product C,East
56+,Male,3,Product C,North
56+,Prefer not to say,10,Product B,North
18-25,Male,6,Product A,West
18-25,Female,5,Product A,North
26-35,Female,2,Product C,West
46-55,Other,10,Product A,West
46-55,Male,4,Product A,North
46-55,Prefer not to say,8,Product B,North
56+,Female,2,Product C,East
56+,Prefer not to say,1,Product B,West
56+,Female,10,Product B,East
26-35,Other,3,Product C,South
26-35,Female,3,Product C,South
56+,Prefer not to say,5,Product B,South
46-55,Male,8,Product A,South
56+,Male,10,Product B,East
56+,Prefer not to say,4,Product B,East
36-45,Female,3,Product A,East
46-55,Other,4,Product A,North
26-35,Prefer not to say,3,Product A,West
36-45,Male,10,Product A,West
18-25,Other,3,Product A,South
26-35,Prefer not to say,6,Product C,East
46-55,Other,8,Product B,West
36-45,Other,1,Product A,North
56+,Female,6,Product C,South
36-45,Prefer not to say,1,Product A,South
36-45,Male,5,Product A,West
56+,Male,9,Product C,North
26-35,Other,7,Product A,North
18-25,Male,4,Product A,North
46-55,Female,5,Product C,West
46-55,Female,4,Product B,East
46-55,Prefer not to say,5,Product B,South
36-45,Other,6,Product A,North
36-45,Other,2,Product C,North
46-55,Prefer not to say,8,Product B,East
46-55,Female,1,Product B,South
36-45,Male,4,Product B,South
26-35,Other,3,Product B,West
26-35,Male,9,Product B,North
56+,Other,7,Product B,North
56+,Other,7,Product B,South
46-55,Prefer not to say,1,Product A,South
56+,Male,7,Product C,West
46-55,Other,8,Product C,West
18-25,Prefer not to say,9,Product C,East
46-55,Other,1,Product C,East
26-35,Male,2,Product A,South
36-45,Other,8,Product A,South
56+,Female,2,Product A,North
46-55,Prefer not to say,1,Product A,South
56+,Prefer not to say,2,Product A,East
18-25,Other,2,Product B,South
18-25,Female,2,Product A,East
46-55,Female,3,Product A,South
26-35,Male,2,Product A,South
36-45,Female,10,Product C,West
36-45,Male,10,Product C,West
56+,Male,1,Product A,East
56+,Male,7,Product C,North
18-25,Male,6,Product A,West
18-25,Other,7,Product A,South
36-45,Female,3,Product C,North
46-55,Female,3,Product C,North
18-25,Female,8,Product C,North
56+,Male,1,Product B,North
26-35,Male,2,Product B,South
36-45,Other,1,Product B,South
56+,Female,4,Product C,South
26-35,Prefer not to say,5,Product A,South
46-55,Male,2,Product A,North
56+,Prefer not to say,7,Product B,East
18-25,Other,4,Product A,West
46-55,Other,8,Product A,East
18-25,Female,10,Product B,North
36-45,Other,4,Product C,North
18-25,Male,5,Product A,West
56+,Other,7,Product B,North
46-55,Male,6,Product B,South
26-35,Prefer not to say,9,Product B,North
46-55,Other,7,Product C,West
56+,Male,3,Product C,South
18-25,Male,7,Product A,North
46-55,Other,5,Product A,West
26-35,Female,5,Product A,West
56+,Female,8,Product C,West
26-35,Female,2,Product A,East
46-55,Male,10,Product A,North
56+,Female,2,Product B,South
18-25,Female,3,Product A,North
26-35,Female,5,Product B,East
46-55,Female,5,Product A,East
36-45,Female,10,Product A,East
56+,Male,9,Product A,West
18-25,Female,6,Product B,East
56+,Prefer not to say,8,Product A,West
18-25,Female,7,Product C,South
18-25,Female,2,Product C,West
46-55,Other,10,Product B,East
18-25,Male,8,Product C,North
36-45,Other,2,Product A,North
46-55,Female,9,Product B,North
18-25,Other,4,Product A,North
26-35,Male,9,Product A,West
18-25,Prefer not to say,3,Product C,East
56+,Female,5,Product A,East
18-25,Female,3,Product B,South
18-25,Other,8,Product C,North
18-25,Other,1,Product A,North
18-25,Other,5,Product B,North
26-35,Male,6,Product B,East
36-45,Male,9,Product C,West
56+,Male,10,Product B,South
56+,Female,9,Product C,South
26-35,Male,5,Product B,West
36-45,Male,7,Product B,South
36-45,Female,7,Product C,West
36-45,Prefer not to say,7,Product B,West
26-35,Female,2,Product A,North
26-35,Male,2,Product C,North
18-25,Other,3,Product C,South
18-25,Other,4,Product B,South
46-55,Female,6,Product B,North
46-55,Other,4,Product A,East
18-25,Male,3,Product A,South
46-55,Female,5,Product C,South
56+,Other,5,Product C,West
46-55,Female,10,Product C,South
26-35,Other,3,Product C,North
18-25,Male,10,Product B,North
26-35,Prefer not to say,1,Product C,South
36-45,Prefer not to say,9,Product A,North
18-25,Other,7,Product C,South
56+,Female,4,Product A,East
36-45,Female,2,Product C,West
18-25,Prefer not to say,7,Product C,North
36-45,Female,6,Product C,North
46-55,Other,1,Product C,South
18-25,Prefer not to say,2,Product C,East
56+,Female,6,Product B,West
26-35,Other,5,Product B,South
56+,Other,7,Product A,East
46-55,Male,3,Product C,North
26-35,Female,2,Product B,South
46-55,Other,7,Product A,South
36-45,Female,1,Product B,North
36-45,Prefer not to say,7,Product C,South
18-25,Female,10,Product B,East
56+,Other,7,Product C,South
36-45,Prefer not to say,9,Product C,North
46-55,Other,6,Product A,East
56+,Female,3,Product B,West
18-25,Female,3,Product A,East
36-45,Other,1,Product B,East
36-45,Male,4,Product A,South
46-55,Other,8,Product A,South
46-55,Male,9,Product A,East
18-25,Other,9,Product C,South
18-25,Male,2,Product B,West
56+,Male,7,Product C,South
46-55,Male,9,Product B,South
36-45,Male,6,Product C,North
18-25,Other,2,Product A,North
46-55,Other,3,Product B,South
18-25,Prefer not to say,9,Product A,East
36-45,Male,5,Product A,East
46-55,Other,7,Product B,East
36-45,Female,10,Product C,South
46-55,Other,9,Product C,East
18-25,Prefer not to say,4,Product C,East
36-45,Prefer not to say,8,Product C,East
56+,Prefer not to say,8,Product C,South
18-25,Female,3,Product C,West
18-25,Male,4,Product A,South
26-35,Male,3,Product A,East
46-55,Female,5,Product C,North

</script><script type="text/plain" id="stockReturns" data-format="csv_embedded" data-src="">
Symbol,Date,Return
RTX,2023-01-01,10.01
RTX,2023-01-02,-10.005
RTX,2023-01-03,-0.5
GOOG,2023-01-01,1.0
GOOG,2023-01-02,0.01
GOOG,2023-01-03,-0.003
MSFT,2023-01-01,0.008
MSFT,2023-01-02,0.004
MSFT,2023-01-03,-0.002

</script><script type="text/plain" id="correlations" data-format="csv_embedded" data-src="">
Symbol1,Symbol2,Correlation
RTX,GOOG,-0.85
RTX,MSFT,-0.75
GOOG,MSFT,0.8
RTX,RTX,1.0
GOOG,GOOG,1.0
MSFT,MSFT,1.0
GOOG,RTX,-0.85
MSFT,RTX,-0.75
MSFT,GOOG,0.8

</script><script type="text/plain" id="sales_data" data-format="csv_embedded" data-src="">
Region,Month,Product,Sales,Units
North,Jan,Gadget,13440,125
North,Feb,Gizmo,13974,63
North,Mar,Widget,21708,171
North,Apr,Gadget,26155,159
North,May,Gadget,20072,141
North,Jun,Widget,36916,103
North,Jul,Gizmo,14981,71
North,Aug,Gadget,13179,99
North,Sep,Gizmo,10670,55
North,Oct,Widget,45452,103
North,Nov,Widget,36199,79
North,Dec,Widget,49056,102
South,Jan,Widget,37192,131
South,Feb,Gadget,26399,177
South,Mar,Gizmo,39692,158
South,Apr,Gadget,11463,157
South,May,Gizmo,47417,154
South,Jun,Gadget,47718,191
South,Jul,Gadget,13803,137
South,Aug,Widget,47885,56
South,Sep,Gizmo,43812,200
South,Oct,Gadget,31079,146
South,Nov,Gizmo,22968,136
South,Dec,Gizmo,30167,167
East,Jan,Gizmo,14379,158
East,Feb,Gadget,46661,113
East,Mar,Widget,15487,135
East,Apr,Gadget,49385,73
East,May,Gizmo,16469,125
East,Jun,Gizmo,16835,87
East,Jul,Widget,39483,138
East,Aug,Gizmo,42963,189
East,Sep,Gizmo,32181,56
East,Oct,Gadget,18796,79
East,Nov,Gadget,22398,78
East,Dec,Gizmo,44427,54
West,Jan,Gadget,31035,87
West,Feb,Gizmo,34873,168
West,Mar,Widget,30939,188
West,Apr,Gadget,10910,60
West,May,Gizmo,48954,143
West,Jun,Gadget,12884,105
West,Jul,Gadget,24764,128
West,Aug,Widget,32691,174
West,Sep,Gadget,30228,103
West,Oct,Gizmo,45956,178
West,Nov,Gizmo,49998,140
West,Dec,Widget,14319,115

</script><script type="text/plain" id="transaction_data" data-format="csv_embedded" data-src="">
Transaction_Type,Customer_Type,Payment_Method,Store,Amount
Cancel,Returning,Cash,Store 2,403
Cancel,VIP,Credit Card,Store 1,490
Exchange,VIP,PayPal,Store 3,95
Purchase,New,Cash,Store 2,182
Cancel,New,Bank Transfer,Store 3,333
Refund,Returning,PayPal,Store 3,409
Purchase,New,Cash,Store 2,53
Refund,VIP,Bank Transfer,Store 2,398
Refund,New,Bank Transfer,Store 2,355
Refund,VIP,Bank Transfer,Store 1,182
Cancel,VIP,Credit Card,Store 3,40
Cancel,Returning,Credit Card,Store 1,188
Cancel,VIP,Cash,Store 1,348
Purchase,New,Bank Transfer,Store 3,241
Refund,VIP,Credit Card,Store 3,374
Refund,VIP,Cash,Store 1,436
Exchange,Returning,Credit Card,Store 1,20
Purchase,VIP,Cash,Store 3,77
Refund,VIP,Credit Card,Store 1,258
Refund,Returning,Credit Card,Store 2,234
Exchange,Returning,Credit Card,Store 2,92
Refund,New,Bank Transfer,Store 2,35
Refund,Returning,Bank Transfer,Store 1,50
Cancel,New,Cash,Store 1,130
Refund,New,Bank Transfer,Store 2,317
Purchase,Returning,Cash,Store 1,120
Refund,VIP,Cash,Store 2,144
Refund,VIP,Bank Transfer,Store 2,270
Refund,New,Cash,Store 1,272
Exchange,New,Credit Card,Store 1,99
Cancel,New,Cash,Store 3,398
Exchange,VIP,Cash,Store 3,312
Exchange,Returning,PayPal,Store 3,490
Purchase,VIP,Bank Transfer,Store 2,268
Refund,VIP,Cash,Store 3,228
Exchange,New,Credit Card,Store 3,266
Refund,New,Bank Transfer,Store 1,333
Refund,Returning,PayPal,Store 2,193
Cancel,New,Bank Transfer,Store 3,374
Exchange,VIP,Cash,Store 3,55
Purchase,Returning,PayPal,Store 1,250
Refund,Returning,Cash,Store 3,142
Purchase,New,Cash,Store 1,263
Cancel,Returning,Cash,Store 1,149
Refund,Returning,PayPal,Store 3,446
Refund,VIP,Credit Card,Store 1,168
Cancel,New,Credit Card,Store 1,137
Purchase,New,PayPal,Store 1,332
Refund,New,Bank Transfer,Store 3,239
Refund,New,Bank Transfer,Store 2,204
Exchange,VIP,Credit Card,Store 2,466
Cancel,New,PayPal,Store 2,393
Cancel,New,Credit Card,Store 2,372
Purchase,VIP,PayPal,Store 3,373
Exchange,New,PayPal,Store 1,421
Purchase,New,Credit Card,Store 3,58
Refund,VIP,Bank Transfer,Store 1,484
Exchange,Returning,Cash,Store 3,81
Cancel,Returning,Cash,Store 1,485
Purchase,VIP,Cash,Store 1,398
Purchase,Returning,Bank Transfer,Store 2,430
Cancel,New,Credit Card,Store 3,325
Refund,VIP,PayPal,Store 2,390
Refund,New,Cash,Store 3,384
Exchange,VIP,Credit Card,Store 2,250
Refund,Returning,Credit Card,Store 3,468
Refund,New,Cash,Store 3,423
Refund,New,PayPal,Store 1,357
Exchange,Returning,PayPal,Store 3,323
Cancel,New,Bank Transfer,Store 3,485
Purchase,Returning,Credit Card,Store 2,126
Cancel,Returning,Bank Transfer,Store 2,475
Purchase,Returning,Bank Transfer,Store 3,413
Refund,New,PayPal,Store 1,349
Exchange,New,Bank Transfer,Store 2,492
Refund,Returning,PayPal,Store 3,303
Purchase,Returning,Bank Transfer,Store 3,391
Purchase,Returning,Bank Transfer,Store 1,236
Cancel,Returning,Credit Card,Store 2,288
Purchase,New,PayPal,Store 1,269
Purchase,New,PayPal,Store 3,414
Purchase,VIP,Cash,Store 3,184
Purchase,New,PayPal,Store 1,440
Purchase,Returning,PayPal,Store 2,50
Exchange,Returning,PayPal,Store 2,341
Purchase,VIP,PayPal,Store 2,318
Exchange,VIP,PayPal,Store 1,34
Purchase,VIP,Cash,Store 3,296
Exchange,VIP,Credit Card,Store 3,482
Refund,VIP,PayPal,Store 2,221
Purchase,Returning,Cash,Store 2,229
Cancel,Returning,Bank Transfer,Store 2,476
Refund,Returning,PayPal,Store 2,87
Cancel,New,Cash,Store 1,492
Cancel,New,Cash,Store 2,407
Cancel,New,Bank Transfer,Store 2,282
Exchange,VIP,Bank Transfer,Store 3,204
Exchange,VIP,Cash,Store 2,27
Refund,VIP,Bank Transfer,Store 3,220
Cancel,VIP,Bank Transfer,Store 3,458
Cancel,New,Credit Card,Store 1,137
Exchange,VIP,Bank Transfer,Store 1,304
Purchase,New,Bank Transfer,Store 3,315
Purchase,Returning,Cash,Store 2,442
Refund,VIP,Bank Transfer,Store 3,384
Cancel,Returning,Bank Transfer,Store 3,153
Purchase,Returning,Credit Card,Store 3,402
Exchange,VIP,Credit Card,Store 3,458
Cancel,New,Cash,Store 3,131
Exchange,New,PayPal,Store 2,264
Cancel,New,Bank Transfer,Store 2,277
Refund,Returning,Bank Transfer,Store 2,19
Purchase,Returning,Credit Card,Store 2,140
Purchase,Returning,Bank Transfer,Store 2,313
Exchange,VIP,Bank Transfer,Store 1,490
Exchange,Returning,Credit Card,Store 3,176
Refund,VIP,PayPal,Store 2,374
Refund,New,PayPal,Store 3,112
Refund,New,Bank Transfer,Store 3,88
Exchange,VIP,Bank Transfer,Store 1,219
Exchange,Returning,PayPal,Store 2,194
Cancel,VIP,Cash,Store 2,198
Exchange,New,Cash,Store 2,142
Purchase,Returning,Credit Card,Store 1,493
Exchange,Returning,PayPal,Store 2,320
Purchase,New,Bank Transfer,Store 2,268
Refund,VIP,Cash,Store 1,338
Exchange,VIP,PayPal,Store 1,221
Exchange,New,Cash,Store 3,252
Refund,New,PayPal,Store 3,161
Purchase,New,Bank Transfer,Store 2,271
Cancel,VIP,Bank Transfer,Store 3,446
Cancel,VIP,Cash,Store 3,294
Purchase,VIP,Bank Transfer,Store 3,42
Cancel,New,Credit Card,Store 3,275
Cancel,VIP,PayPal,Store 3,217
Exchange,Returning,Cash,Store 1,398
Exchange,New,PayPal,Store 3,165
Exchange,Returning,PayPal,Store 2,76
Cancel,New,Cash,Store 2,353
Purchase,Returning,PayPal,Store 2,444
Cancel,VIP,Credit Card,Store 1,118
Refund,New,Credit Card,Store 1,69
Cancel,VIP,Credit Card,Store 1,361
Exchange,VIP,Credit Card,Store 2,480
Cancel,Returning,PayPal,Store 3,131
Exchange,New,Credit Card,Store 3,382
Exchange,New,Bank Transfer,Store 3,458
Cancel,Returning,Cash,Store 1,50
Cancel,New,Credit Card,Store 2,224
Cancel,VIP,Cash,Store 1,101
Exchange,New,PayPal,Store 1,48
Refund,Returning,Cash,Store 1,492
Purchase,Returning,PayPal,Store 2,24
Cancel,New,Credit Card,Store 2,64
Cancel,New,Bank Transfer,Store 2,51
Refund,VIP,PayPal,Store 1,11
Cancel,VIP,Cash,Store 1,104
Exchange,VIP,Bank Transfer,Store 3,403
Purchase,New,Bank Transfer,Store 1,254
Cancel,VIP,PayPal,Store 3,168
Purchase,VIP,Bank Transfer,Store 2,176
Exchange,New,Bank Transfer,Store 1,213
Refund,Returning,Cash,Store 1,339
Exchange,Returning,Bank Transfer,Store 2,479
Cancel,New,Credit Card,Store 1,128
Cancel,VIP,Cash,Store 3,215
Cancel,New,Credit Card,Store 3,60
Cancel,New,PayPal,Store 3,71
Cancel,VIP,Credit Card,Store 1,177
Purchase,VIP,Bank Transfer,Store 2,436
Cancel,VIP,PayPal,Store 1,39
Refund,Returning,Bank Transfer,Store 2,301
Exchange,VIP,PayPal,Store 2,108
Purchase,New,Bank Transfer,Store 3,279
Exchange,Returning,Bank Transfer,Store 3,183
Exchange,Returning,PayPal,Store 1,99
Exchange,VIP,Cash,Store 1,330
Purchase,Returning,Bank Transfer,Store 2,298
Cancel,Returning,Bank Transfer,Store 1,309
Cancel,VIP,Bank Transfer,Store 1,61
Exchange,New,Bank Transfer,Store 2,61
Refund,VIP,Cash,Store 3,412
Purchase,New,Bank Transfer,Store 1,436
Exchange,VIP,Cash,Store 2,373
Cancel,Returning,PayPal,Store 3,202
Refund,VIP,Credit Card,Store 1,215
Purchase,Returning,Credit Card,Store 3,432
Purchase,Returning,Bank Transfer,Store 2,447
Purchase,VIP,Credit Card,Store 1,352
Cancel,VIP,Credit Card,Store 2,113
Refund,New,Credit Card,Store 2,106
Cancel,VIP,Credit Card,Store 3,385
Exchange,Returning,Cash,Store 3,341
Cancel,Returning,Bank Transfer,Store 1,70
Purchase,New,Cash,Store 2,34
Exchange,Returning,Credit Card,Store 1,191
Exchange,Returning,Cash,Store 1,352
Purchase,VIP,Credit Card,Store 1,471
Purchase,New,Cash,Store 3,181
Cancel,Returning,Bank Transfer,Store 3,240
Cancel,Returning,PayPal,Store 1,458
Cancel,Returning,Cash,Store 1,29
Cancel,Returning,Bank Transfer,Store 3,306
Purchase,VIP,Bank Transfer,Store 3,362
Refund,VIP,Bank Transfer,Store 3,150
Cancel,New,Bank Transfer,Store 1,205
Cancel,VIP,Cash,Store 3,85
Refund,VIP,Credit Card,Store 2,76
Exchange,VIP,Cash,Store 1,14
Purchase,Returning,Cash,Store 2,495
Purchase,Returning,Bank Transfer,Store 2,86
Refund,Returning,Credit Card,Store 2,377
Purchase,New,PayPal,Store 2,472
Exchange,VIP,PayPal,Store 1,315
Exchange,Returning,Credit Card,Store 2,248
Cancel,New,Credit Card,Store 3,217
Purchase,VIP,Bank Transfer,Store 1,295
Purchase,Returning,Bank Transfer,Store 2,247
Purchase,New,Credit Card,Store 2,279
Cancel,VIP,Cash,Store 1,374
Cancel,Returning,Cash,Store 2,41
Cancel,New,Credit Card,Store 1,196
Exchange,Returning,Credit Card,Store 3,222
Purchase,New,Bank Transfer,Store 1,471
Refund,Returning,PayPal,Store 1,254
Cancel,VIP,Bank Transfer,Store 3,270
Cancel,VIP,Cash,Store 3,313
Refund,Returning,Credit Card,Store 2,194
Purchase,New,Credit Card,Store 2,217
Refund,VIP,Cash,Store 1,225
Purchase,VIP,Bank Transfer,Store 3,173
Refund,New,Bank Transfer,Store 2,135
Refund,Returning,Bank Transfer,Store 3,123
Exchange,New,PayPal,Store 3,468
Cancel,Returning,PayPal,Store 2,478
Cancel,New,Bank Transfer,Store 3,313
Cancel,New,Cash,Store 2,143
Cancel,VIP,Cash,Store 3,160
Refund,New,Bank Transfer,Store 3,261
Exchange,Returning,Credit Card,Store 3,179
Purchase,VIP,PayPal,Store 3,50
Refund,New,Credit Card,Store 2,323
Cancel,VIP,PayPal,Store 2,440
Purchase,VIP,Bank Transfer,Store 3,387
Refund,Returning,Credit Card,Store 1,361
Exchange,VIP,Credit Card,Store 1,198
Purchase,New,Cash,Store 1,176
Purchase,VIP,PayPal,Store 3,362
Refund,New,Credit Card,Store 2,318
Purchase,Returning,Credit Card,Store 1,448
Refund,New,Cash,Store 2,468
Cancel,VIP,PayPal,Store 3,470
Purchase,New,Bank Transfer,Store 3,444
Exchange,VIP,Cash,Store 1,23
Cancel,Returning,Credit Card,Store 3,438
Purchase,Returning,Bank Transfer,Store 3,336
Exchange,New,PayPal,Store 2,27
Exchange,Returning,Credit Card,Store 3,473
Exchange,Returning,Bank Transfer,Store 1,231
Refund,New,PayPal,Store 1,220
Refund,New,Credit Card,Store 2,368
Cancel,New,Bank Transfer,Store 2,415
Purchase,New,Credit Card,Store 3,353
Exchange,VIP,Bank Transfer,Store 2,124
Purchase,VIP,Credit Card,Store 1,398
Purchase,VIP,Bank Transfer,Store 2,22
Cancel,VIP,PayPal,Store 1,246
Refund,New,Credit Card,Store 1,286
Cancel,New,Cash,Store 3,380
Exchange,VIP,Bank Transfer,Store 2,224
Cancel,VIP,Cash,Store 3,158
Cancel,New,PayPal,Store 1,417
Refund,Returning,Credit Card,Store 3,215
Refund,VIP,Bank Transfer,Store 3,463
Cancel,New,Bank Transfer,Store 3,267
Exchange,New,PayPal,Store 2,59
Cancel,VIP,Cash,Store 2,384
Cancel,VIP,Credit Card,Store 1,355
Purchase,VIP,PayPal,Store 3,499
Purchase,Returning,Credit Card,Store 2,488
Purchase,Returning,Bank Transfer,Store 1,493
Purchase,VIP,Credit Card,Store 1,262
Exchange,New,Cash,Store 1,205
Purchase,Returning,PayPal,Store 1,78
Cancel,New,Bank Transfer,Store 3,497
Exchange,Returning,Cash,Store 2,150
Purchase,Returning,Bank Transfer,Store 1,114
Exchange,New,Bank Transfer,Store 2,127
Exchange,VIP,Bank Transfer,Store 1,446
Refund,New,Bank Transfer,Store 3,53
Purchase,VIP,PayPal,Store 3,284
Exchange,New,Cash,Store 1,237
Refund,VIP,Bank Transfer,Store 1,195
Purchase,VIP,Credit Card,Store 3,94
Purchase,VIP,Cash,Store 1,190
Refund,New,Cash,Store 3,280
Exchange,New,Bank Transfer,Store 3,330
Exchange,Returning,Cash,Store 1,125
Exchange,VIP,Bank Transfer,Store 1,178
Refund,New,Bank Transfer,Store 3,497
Purchase,New,PayPal,Store 1,333
Refund,Returning,PayPal,Store 3,479
Purchase,New,Credit Card,Store 2,300
Refund,VIP,Bank Transfer,Store 3,286
Refund,Returning,Cash,Store 2,424
Exchange,VIP,Bank Transfer,Store 1,371
Refund,New,Credit Card,Store 3,66
Refund,VIP,Credit Card,Store 2,412
Cancel,Returning,Credit Card,Store 1,413
Cancel,New,PayPal,Store 1,163
Refund,New,Bank Transfer,Store 2,60
Cancel,New,Credit Card,Store 1,382
Refund,New,Credit Card,Store 1,183
Cancel,New,Cash,Store 2,426
Cancel,VIP,Credit Card,Store 3,402
Purchase,New,Credit Card,Store 1,335
Purchase,Returning,PayPal,Store 2,473
Purchase,New,Cash,Store 3,257
Refund,New,PayPal,Store 3,341
Purchase,Returning,PayPal,Store 3,108
Purchase,Returning,Bank Transfer,Store 2,23
Purchase,VIP,Credit Card,Store 3,290
Exchange,New,Bank Transfer,Store 2,390
Purchase,VIP,PayPal,Store 2,61
Exchange,New,Credit Card,Store 2,490
Refund,New,PayPal,Store 2,330
Exchange,VIP,PayPal,Store 2,288
Exchange,Returning,Bank Transfer,Store 1,106
Purchase,New,PayPal,Store 1,391
Exchange,New,Credit Card,Store 1,263
Refund,VIP,PayPal,Store 3,416
Purchase,New,Bank Transfer,Store 2,380
Exchange,Returning,Bank Transfer,Store 2,236
Exchange,Returning,Cash,Store 3,452
Cancel,Returning,Bank Transfer,Store 1,97
Cancel,Returning,Credit Card,Store 3,266
Purchase,New,Cash,Store 1,316
Cancel,VIP,PayPal,Store 3,68
Refund,VIP,Cash,Store 3,494
Refund,Returning,Credit Card,Store 2,250
Refund,New,Credit Card,Store 2,356
Exchange,New,PayPal,Store 3,311
Purchase,New,Cash,Store 3,424
Purchase,Returning,PayPal,Store 2,168
Exchange,Returning,Cash,Store 1,281
Refund,New,PayPal,Store 1,22
Purchase,Returning,PayPal,Store 2,311
Exchange,Returning,PayPal,Store 2,157
Cancel,New,Bank Transfer,Store 2,461
Cancel,New,PayPal,Store 2,118
Purchase,VIP,Credit Card,Store 3,233
Exchange,New,Bank Transfer,Store 2,106
Refund,Returning,Cash,Store 2,216
Cancel,Returning,PayPal,Store 3,47
Exchange,VIP,Bank Transfer,Store 2,50
Cancel,New,PayPal,Store 2,85
Refund,New,Bank Transfer,Store 2,394
Exchange,Returning,Credit Card,Store 3,146
Purchase,Returning,Cash,Store 2,409
Exchange,New,Credit Card,Store 1,23
Refund,Returning,Bank Transfer,Store 2,161
Refund,New,Bank Transfer,Store 1,256
Purchase,Returning,Cash,Store 1,201
Purchase,VIP,Bank Transfer,Store 3,343
Refund,New,Credit Card,Store 1,397
Purchase,VIP,Bank Transfer,Store 3,368
Refund,VIP,Credit Card,Store 1,433
Purchase,New,Credit Card,Store 2,47
Refund,Returning,Bank Transfer,Store 2,162
Exchange,VIP,Cash,Store 1,310
Refund,Returning,Bank Transfer,Store 2,421
Refund,VIP,Cash,Store 3,171
Exchange,VIP,Bank Transfer,Store 2,124
Refund,VIP,PayPal,Store 3,183
Purchase,Returning,PayPal,Store 1,54
Refund,Returning,Cash,Store 3,297
Refund,New,Credit Card,Store 3,147
Cancel,VIP,Bank Transfer,Store 2,214
Purchase,VIP,Cash,Store 3,348
Purchase,VIP,Cash,Store 1,92
Cancel,New,PayPal,Store 3,34
Refund,VIP,PayPal,Store 3,80
Exchange,VIP,Bank Transfer,Store 3,428
Exchange,Returning,Cash,Store 1,412
Purchase,VIP,PayPal,Store 3,65
Cancel,New,Cash,Store 3,235
Exchange,New,Credit Card,Store 1,402
Cancel,Returning,Bank Transfer,Store 3,344
Exchange,Returning,PayPal,Store 3,215
Cancel,VIP,PayPal,Store 2,350
Refund,New,Credit Card,Store 2,267
Cancel,New,Credit Card,Store 3,261
Refund,VIP,Bank Transfer,Store 2,456
Refund,New,Cash,Store 2,123
Exchange,New,PayPal,Store 3,438
Refund,Returning,Credit Card,Store 2,498
Cancel,New,PayPal,Store 2,437
Refund,Returning,Cash,Store 1,19
Purchase,New,Cash,Store 1,496
Purchase,VIP,Bank Transfer,Store 3,295
Purchase,Returning,PayPal,Store 2,393
Purchase,VIP,Bank Transfer,Store 3,266
Purchase,VIP,Bank Transfer,Store 3,114
Purchase,New,PayPal,Store 2,60
Cancel,VIP,PayPal,Store 3,405
Purchase,New,Credit Card,Store 1,379
Exchange,Returning,Cash,Store 1,390
Cancel,VIP,Bank Transfer,Store 2,106
Cancel,New,PayPal,Store 3,306
Cancel,Returning,Cash,Store 1,274
Cancel,Returning,Cash,Store 1,441
Exchange,New,Cash,Store 2,309
Exchange,VIP,Credit Card,Store 2,431
Exchange,Returning,Credit Card,Store 1,157
Refund,Returning,PayPal,Store 1,436
Exchange,VIP,Cash,Store 3,440
Purchase,Returning,PayPal,Store 1,23
Cancel,VIP,Bank Transfer,Store 3,261
Cancel,VIP,Credit Card,Store 1,314
Refund,VIP,Bank Transfer,Store 1,177
Refund,Returning,Bank Transfer,Store 2,23
Cancel,New,Bank Transfer,Store 2,181
Refund,New,Cash,Store 2,17
Exchange,VIP,PayPal,Store 3,49
Exchange,VIP,PayPal,Store 2,217
Exchange,New,PayPal,Store 3,493
Exchange,New,Bank Transfer,Store 2,470
Purchase,VIP,Credit Card,Store 1,286
Refund,New,PayPal,Store 1,140
Purchase,New,Bank Transfer,Store 2,267
Exchange,New,Bank Transfer,Store 3,58
Refund,Returning,Credit Card,Store 1,283
Purchase,New,Credit Card,Store 1,40
Refund,New,PayPal,Store 1,453
Exchange,Returning,PayPal,Store 1,48
Exchange,VIP,PayPal,Store 2,435
Cancel,Returning,PayPal,Store 1,434
Exchange,New,Credit Card,Store 1,397
Cancel,VIP,PayPal,Store 3,121
Exchange,Returning,PayPal,Store 2,150
Cancel,New,Bank Transfer,Store 3,460
Exchange,New,PayPal,Store 2,297
Exchange,Returning,Cash,Store 3,470
Exchange,Returning,Cash,Store 3,369
Exchange,Returning,Cash,Store 3,478
Exchange,VIP,Bank Transfer,Store 1,192
Cancel,Returning,Cash,Store 3,196
Refund,VIP,Cash,Store 1,371
Cancel,Returning,Credit Card,Store 1,325
Purchase,New,PayPal,Store 1,406
Purchase,New,Cash,Store 2,243
Refund,Returning,PayPal,Store 1,319
Cancel,VIP,PayPal,Store 2,406
Refund,New,Credit Card,Store 1,191
Cancel,VIP,Credit Card,Store 3,176
Exchange,New,PayPal,Store 1,490
Refund,Returning,Bank Transfer,Store 3,142
Cancel,Returning,Bank Transfer,Store 2,428
Refund,New,Cash,Store 3,88
Cancel,VIP,Credit Card,Store 2,66
Cancel,Returning,PayPal,Store 1,432
Purchase,New,Bank Transfer,Store 1,440
Exchange,New,Cash,Store 1,30
Refund,New,PayPal,Store 2,201
Cancel,Returning,Cash,Store 2,409
Refund,New,PayPal,Store 3,95
Refund,Returning,PayPal,Store 3,491
Cancel,New,PayPal,Store 1,224
Exchange,VIP,Cash,Store 3,326
Exchange,New,Cash,Store 1,211
Refund,VIP,Bank Transfer,Store 2,238
Purchase,VIP,Credit Card,Store 2,424
Exchange,VIP,PayPal,Store 1,402
Exchange,VIP,PayPal,Store 1,305
Cancel,VIP,Credit Card,Store 2,336
Refund,Returning,PayPal,Store 2,459
Refund,Returning,Bank Transfer,Store 1,489
Cancel,New,Credit Card,Store 3,23
Cancel,New,PayPal,Store 3,431
Purchase,VIP,Cash,Store 3,329
Purchase,New,Cash,Store 2,179
Refund,VIP,PayPal,Store 1,321
Cancel,New,PayPal,Store 2,234
Refund,New,Cash,Store 2,497
Exchange,Returning,Bank Transfer,Store 2,190
Exchange,Returning,Credit Card,Store 1,349
Refund,New,Bank Transfer,Store 2,126
Exchange,VIP,Cash,Store 2,440
Refund,Returning,Credit Card,Store 3,183
Cancel,VIP,Credit Card,Store 1,401
Refund,New,Credit Card,Store 3,439
Purchase,New,PayPal,Store 1,328
Purchase,New,Cash,Store 1,397
Refund,VIP,Cash,Store 1,187
Cancel,New,PayPal,Store 2,63
Cancel,Returning,Credit Card,Store 2,229
Purchase,New,Cash,Store 1,206
Purchase,Returning,Credit Card,Store 2,48
Cancel,New,PayPal,Store 2,111

</script><script type="text/plain" id="subframe" data-format="csv_embedded" data-src="">
x,y,group,z
1,1,A,0.15594369476537437
2,1,A,-0.6172728764571667
3,1,A,-0.9997860728793259
4,1,A,-0.5557653904191477
5,1,A,0.37706981246168597
6,1,A,0.9799824974549554
1,2,A,-0.6172728764571667
2,2,A,-0.9513631281258474
3,2,A,-0.894288058558276
4,2,A,-0.2379483919805909
5,2,A,0.6231593449762197
6,2,A,0.9991443830469295
1,3,A,-0.9997860728793259
2,3,A,-0.894288058558276
3,3,A,-0.4526618572923528
4,3,A,0.28366218546322625
5,3,A,0.8994733999984659
6,3,A,0.9110310531896002
1,4,A,-0.5557653904191477
2,4,A,-0.2379483919805909
3,4,A,0.28366218546322625
4,4,A,0.8101836031147954
5,4,A,0.9928159447966954
6,4,A,0.5995022633598608
1,5,A,0.37706981246168597
2,5,A,0.6231593449762197
3,5,A,0.8994733999984659
4,5,A,0.9928159447966954
5,5,A,0.7053479063084421
6,5,A,0.04371801995456107
1,6,A,0.9799824974549554
2,6,A,0.9991443830469295
3,6,A,0.9110310531896002
4,6,A,0.5995022633598608
5,6,A,0.04371801995456107
6,6,A,-0.5901944859052752
1,1,B,-0.8440563052346256
2,1,B,-1.6172728764571667
3,1,B,-1.999786072879326
4,1,B,-1.5557653904191477
5,1,B,-0.622930187538314
6,1,B,-0.02001750254504464
1,2,B,-1.1605565385746905
2,2,B,-1.769905729749893
3,2,B,-1.9847209431240276
4,2,B,-1.4526618572923529
5,2,B,-0.5348859483071466
6,2,B,-0.007045023716309329
1,3,B,-1.4161468365471424
2,3,B,-1.8795687341082288
3,3,B,-1.9484431958418278
4,3,B,-1.346174157871352
5,3,B,-0.45271768395849554
6,3,B,-0.0007290466739067192
1,4,B,-1.6172728764571667
2,4,B,-1.9513631281258474
3,4,B,-1.894288058558276
4,4,B,-1.237948391980591
5,4,B,-0.3768406550237803
6,4,B,-0.0008556169530704594
1,5,B,-1.769905729749893
2,5,B,-1.9899924966004454
3,5,B,-1.8252990620752587
4,5,B,-1.1294490013073428
5,5,B,-0.3075808884062521
6,5,B,-0.007184055203304562
1,6,B,-1.8795687341082288
2,6,B,-1.999786072879326
3,6,B,-1.7442462713722906
4,6,B,-1.021971452410018
5,6,B,-0.24518280412638171
6,6,B,-0.019450682346141668
1,1,C,1.1559436947653743
2,1,C,0.38272712354283334
3,1,C,0.00021392712067414
4,1,C,0.44423460958085226
5,1,C,1.377069812461686
6,1,C,1.9799824974549554
1,2,C,1.0170215307092125
2,2,C,0.3139470657369108
3,2,C,0.0036540443554032853
4,2,C,0.48641743614550437
5,2,C,1.4142212387971869
6,2,C,1.986175939144255
1,3,C,0.9179968609607547
2,3,C,0.2665566278409074
3,3,C,0.009016517099134758
4,3,C,0.519307022323508
5,3,C,1.4420795294939195
6,3,C,1.990140036061585
1,4,C,0.8394434614253095
2,4,C,0.2300942702501071
3,4,C,0.015279056875972419
4,4,C,0.5473381427076471
5,4,C,1.4651140516928534
6,4,C,1.9929549762836907
1,5,C,0.7738620277177296
2,5,C,0.20052801164655532
3,5,C,0.022059190682766516
4,5,C,0.5722355793970464
5,5,C,1.485058145415328
6,5,C,1.9950387168674295
1,6,C,0.7174188421724267
2,6,C,0.17579990271593138
3,6,C,0.02916737260633384
4,6,C,0.5948873339246776
5,6,C,1.502801829878708
6,6,C,1.9966053897707945
1,1,D,0.0
2,1,D,0.41421356237309515
3,1,D,0.7320508075688772
4,1,D,1.0
5,1,D,1.2360679774997898
6,1,D,1.4494897427831779
1,2,D,-0.41421356237309515
2,2,D,0.0
3,2,D,0.31783724519578205
4,2,D,0.5857864376269049
5,2,D,0.8218544151266947
6,2,D,1.0352761804100827
1,3,D,-0.7320508075688772
2,3,D,-0.31783724519578205
3,3,D,0.0
4,3,D,0.2679491924311228
5,3,D,0.5040171699309126
6,3,D,0.7174389352143007
1,4,D,-1.0
2,4,D,-0.5857864376269049
3,4,D,-0.2679491924311228
4,4,D,0.0
5,4,D,0.2360679774997898
6,4,D,0.4494897427831779
1,5,D,-1.2360679774997898
2,5,D,-0.8218544151266947
3,5,D,-0.5040171699309126
4,5,D,-0.2360679774997898
5,5,D,0.0
6,5,D,0.21342176528338808
1,6,D,-1.4494897427831779
2,6,D,-1.0352761804100827
3,6,D,-0.7174389352143007
4,6,D,-0.4494897427831779
5,6,D,-0.21342176528338808
6,6,D,0.0

</script><script type="text/plain" id="df_combined" data-format="csv_embedded" data-src="">
date,x,y,color,categ,categ22
2024-01-01,1,0.8552519547364308,A,B,Category_A
2024-01-02,2,0.04341478783014718,B,B,Category_A
2024-01-03,3,0.8190291540471943,A,B,Category_A
2024-01-04,4,0.7147774660048276,B,B,Category_A
2024-01-05,5,0.1971441770885498,A,B,Category_A
2024-01-06,6,0.8732266585967241,B,A,Category_A
2024-01-07,7,0.6968198337569556,A,A,Category_A
2024-01-08,8,0.33535477804021796,B,A,Category_A
2024-01-09,9,0.8324744325272015,A,A,Category_A
2024-01-10,10,0.9667454286772246,B,C,Category_A
2024-01-01,1,0.6126014313580128,A,A,Category_B
2024-01-02,2,0.2223794183208858,B,A,Category_B
2024-01-03,3,0.5962223451342854,A,A,Category_B
2024-01-04,4,0.7718794058608831,B,A,Category_B
2024-01-05,5,0.8643928350824728,A,A,Category_B
2024-01-06,6,0.109008772921527,B,B,Category_B
2024-01-07,7,0.9817264972868209,A,B,Category_B
2024-01-08,8,0.4753649716870003,B,B,Category_B
2024-01-09,9,0.670104622592312,A,B,Category_B
2024-01-10,10,0.2165418479828054,B,C,Category_B

</script>

<!-- ACTUAL CONTENT -->

<h1></h1>
<p></p>

    <div class="textblock-content">
        <h1>PivotTable Examples</h1>
<p>This page demonstrates the key features of interactive PivotTable plots in JSPlots.</p>
<ul>
    <li><strong>Basic pivot:</strong> Simple data aggregation with drag-and-drop</li>
    <li><strong>Custom heatmaps:</strong> Color-coded matrices with custom color scales</li>
    <li><strong>Different renderers:</strong> Table, Bar Chart, Line Chart, and more</li>
    <li><strong>Data filtering:</strong> Inclusions and exclusions to focus on specific data</li>
    <li><strong>Aggregations:</strong> Sum, Average, Count, and other aggregation functions</li>
    <li><strong>Combined with other plots:</strong> Mix PivotTables with LineCharts and 3D plots</li>
</ul>
<p><em>Tip: Drag and drop fields between Rows, Columns, and Values to reorganize!</em></p>

    </div>
<br>
<hr>
<br>
    <h2>sales_pivot</h2>
    <p>Basic pivot table - drag fields to reorganize rows and columns</p>
    <div id="sales_pivot"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: sales_data</p><br>
<hr>
<br>
    <h2>performance_heatmap</h2>
    <p>Custom color scale heatmap - green indicates good performance, red needs improvement</p>
    <div id="performance_heatmap"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: performance_data</p><br>
<hr>
<br>
    <h2>revenue_by_category</h2>
    <p>Bar chart renderer - switch renderer in the dropdown to see other visualizations</p>
    <div id="revenue_by_category"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: product_data</p><br>
<hr>
<br>
    <h2>customer_revenue</h2>
    <p>Exclusions feature - 'Test' country data is automatically filtered out</p>
    <div id="customer_revenue"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: customer_data</p><br>
<hr>
<br>
    <h2>survey_results</h2>
    <p>Inclusions feature - only showing ages 18-45, filtering out older demographics</p>
    <div id="survey_results"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: survey_data</p><br>
<hr>
<br>
    <h2>transaction_analysis</h2>
    <p>Count aggregation - showing transaction counts rather than sums or averages</p>
    <div id="transaction_analysis"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: transaction_data</p><br>
<hr>
<br>
    <h2>Returns_Over_Last_Few_Days</h2>
    <p>Stock returns heatmap with MSFT excluded</p>
    <div id="Returns_Over_Last_Few_Days"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: stockReturns</p><br>
<hr>
<br>
    <h2>Correlation_Matrix</h2>
    <p>Correlation matrix with custom red-white-blue color scale</p>
    <div id="Correlation_Matrix"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: correlations</p><br>
<hr>
<br>
<h2>Line Chart with Filters</h2>
<p>Interactive line chart with dropdown filters - combine with PivotTables!</p>

<!-- Filters (for data filtering) -->
<div style="margin-bottom: 15px; padding: 10px; border: 1px solid #ddd; background-color: #f9f9f9;">
            <h4 style="margin-top: 0;">Filters</h4>
                    <div style="margin: 10px;">
            <label for="categ22_select">categ22: </label>
            <select id="categ22_select" multiple style="min-width: 150px; height: 100px;" onchange="updateChart_pchart()">
                <option value="Category_A" selected>Category_A</option>
                <option value="Category_B">Category_B</option>
            </select>
        </div>
                <div style="margin: 10px;">
            <label for="categ_select">categ: </label>
            <select id="categ_select" multiple style="min-width: 150px; height: 100px;" onchange="updateChart_pchart()">
                <option value="B">B</option>
                <option value="A" selected>A</option>
                <option value="C">C</option>
            </select>
        </div>
        
        </div>

<!-- Plot Attributes (x, y, color, aggregator) -->
<div style="margin-bottom: 15px; padding: 10px; border: 1px solid #ddd; background-color: #f0f8ff;">
            <h4 style="margin-top: 0;">Plot Attributes</h4>
                <div style="margin: 10px;">
        <label for="aggregator_select_pchart">Aggregator: </label>
        <select id="aggregator_select_pchart" onchange="updateChart_pchart()">
                <option value="none" selected>none</option>
                <option value="mean">mean</option>
                <option value="median">median</option>
                <option value="count">count</option>
                <option value="min">min</option>
                <option value="max">max</option>
        </select>
    </div>
    
        </div>

<!-- Faceting -->


<!-- Chart -->
<div id="pchart"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: df_combined</p><br>
<hr>
<br>
<h2>3D Surface Chart</h2>
<p>3D surface visualization grouped by mathematical functions</p>

<!-- Filters (for data filtering) -->


<!-- Chart -->
<div id="threeD"></div>
<br><p style="text-align: right; font-size: 0.8em; color: #666; margin-top: -10px; margin-bottom: 10px;">Data: subframe</p><br>
<hr>
<br>
    <div class="textblock-content">
        <h2>Key Features Summary</h2>
<ul>
    <li><strong>Drag-and-drop interface:</strong> Reorganize data dynamically by dragging fields</li>
    <li><strong>Multiple renderers:</strong> Table, Heatmap, Bar Chart, Line Chart, and more</li>
    <li><strong>Custom color scales:</strong> Define your own color gradients for heatmaps</li>
    <li><strong>Aggregation functions:</strong> Sum, Average, Count, Median, Min, Max, etc.</li>
    <li><strong>Data filtering:</strong> Include or exclude specific values</li>
    <li><strong>Multi-level grouping:</strong> Use multiple row or column dimensions</li>
    <li><strong>Integration:</strong> Combine PivotTables with LineCharts, 3D plots, and more</li>
</ul>
<p><strong>Tip:</strong> Try dragging unused fields from the top into Rows or Columns!</p>

    </div>


<hr><p align="right"><small>This page was created using <a href="https://github.com/s-baumann/JSPlots.jl">JSPlots.jl</a>.</small></p>
</body>
</html>
